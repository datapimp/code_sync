//     keymaster.js
//     (c) 2011-2012 Thomas Fuchs
//     keymaster.js may be freely distributed under the MIT license.
(function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,n){var r,i,o,u,a;r=e.keyCode,t(w,r)==-1&&w.push(r);if(r==93||r==224)r=91;if(r in m){m[r]=!0;for(o in y)y[o]==r&&(s[o]=!0);return}if(!s.filter.call(this,e))return;if(!(r in v))return;for(u=0;u<v[r].length;u++){i=v[r][u];if(i.scope==n||i.scope=="all"){a=i.mods.length>0;for(o in m)if(!m[o]&&t(i.mods,+o)>-1||m[o]&&t(i.mods,+o)==-1)a=!1;(i.mods.length==0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||a)&&i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function r(e){var n=e.keyCode,r,i=t(w,n);i>=0&&w.splice(i,1);if(n==93||n==224)n=91;if(n in m){m[n]=!1;for(r in y)y[r]==n&&(s[r]=!1)}}function i(){for(d in m)m[d]=!1;for(d in y)s[d]=!1}function s(e,t,n){var r,i,s,o;n===undefined&&(n=t,t="all"),e=e.replace(/\s/g,""),r=e.split(","),r[r.length-1]==""&&(r[r.length-2]+=",");for(s=0;s<r.length;s++){i=[],e=r[s].split("+");if(e.length>1){i=e.slice(0,e.length-1);for(o=0;o<i.length;o++)i[o]=y[i[o]];e=[e[e.length-1]]}e=e[0],e=b[e]||e.toUpperCase().charCodeAt(0),e in v||(v[e]=[]),v[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}}function o(e){if(typeof e=="string"){if(e.length!=1)return!1;e=e.toUpperCase().charCodeAt(0)}return t(w,e)!=-1}function u(){return w}function a(e){var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function f(e){g=e||"all"}function l(){return g||"all"}function c(e){var t,n,r;for(t in v){n=v[t];for(r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++}}function h(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function p(){var t=e.key;return e.key=E,t}var d,v={},m={16:!1,18:!1,17:!1,91:!1},g="all",y={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},b={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=[];for(d=1;d<20;d++)y["f"+d]=111+d;for(d in y)s[d]=!1;h(document,"keydown",function(e){n(e,g)}),h(document,"keyup",r),h(window,"focus",i);var E=e.key;e.key=s,e.key.setScope=f,e.key.getScope=l,e.key.deleteScope=c,e.key.filter=a,e.key.isPressed=o,e.key.getPressedKeyCodes=u,e.key.noConflict=p,typeof module!="undefined"&&(module.exports=key)})(this),function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(b.acceptData(e)){var s,o,u=b.expando,a="string"==typeof n,f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if(h&&c[h]&&(i||c[h].data)||!a||r!==t)return h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n)),s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function q(e,t,n){if(b.acceptData(e)){var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(u[a]){if(t&&(s=n?u[a]:u[a].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}(n||(delete u[a].data,U(u[a])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}function R(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(F,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=b.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,b.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e)if(r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$n.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(D(),b.ready())},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=s.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||b.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r));return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&N.test(n.replace(k,"@").replace(L,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:y&&!y.call("﻿ ")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===b.type(r)){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=null==e.frameElement&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e="string"==typeof e?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!a||i&&!f||(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,s=1===i?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip,b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];a&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===p.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null)}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length&&(u=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>o;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===i?b.prop(e,n,r):(o=1!==
a||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z)),r===t?s&&o&&"get"in s&&null!==(u=s.get(e,n))?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),null==u?t:u):null!==r?s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Y&&G?null!=i:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Y&&G||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(m&&(l=m.events)){t=(t||"").match(E)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||b.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)b.event.remove(e,p+t[f],n,r,!0);b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+b.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[b.expando]?n:new b.Event(v,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!b.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!(o||n.isDefaultPrevented()||c._default&&c._default.apply(i.ownerDocument,r)!==!1||"click"===v&&b.nodeName(i,"a")||!b.acceptData(i)||!a||!i[v]||b.isWindow(i))){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,r,!0)},teardown:function(){0===--n&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;if((t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){if(h=!0,v=w,m=t,y=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){(!n||(r=U.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(s=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length));for(o in i.filter)!(r=V[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[i])if(1===t.nodeType||s)if(l=t[w]||(t[w]={}),(f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else if(f=l[i]=[c],f[1]=e(t,n,u)||r,f[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:mt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;s>a;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{if(n=i.filter[e[a].type].apply(null,e[a].matches),n[w]){for(r=++a;s>r;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,r>a&&yt(e.slice(a,r)),s>r&&yt(e=e.slice(r)),s>r&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=null==S?1:Math.random()||.1;for(E&&(f=a!==c&&a,r=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!p&&i.relative[o[1].type]){if(t=i.find.ID(a.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){if(a=o[s],i.relative[f=a.type])break;if((l=i.find[f])&&(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=r.length&&pt(o),!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=RegExp("^"+H+"*,"+H+"*"),z=RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=RegExp(q),X=RegExp("^"+j+"$"),V={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),NAME:RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+I),PSEUDO:RegExp("^"+q),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;return n!==c&&9===n.nodeType&&n.documentElement?(c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==L?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,n){return typeof n.getElementsByName!==L?n.getElementsByName(name):t},i.find.CLASS=S.getByClassName&&function(e,n){return typeof n.getElementsByClassName===L||p?t:n.getElementsByClassName(e)},v=[],d=[":focus"],(S.qsa=rt(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=RegExp(d.join("|")),v=RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;return e===t?(a=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c):c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']"),!(!S.matchesSelector||p||v&&v.test(t)||d.test(t)))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;if(a=!S.detectDuplicates,e.sort(y),a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[x,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],
b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!b(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(1>=c||"string"!=typeof v||b.support.checkClone)&&Tt.test(v))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c&&(f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;c>l;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,b.map(u,Dt),l=0;o>l;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")));f=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===b.type(s))b.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===b.inArray(s,r))&&(o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;null!=(n=e[u]);u++)if((t||b.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+w+")(.*)$","i"),Jt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=b.camelCase(n),f=e.style;if(n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||b.cssNumber[a]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||b.contains(e.ownerDocument,e)||(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==w&&(w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r)),e>=200&&300>e||304===e?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),204===e?(l=!0,T="nocontent"):304===e?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===w)return x;a=c.global,a&&0===b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==w){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(2>w))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=("absolute"===r||"fixed"===r)&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T
(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),!function(e,t){"use strict";var n=t.prototype.trim,r=t.prototype.trimRight,i=t.prototype.trimLeft,s=function(e){return e*1||0},o=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},u=[].slice,a=function(e){return e==null?"\\s":e.source?e.source:"["+p.escapeRegExp(e)+"]"},f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},l={};for(var c in f)l[f[c]]=c;var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=o,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var s=1,o=r.length,u="",a,f=[],l,c,p,d,v,m;for(l=0;l<o;l++){u=e(r[l]);if(u==="string")f.push(r[l]);else if(u==="array"){p=r[l];if(p[2]){a=i[s];for(c=0;c<p[2].length;c++){if(!a.hasOwnProperty(p[2][c]))throw new Error(h('[_.sprintf] property "%s" does not exist',p[2][c]));a=a[p[2][c]]}}else p[1]?a=i[p[1]]:a=i[s++];if(/[^s]/.test(p[8])&&e(a)!="number")throw new Error(h("[_.sprintf] expecting number but found %s",e(a)));switch(p[8]){case"b":a=a.toString(2);break;case"c":a=t.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=p[7]?a.toExponential(p[7]):a.toExponential();break;case"f":a=p[7]?parseFloat(a).toFixed(p[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=t(a))&&p[7]?a.substring(0,p[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(p[8])&&p[3]&&a>=0?"+"+a:a,v=p[4]?p[4]=="0"?"0":p[4].charAt(1):" ",m=p[6]-t(a).length,d=p[6]?n(v,m):"",f.push(p[5]?a+d:d+a)}}return f.join("")},r.cache={},r.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}(),p={VERSION:"2.3.0",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return e==null?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=e==null?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return e==null?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return p.strip(e).replace(/\s+/g," ")},count:function(e,n){return e==null||n==null?0:t(e).split(n).length-1},chars:function(e){return e==null?[]:t(e).split("")},swapCase:function(e){return e==null?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return e==null?"":t(e).replace(/[&<>"']/g,function(e){return"&"+l[e]+";"})},unescapeHTML:function(e){return e==null?"":t(e).replace(/\&([^;]+);/g,function(e,n){var r;return n in f?f[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return e==null?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=p.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return p.splice(e,t,0,n)},include:function(e,n){return n===""?!0:e==null?!1:t(e).indexOf(n)!==-1},join:function(){var e=u.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null?[]:t(e).split("\n")},reverse:function(e){return p.chars(e).reverse().join("")},startsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return n===""?!0:e==null||n==null?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return e==null?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return e==null?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return p.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return p.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return p.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return p.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return p.capitalize(p.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return e==null?"":!r&&n?n.call(e):(r=a(r),t(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,n){return e==null?"":!n&&i?i.call(e):(n=a(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return e==null?"":!n&&r?r.call(e):(n=a(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,r){return e==null?"":(e=t(e),r=r||"...",n=~~n,e.length>n?e.slice(0,n)+r:e)},prune:function(e,n,r){if(e==null)return"";e=t(e),n=~~n,r=r!=null?t(r):"...";if(e.length<=n)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return s.slice(s.length-2).match(/\w\w/)?s=s.replace(/\s*\S+$/,""):s=p.rtrim(s.slice(0,s.length-1)),(s+r).length>e.length?e:e.slice(0,s.length)+r},words:function(e,t){return p.isBlank(e)?[]:p.trim(e,t).split(t||/\s+/)},pad:function(e,n,r,i){e=e==null?"":t(e),n=~~n;var s=0;r?r.length>1&&(r=r.charAt(0)):r=" ";switch(i){case"right":return s=n-e.length,e+o(r,s);case"both":return s=n-e.length,o(r,Math.ceil(s/2))+e+o(r,Math.floor(s/2));default:return s=n-e.length,o(r,s)+e}},lpad:function(e,t,n){return p.pad(e,t,n)},rpad:function(e,t,n){return p.pad(e,t,n,"right")},lrpad:function(e,t,n){return p.pad(e,t,n,"both")},sprintf:h,vsprintf:function(e,t){return t.unshift(e),h.apply(null,t)},toNumber:function(e,n){if(e==null||e=="")return 0;e=t(e);var r=s(s(e).toFixed(~~n));return r===0&&!e.match(/^0+$/)?Number.NaN:r},numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";e=e.toFixed(~~t),r=r||",";var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},strRight:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strRightBack:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.lastIndexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strLeft:function(e,n){if(e==null)return"";e=t(e),n=n!=null?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(e==null)return"";e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),s=i.pop();return e.length>2&&r&&(n=p.rtrim(t)+n),i.length?i.join(t)+n+s:s},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,p.toSentence.apply(p,e)},slugify:function(e){if(e==null)return"";var n="Ä…Ã Ã¡Ã¤Ã¢Ã£Ã¥Ã¦Ä‡Ä™Ã¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®Å‚Å„Ã²Ã³Ã¶Ã´ÃµÃ¸Ã¹ÃºÃ¼Ã»Ã±Ã§Å¼Åº",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(a(n),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=n.indexOf(e);return r.charAt(t)||"-"}),p.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return p.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,n,r){if(e==null)return"";n=~~n;if(r==null)return o(t(e),n);for(var i=[];n>0;i[--n]=e);return i.join(r)},levenshtein:function(e,n){if(e==null&&n==null)return 0;if(e==null)return t(n).length;if(n==null)return t(e).length;e=t(e),n=t(n);var r=[],i,s;for(var o=0;o<=n.length;o++)for(var u=0;u<=e.length;u++)o&&u?e.charAt(u-1)===n.charAt(o-1)?s=i:s=Math.min(r[u],r[u-1],i)+1:s=o+u,i=r[u],r[u]=s;return r.pop()}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=p),exports._s=p):typeof define=="function"&&define.amd?define("underscore.string",[],function(){return p}):(e._=e._||{},e._.string=e._.str=p)}(this,String),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,
arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(e,t,n){function f(e,t,n){var r=[];for(var i=0;i<e.length;i++){var s=tinycolor(e[i]),u=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(t,e[i])?" sp-thumb-active":"";var a=o?"background-color:"+s.toRgbString():"filter:"+s.toFilter();r.push('<span title="'+s.toRgbString()+'" data-color="'+s.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+n+"'>"+r.join("")+"</div>"}function l(){for(var e=0;e<i.length;e++)i[e]&&i[e].hide()}function c(e,n){var i=t.extend({},r,e);return i.callbacks={move:m(i.move,n),change:m(i.change,n),show:m(i.show,n),hide:m(i.hide,n),beforeShow:m(i.beforeShow,n)},i}function h(r,h){function mt(){V.toggleClass("sp-flat",m),V.toggleClass("sp-input-disabled",!d.showInput),V.toggleClass("sp-alpha-enabled",d.showAlpha),V.toggleClass("sp-buttons-disabled",!d.showButtons||m),V.toggleClass("sp-palette-disabled",!d.showPalette),V.toggleClass("sp-palette-only",d.showPaletteOnly),V.toggleClass("sp-initial-disabled",!d.showInitial),V.addClass(d.className),Bt()}function gt(){function o(e){return e.data&&e.data.ignore?(At(t(this).data("color")),_t()):(At(t(this).data("color")),Ht(!0),_t(),kt()),!1}s&&V.find("*:not(input)").attr("unselectable","on"),mt(),ut&&W.after(at).hide();if(m)W.after(V).hide();else{var n=d.appendTo==="parent"?W.parent():t(d.appendTo);n.length!==1&&(n=t("body")),n.append(V)}if(w&&e.localStorage){try{var r=e.localStorage[w].split(",#");r.length>1&&(delete e.localStorage[w],t.each(r,function(e,t){yt(t)}))}catch(i){}try{I=e.localStorage[w].split(";")}catch(i){}}ft.bind("click.spectrum touchstart.spectrum",function(e){X||Nt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(W.is(":disabled")||d.disabled===!0)&&qt(),V.click(v),tt.change(Tt),tt.bind("paste",function(){setTimeout(Tt,1)}),tt.keydown(function(e){e.keyCode==13&&Tt()}),it.text(d.cancelText),it.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),kt("cancel")}),st.text(d.chooseText),st.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Mt()&&(Ht(!0),kt())}),g(Z,function(e,t,n){B=e/O,n.shiftKey&&(B=Math.round(B*10)/10),_t()}),g(Q,function(e,t){D=parseFloat(t/L),_t()},St,xt),g(J,function(e,t){P=parseFloat(e/N),H=parseFloat((C-t)/C),_t()},St,xt),ct?(At(ct),Dt(),dt=pt||tinycolor(ct).format,yt(ct)):Dt(),m&&Ct();var u=s?"mousedown.spectrum":"click.spectrum touchstart.spectrum";nt.delegate(".sp-thumb-el",u,o),rt.delegate(".sp-thumb-el:nth-child(1)",u,{ignore:!0},o)}function yt(n){if(b){var r=tinycolor(n).toRgbString();if(t.inArray(r,I)===-1){I.push(r);while(I.length>q)I.shift()}if(w&&e.localStorage)try{e.localStorage[w]=I.join(";")}catch(i){}}}function bt(){var e=[],t=I,n={},r;if(d.showPalette){for(var i=0;i<F.length;i++)for(var s=0;s<F[i].length;s++)r=tinycolor(F[i][s]).toRgbString(),n[r]=!0;for(i=0;i<t.length;i++)r=tinycolor(t[i]).toRgbString(),n.hasOwnProperty(r)||(e.push(t[i]),n[r]=!0)}return e.reverse().slice(0,d.maxSelectionSize)}function wt(){var e=Ot(),n=t.map(F,function(t,n){return f(t,e,"sp-palette-row sp-palette-row-"+n)});I&&n.push(f(bt(),e,"sp-palette-row sp-palette-row-selection")),nt.html(n.join(""))}function Et(){if(d.showInitial){var e=ht,t=Ot();rt.html(f([e,t],t,"sp-palette-row-initial"))}}function St(){(C<=0||N<=0||L<=0)&&Bt(),V.addClass(R)}function xt(){V.removeClass(R)}function Tt(){var e=tinycolor(tt.val());e.ok?At(e):tt.addClass("sp-validation-error")}function Nt(){T?kt():Ct()}function Ct(){var n=t.Event("beforeShow.spectrum");if(T){Bt();return}W.trigger(n,[Ot()]);if(S.beforeShow(Ot())===!1||n.isDefaultPrevented())return;l(),T=!0,t(U).bind("click.spectrum",kt),t(e).bind("resize.spectrum",x),at.addClass("sp-active"),V.removeClass("sp-hidden"),d.showPalette&&wt(),Bt(),Dt(),ht=Ot(),Et(),S.show(ht),W.trigger("show.spectrum",[ht])}function kt(n){if(n&&n.type=="click"&&n.button==2)return;if(!T||m)return;T=!1,t(U).unbind("click.spectrum",kt),t(e).unbind("resize.spectrum",x),at.removeClass("sp-active"),V.addClass("sp-hidden");var r=!tinycolor.equals(Ot(),ht);r&&(vt&&n!=="cancel"?Ht(!0):Lt()),S.hide(Ot()),W.trigger("hide.spectrum",[Ot()])}function Lt(){At(ht,!0)}function At(e,t){if(tinycolor.equals(e,Ot()))return;var n=tinycolor(e),r=n.toHsv();D=r.h,P=r.s,H=r.v,B=r.a,Dt(),n.ok&&!t&&(dt=pt||n.format)}function Ot(e){return e=e||{},tinycolor.fromRatio({h:D,s:P,v:H,a:Math.round(B*100)/100},{format:e.format||dt})}function Mt(){return!tt.hasClass("sp-validation-error")}function _t(){Dt(),S.move(Ot()),W.trigger("move.spectrum",[Ot()])}function Dt(){tt.removeClass("sp-validation-error"),Pt();var e=tinycolor.fromRatio({h:D,s:1,v:1});J.css("background-color",e.toHexString());var t=dt;B<1&&(t==="hex"||t==="hex3"||t==="hex6"||t==="name")&&(t="rgb");var n=Ot({format:t}),r=n.toHexString(),i=n.toRgbString();o||n.alpha===1?lt.css("background-color",i):(lt.css("background-color","transparent"),lt.css("filter",n.toFilter()));if(d.showAlpha){var u=n.toRgb();u.a=0;var a=tinycolor(u).toRgbString(),f="linear-gradient(left, "+a+", "+r+")";s?Y.css("filter",tinycolor(a).toFilter({gradientType:1},r)):(Y.css("background","-webkit-"+f),Y.css("background","-moz-"+f),Y.css("background","-ms-"+f),Y.css("background",f))}d.showInput&&tt.val(n.toString(t)),d.showPalette&&wt(),Et()}function Pt(){var e=P,t=H,n=e*N,r=C-t*C;n=Math.max(-k,Math.min(N-k,n-k)),r=Math.max(-k,Math.min(C-k,r-k)),K.css({top:r,left:n});var i=B*O;et.css({left:i-M/2});var s=D*L;G.css({top:s-_})}function Ht(e){var t=Ot();ot&&W.val(t.toString(dt)).change();var n=!tinycolor.equals(t,ht);ht=t,yt(t),e&&n&&(S.change(t),W.trigger("change.spectrum",[t]))}function Bt(){N=J.width(),C=J.height(),k=K.height(),A=Q.width(),L=Q.height(),_=G.height(),O=Z.width(),M=et.width(),m||(V.css("position","absolute"),V.offset(p(V,ft))),Pt()}function jt(){W.show(),ft.unbind("click.spectrum touchstart.spectrum"),V.remove(),at.remove(),i[Rt.id]=null}function Ft(e,r){if(e===n)return t.extend({},d);if(r===n)return d[e];d[e]=r,mt()}function It(){X=!1,W.attr("disabled",!1),ft.removeClass("sp-disabled")}function qt(){kt(),X=!0,W.attr("disabled",!0),ft.addClass("sp-disabled")}var d=c(h,r),m=d.flat,b=d.showSelectionPalette,w=d.localStorageKey,E=d.theme,S=d.callbacks,x=y(Bt,10),T=!1,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=1,j=d.palette.slice(0),F=t.isArray(j[0])?j:[j],I=d.selectionPalette.slice(0),q=d.maxSelectionSize,R="sp-dragging",U=r.ownerDocument,z=U.body,W=t(r),X=!1,V=t(a,U).addClass(E),J=V.find(".sp-color"),K=V.find(".sp-dragger"),Q=V.find(".sp-hue"),G=V.find(".sp-slider"),Y=V.find(".sp-alpha-inner"),Z=V.find(".sp-alpha"),et=V.find(".sp-alpha-handle"),tt=V.find(".sp-input"),nt=V.find(".sp-palette"),rt=V.find(".sp-initial"),it=V.find(".sp-cancel"),st=V.find(".sp-choose"),ot=W.is("input"),ut=ot&&!m,at=ut?t(u).addClass(E).addClass(d.className):t([]),ft=ut?at:W,lt=at.find(".sp-preview-inner"),ct=d.color||ot&&W.val(),ht=!1,pt=d.preferredFormat,dt=pt,vt=!d.showButtons||d.clickoutFiresChange;gt();var Rt={show:Ct,hide:kt,toggle:Nt,reflow:Bt,option:Ft,enable:It,disable:qt,set:function(e){At(e),Ht()},get:Ot,destroy:jt,container:V};return Rt.id=i.push(Rt)-1,Rt}function p(e,n){var r=0,i=e.outerWidth(),s=e.outerHeight(),o=n.outerHeight(),u=e[0].ownerDocument,a=u.documentElement,f=a.clientWidth+t(u).scrollLeft(),l=a.clientHeight+t(u).scrollTop(),c=n.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>f&&f>i?Math.abs(c.left+i-f):0),c.top-=Math.min(c.top,c.top+s>l&&l>s?Math.abs(s+o-r):r),c}function d(){}function v(e){e.stopPropagation()}function m(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function g(n,r,i,o){function d(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function v(e){if(a){if(s&&document.documentMode<9&&!e.button)return g();var t=e.originalEvent.touches,i=t?t[0].pageX:e.pageX,o=t?t[0].pageY:e.pageY,u=Math.max(0,Math.min(i-f.left,c)),p=Math.max(0,Math.min(o-f.top,l));h&&d(e),r.apply(n,[u,p,e])}}function m(e){var r=e.which?e.which==3:e.button==2,s=e.originalEvent.touches;!r&&!a&&i.apply(n,arguments)!==!1&&(a=!0,l=t(n).height(),c=t(n).width(),f=t(n).offset(),t(u).bind(p),t(u.body).addClass("sp-dragging"),h||v(e),d(e))}function g(){a&&(t(u).unbind(p),t(u.body).removeClass("sp-dragging"),o.apply(n,arguments)),a=!1}r=r||function(){},i=i||function(){},o=o||function(){};var u=n.ownerDocument||document,a=!1,f={},l=0,c=0,h="ontouchstart"in e,p={};p.selectstart=d,p.dragstart=d,p[h?"touchmove":"mousemove"]=v,p[h?"touchend":"mouseup"]=g,t(n).bind(h?"touchstart":"mousedown",m)}function y(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}}function w(){e.console&&(w=Function.prototype.bind?Function.prototype.bind.call(console.log,console):function(){Function.prototype.apply.call(console.log,console,arguments)},w.apply(this,arguments))}var r={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},i=[],s=!!/msie/i.exec(e.navigator.userAgent),o=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),u=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(s)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";t.fn.spectrum=function(e,n){if(typeof e=="string"){var r=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=i[t(this).data(b)];if(n){var o=n[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");e=="get"?r=n.get():e=="container"?r=n.container:e=="option"?r=n.option.apply(n,s):e=="destroy"?(n.destroy(),t(this).removeData(b)):o.apply(n,s)}}),r}return this.spectrum("destroy").each(function(){var n=h(this,e);t(this).data(b,n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=g,t.fn.spectrum.defaults=r,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("<input type='color' value='!' />")[0],n=e.type==="color"&&e.value!="!";n||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(e){function f(e,t){e=e?e:"",t=t||{};if(typeof e=="object"&&e.hasOwnProperty("_tc_id"))return e;var n=l(e),i=n.r,o=n.g,u=n.b,a=n.a,c=s(100*a)/100,p=t.format||n.format;return i<1&&(i=s(i)),o<1&&(o=s(o)),u<1&&(u=s(u)),{ok:n.ok,format:p,_tc_id:r++,alpha:a,toHsv:function(){var e=d(i,o,u);return{h:e.h*360,s:e.s,v:e.v,a:a}},toHsvString:function(){var e=d(i,o,u),t=s(e.h*360),n=s(e.s*100),r=s(e.v*100);return a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+c+")"},toHsl:function(){var e=h(i,o,u);return{h:e.h*360,s:e.s,l:e.l,a:a}},toHslString:function(){var e=h(i,o,u),t=s(e.h*360),n=s(e.s*100),r=s(e.l*100);return a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+c+")"},toHex:function(e){return m(i,o,u,e)},toHexString:function(e){return"#"+m(i,o,u,e)},toRgb:function(){return{r:s(i),g:s(o),b:s(u),a:a}},toRgbString:function(){return a==1?"rgb("+s(i)+", "+s(o)+", "+s(u)+")":"rgba("+s(i)+", "+s(o)+", "+s(u)+", "+c+")"},toPercentageRgb:function(){return{r:s(w(i,255)*100)+"%",g:s(w(o,255)*100)+"%",b:s(w(u,255)*100)+"%",a:a}},toPercentageRgbString:function(){return a==1?"rgb("+s(w(i,255)*100)+"%, "+s(w(o,255)*100)+"%, "+s(w(u,255)*100)+"%)":"rgba("+s(w(i,255)*100)+"%, "+s(w(o,255)*100)+"%, "+s(w(u,255)*100)+"%, "+c+")"},toName:function(){return y[m(i,o,u,!0)]||!1},toFilter:function(e){var n=m(i,o,u),r=n,s=Math.round(parseFloat(a)*255).toString(16),l=s,c=t&&t.gradientType?"GradientType = 1, ":"";if(e){var h=f(e);r=h.toHex(),l=Math.round(parseFloat(h.alpha)*255).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr=#"+N(s)+n+",endColorstr=#"+N(l)+r+")"},toString:function(e){e=e||this.format;var t=!1;e==="rgb"&&(t=this.toRgbString()),e==="prgb"&&(t=this.toPercentageRgbString());if(e==="hex"||e==="hex6")t=this.toHexString();return e==="hex3"&&(t=this.toHexString(!0)),e==="name"&&(t=this.toName()),e==="hsl"&&(t=this.toHslString()),e==="hsv"&&(t=this.toHsvString()),t||this.toHexString()}}}function l(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;typeof e=="string"&&(e=L(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=c(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=C(e.s),e.v=C(e.v),t=v(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=C(e.s),e.l=C(e.l),t=p(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=parseFloat(n);if(isNaN(n)||n<0||n>1)n=1;return{ok:r,format:e.format||i,r:o(255,u(t.r,0)),g:o(255,u(t.g,0)),b:o(255,u(t.b,0)),a:n}}function c(e,t,n){return{r:w(e,255)*255,g:w(t,255)*255,b:w(n,255)*255}}function h(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var r=u(e,t,n),i=o(e,t,n),s,a,f=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;a=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:a,l:f}}function p(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=w(e,360),t=w(t,100),n=w(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function d(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var r=u(e,t,n),i=o(e,t,n),s,a,f=r,l=r-i;a=r===0?0:l/r;if(r==i)s=0;else{switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:a,v:f}}function v(e,t,n){e=w(e,360)*6,t=w(t,100),n=w(n,100);var r=i.floor(e),s=e-r,o=n*(1-t),u=n*(1-s*t),a=n*(1-(1-s)*t),f=r%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function m(e,t,n,r){var i=[N(s(e).toString(16)),N(s(t).toString(16)),N(s(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function b(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function w(e,t){x(e)&&(e="100%");var n=T(e);return e=o(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function E(e){return o(1,u(0,e))}function S(e){return parseInt(e,16)}function x(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function T(e){return typeof e=="string"&&e.indexOf("%")!=-1}function N(e){return e.length==1?"0"+e:""+e}function C(e){return e<=1&&(e=e*100+"%"),e}function L(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r=!1;if(g[e])e=g[e],r=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0};var i;return(i=k.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=k.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=k.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=k.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=k.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=k.hex6.exec(e))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),format:r?"name":"hex"}:(i=k.hex3.exec(e))?{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),format:r?"name":"hex"}:!1}var t=/^[\s,#]+/,n=/\s+$/,r=0,i=Math,s=i.round,o=i.min,u=i.max,a=i.random;f.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=C(e[r]));e=n}return f(e,t)},f.equals=function(e,t){return!e||!t?!1:f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:a(),g:a(),b:a()})},f.desaturate=function(e,t){var n=f(e).toHsl();return n.s-=(t||10)/100,n.s=E(n.s),f(n)},f.saturate=function(e,t){var n=f(e).toHsl();return n.s+=(t||10)/100,n.s=E(n.s),f(n)},f.greyscale=function(e){return f.desaturate(e,100)},f.lighten=function(e,t){var n=f(e).toHsl();return n.l+=(t||10)/100,n.l=E(n.l),f(n)},f.darken=function(e,t){var n=f(e).toHsl();return n.l-=(t||10)/100,n.l=E(n.l),f(n)},f.complement=function(e){var t=f(e).toHsl();return t.h=(t.h+180)%360,f(t)},f.triad=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]},f.tetrad=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]},f.splitcomplement=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]},f.analogous=function(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,s=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(f(r));return s},f.monochromatic=function(e,t){t=t||6;var n=f(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(f({h:r,s:i,v:s})),s=(s+u)%1;return o},f.readability=function(e,t){var n=f(e).toRgb(),r=f(t).toRgb(),i=(n.r*299+n.g*587+n.b*114)/1e3,s=(r.r*299+r.g*587+r.b*114)/1e3,o=Math.max(n.r,r.r)-Math.min(n.r,r.r)+Math.max(n.g,r.g)-Math.min(n.g,r.g)+Math.max(n.b,r.b)-Math.min(n.b,r.b);return{brightness:Math.abs(i-s),color:o}},f.readable=function(e,t){var n=f.readability(e,t);return n.brightness>125&&n.color>500},f.mostReadable=function(e,t){var n=null,r=0,i=!1;for(var s=0;s<t.length;s++){var o=f.readability(e,t[s]),u=o.brightness>125&&o.color>500,a=3*(o.brightness/125)+o.color/500;if(u&&!i||u&&i&&a>r||!u&&!i&&a>r)i=u,r=a,n=f(t[s])}return n};var g=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},y=f.hexNames=b(g),k=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=f}(this),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}(window,jQuery),function(){}.call(this),window.CodeMirror=function(){"use strict";function S(e,n){if(!(this instanceof S))return new S(e,n);this.options=n=n||{};for(var r in Xn)!n.hasOwnProperty(r)&&Xn.hasOwnProperty(r)&&(n[r]=Xn[r]);P(n);var i=typeof n.value=="string"?0:n.value.first,s=this.display=x(e,i);s.wrapper.CodeMirror=this,M(this),n.autofocus&&!d&&Dt(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new ji},A(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var o=n.value;typeof o=="string"&&(o=new Gr(n.value,n.mode)),Nt(this,ti)(this,o),t&&setTimeout($i(_t,this,!0),20),Ht(this);var u;try{u=document.activeElement==s.input}catch(a){}u||n.autofocus&&!d?setTimeout($i(rn,this),20):sn(this),Nt(this,function(){for(var e in Wn)Wn.propertyIsEnumerable(e)&&Wn[e](this,n[e],$n);for(var t=0;t<Gn.length;++t)Gn[t](this)})()}function x(e,t){var r={},s=r.input=Yi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");i?s.style.width="1000px":s.setAttribute("wrap","off"),p&&(s.style.border="1px solid black"),s.setAttribute("autocorrect","off"),s.setAttribute("autocapitalize","off"),r.inputDiv=Yi("div",[s],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=Yi("div",[Yi("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=Yi("div",[Yi("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=Yi("div",null,"CodeMirror-scrollbar-filler"),r.lineDiv=Yi("div"),r.selectionDiv=Yi("div",null,null,"position: relative; z-index: 1"),r.cursor=Yi("div"," ","CodeMirror-cursor"),r.otherCursor=Yi("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=Yi("div",null,"CodeMirror-measure"),r.lineSpace=Yi("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=Yi("div",[Yi("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=Yi("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=Yi("div",null,null,"position: absolute; height: "+Hi+"px; width: 1px;"),r.gutters=Yi("div",null,"CodeMirror-gutters"),r.lineGutter=null;var o=Yi("div",[r.sizer,r.heightForcer,r.gutters],null,"position: relative; min-height: 100%");return r.scroller=Yi("div",[o],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=Yi("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.scroller],"CodeMirror"),n&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),p&&(s.style.width="0px"),i||(r.scroller.draggable=!0),f?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):n&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ji,r.draggingText=!1,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function T(e){e.doc.mode=S.getMode(e.options,e.doc.modeOption),e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Z(e,100),e.state.modeGen++,e.curOp&&Lt(e)}function N(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),D(e)),k(e),Lt(e),ct(e),setTimeout(function(){H(e.display,e.doc.height)},100)}function C(e){var t=wt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Et(e.display)-3);return function(i){return xr(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function k(e){var t=e.doc,n=C(e);t.iter(function(e){var t=n(e);t!=e.height&&si(e,t)})}function L(e){var t=tr[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function A(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ct(e)}function O(e){M(e),Lt(e)}function M(e){var t=e.display.gutters,n=e.options.gutters;Zi(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(Yi("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function _(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=wr(i)){var s=r.find();i=ni(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Er(i)){var s=r.find();n-=i.text.length-s.from.ch,i=ni(e,s.to.line),n+=i.text.length-s.to.ch}return n}function D(e){var t=e.display,n=e.doc;t.maxLine=ni(n,n.first),t.maxLineLength=_(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=_(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function P(e){var t=!1;for(var n=0;n<e.gutters.length;++n)e.gutters[n]=="CodeMirror-linenumbers"&&(e.lineNumbers?t=!0:e.gutters.splice(n--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function H(e,t){var n=t+it(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px";var r=Math.max(n,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,s=r>e.scroller.clientHeight;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?os(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?os(e.measure)+"px":"0",e.scrollbarH.firstChild.style
.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=os(e.measure)+"px"):e.scrollbarFiller.style.display="",l&&os(e.measure)===0&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c?"18px":"12px")}function B(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-rt(e));var s=Math.ceil(r+i);return{from:ui(t,r),to:ui(t,s)}}function j(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=q(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function F(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=I(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Yi("div",[Yi("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function I(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function q(e){return ns(e.scroller).left-ns(e.sizer).left}function R(e,t,n){var r=e.display.showingFrom,i=e.display.showingTo,s,o=B(e.display,e.doc,n);for(;;){if(!U(e,t,o))break;s=!0,_i(e,"update",e),(e.display.showingFrom!=r||e.display.showingTo!=i)&&_i(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo),K(e),H(e.display,e.doc.height),n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,typeof n=="number"?n:n.top)),o=B(e.display,e.doc,n);if(o.from>=e.display.showingFrom&&o.to<=e.display.showingTo)break;t=[]}return s}function U(e,t,r){var i=e.display,s=e.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=s.first,i.viewOffset=0;return}if(t.length==0&&r.from>i.showingFrom&&r.to<i.showingTo)return;F(e)&&(t=[{from:s.first,to:s.first+s.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?o:"0";var u=Infinity;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)if(t[a].diff){u=t[a].from;break}var f=s.first+s.size,l=Math.max(r.from-e.options.viewportMargin,s.first),c=Math.min(f,r.to+e.options.viewportMargin);i.showingFrom<l&&l-i.showingFrom<20&&(l=Math.max(s.first,i.showingFrom)),i.showingTo>c&&i.showingTo-c<20&&(c=Math.min(f,i.showingTo));if(E){l=oi(Sr(s,ni(s,l)));while(c<f&&xr(s,ni(s,c)))++c}var h=[{from:Math.max(i.showingFrom,s.first),to:Math.min(i.showingTo,f)}];h[0].from>=h[0].to?h=[]:h=W(h,t);if(E)for(var a=0;a<h.length;++a){var p=h[a],d;while(d=Er(ni(s,p.to-1))){var v=d.find().from.line;if(!(v>p.from)){h.splice(a--,1);break}p.to=v}}var m=0;for(var a=0;a<h.length;++a){var p=h[a];p.from<l&&(p.from=l),p.to>c&&(p.to=c),p.from>=p.to?h.splice(a--,1):m+=p.to-p.from}if(m==c-l&&l==i.showingFrom&&c==i.showingTo){z(e);return}h.sort(function(e,t){return e.from-t.from});try{var g=document.activeElement}catch(y){}m<(c-l)*.7&&(i.lineDiv.style.display="none"),V(e,l,c,h,u),i.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();var b=l!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;b&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=l,i.showingTo=c,Z(e,100);var w=i.lineDiv.offsetTop;for(var S=i.lineDiv.firstChild,x;S;S=S.nextSibling)if(S.lineObj){if(n){var T=S.offsetTop+S.offsetHeight;x=T-w,w=T}else{var N=ns(S);x=N.bottom-N.top}var C=S.lineObj.height-x;x<2&&(x=wt(i));if(C>.001||C<-0.001){si(S.lineObj,x);var k=S.lineObj.widgets;if(k)for(var a=0;a<k.length;++a)k[a].height=k[a].node.offsetHeight}}return z(e),!0}function z(e){var t=e.display.viewOffset=ai(e,ni(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function W(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function X(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:q(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function V(e,t,n,r,s){function c(t){var n=t.nextSibling;return i&&v&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=X(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!i||!e.display.currentWheelTarget)&&Zi(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(xr(e.doc,t)){t.height!=0&&si(t,0);if(t.widgets&&l.previousSibling)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].showIfHidden){var i=l.previousSibling;if(/pre/i.test(i.nodeName)){var u=Yi("div",null,null,"position: relative");i.parentNode.replaceChild(u,i),u.appendChild(i),i=u}var d=i.appendChild(Yi("div",[t.widgets[n].node],"CodeMirror-linewidget"));J(t.widgets[n],d,i,o)}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&s<=p&&l.lineNumber&&ts(l.lineNumber,I(e.options,p)),l=l.nextSibling}else{if(t.widgets)for(var v=0,m=l,g;m&&v<20;++v,m=m.nextSibling)if(m.lineObj==t&&/div/i.test(m.nodeName)){g=m;break}var y=$(e,t,p,o,g);if(y!=g)f.insertBefore(y,l);else{while(l!=g)l=c(l);l=l.nextSibling}y.lineObj=t}++p});while(l)l=c(l)}function $(e,t,r,i,s){var o=qr(e,t),u=t.gutterMarkers,a=e.display,f;if(!e.options.lineNumbers&&!u&&!t.bgClass&&!t.wrapClass&&!t.widgets)return o;if(s){s.alignable=null;var l=!0,c=0;for(var h=s.firstChild,p;h;h=p){p=h.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(h.className))s.removeChild(h);else{for(var d=0,v=!0;d<t.widgets.length;++d){var m=t.widgets[d],g=!1;m.above||(g=v,v=!1);if(m.node==h.firstChild){J(m,h,s,i),++c,g&&s.insertBefore(o,h);break}}if(d==t.widgets.length){l=!1;break}}}l&&c==t.widgets.length&&(f=s,s.className=t.wrapClass||"")}f||(f=Yi("div",null,t.wrapClass,"position: relative"),f.appendChild(o)),t.bgClass&&f.insertBefore(Yi("div",null,t.bgClass+" CodeMirror-linebackground"),f.firstChild);if(e.options.lineNumbers||u){var y=f.insertBefore(Yi("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),f.firstChild);e.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(y),e.options.lineNumbers&&(!u||!u["CodeMirror-linenumbers"])&&(f.lineNumber=y.appendChild(Yi("div",I(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.lineNumInnerWidth+"px")));if(u)for(var b=0;b<e.options.gutters.length;++b){var w=e.options.gutters[b],E=u.hasOwnProperty(w)&&u[w];E&&y.appendChild(Yi("div",[E],"CodeMirror-gutter-elt","left: "+i.gutterLeft[w]+"px; width: "+i.gutterWidth[w]+"px"))}}n&&(f.style.zIndex=2);if(t.widgets&&f!=s)for(var d=0,S=t.widgets;d<S.length;++d){var m=S[d],x=Yi("div",[m.node],"CodeMirror-linewidget");J(m,x,f,i),m.above?f.insertBefore(x,e.options.lineNumbers&&t.height!=0?y:o):f.appendChild(x),_i(m,"redraw")}return f}function J(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function K(e){var t=e.display,n=wn(e.doc.sel.from,e.doc.sel.to);n||e.options.showCursorWhenSelecting?Q(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":G(e);if(e.options.moveInputWithCursor){var r=vt(e,e.doc.sel.head,"div"),i=ns(t.wrapper),s=ns(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}}function Q(e){var t=e.display,n=vt(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function G(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(Yi("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i,a){function h(n){return dt(e,bn(t,n),"div",f)}var f=ni(n,t),l=f.text.length,c=a?Infinity:-Infinity;return ps(fi(f),r||0,i==null?l:i,function(e,t,n){var f=h(n=="rtl"?t-1:e),p=h(n=="rtl"?e:t-1),d=f.left,v=p.right;p.top-f.top>3&&(u(d,f.top,null,f.bottom),d=o,f.bottom<p.top&&u(d,f.bottom,null,p.top)),i==null&&t==l&&(v=s),r==null&&e==0&&(d=o),c=a?Math.min(p.top,c):Math.max(p.bottom,c),d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),c}var t=e.display,n=e.doc,r=e.doc.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=st(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=ni(n,r.from.line),l=f,c,h=[r.from.line,r.from.ch],p;while(c=Er(l)){var d=c.find();h.push(d.from.ch,d.to.line,d.to.ch);if(d.to.line==r.to.line){h.push(r.to.ch),p=!0;break}l=ni(n,d.to.line)}if(p)for(var v=0;v<h.length;v+=3)a(h[v],h[v+1],h[v+2]);else{var m,g,y=ni(n,r.to.line);r.from.ch?m=a(r.from.line,r.from.ch,null,!1):m=ai(e,f)-t.viewOffset,r.to.ch?g=a(r.to.line,wr(y)?null:0,r.to.ch,!0):g=ai(e,y)-t.viewOffset,m<g&&u(o,m,null,g)}}es(t.selectionDiv,i),t.selectionDiv.style.display=""}function Y(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate)}function Z(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,$i(et,e))}function et(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.showingTo)return;var n=+(new Date)+e.options.workTime,r=Yn(t.mode,nt(e,t.frontier)),i=[],s;t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(o){if(t.frontier>=e.display.showingFrom){var u=o.styles;o.styles=Hr(e,o,r);var a=!u||u.length!=o.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=o.styles[f];a&&(s&&s.end==t.frontier?s.end++:i.push(s={start:t.frontier,end:t.frontier+1})),o.stateAfter=Yn(t.mode,r)}else jr(e,o,r),o.stateAfter=t.frontier%5==0?Yn(t.mode,r):null;++t.frontier;if(+(new Date)>n)return Z(e,e.options.workDelay),!0}),i.length&&Nt(e,function(){for(var e=0;e<i.length;++e)Lt(this,i[e].start,i[e].end)})()}function tt(e,t){var n,r,i=e.doc;for(var s=t,o=t-100;s>o;--s){if(s<=i.first)return i.first;var u=ni(i,s-1);if(u.stateAfter)return s;var a=Fi(u.text,null,e.options.tabSize);if(r==null||n>a)r=s-1,n=a}return r}function nt(e,t){var n=e.doc,r=e.display;if(!n.mode.startState)return!0;var i=tt(e,t),s=i>n.first&&ni(n,i-1).stateAfter;return s?s=Yn(n.mode,s):s=Zn(n.mode),n.iter(i,t,function(o){jr(e,o,s);var u=i==t-1||i%5==0||i>=r.showingFrom&&i<r.showingTo;o.stateAfter=u?Yn(n.mode,s):null,++i}),s}function rt(e){return e.lineSpace.offsetTop}function it(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function st(e){var t=es(e.measure,Yi("pre",null,null,"text-align: left")).appendChild(Yi("span","x"));return t.offsetLeft}function ot(e,t,n,r){var i=-1;r=r||at(e,t);for(var s=n;;s+=i){var o=r[s];if(o)break;i<0&&s==0&&(i=1)}return{left:s<n?o.right:o.left,right:s>n?o.left:o.right,top:o.top,bottom:o.bottom}}function ut(e,t){var n=e.display.measureLineCache;for(var r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return i.measure}}function at(e,t){var n=ut(e,t);if(!n){n=ft(e,t);var r=e.display.measureLineCache,i={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:n,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};r.length==16?r[++e.display.measureLineCachePos%16]=i:r.push(i)}return n}function ft(e,i){var s=e.display,o=Vi(i.text.length),u=qr(e,i,o);if(t&&!n&&!e.options.lineWrapping&&u.childNodes.length>100){var a=document.createDocumentFragment(),f=10,l=u.childNodes.length;for(var c=0,h=Math.ceil(l/f);c<h;++c){var p=Yi("div",null,null,"display: inline-block");for(var d=0;d<f&&l;++d)p.appendChild(u.firstChild),--l;a.appendChild(p)}u.appendChild(a)}es(s.measure,u);var v=ns(s.lineDiv),m=[],g=Vi(i.text.length),y=u.offsetHeight;r&&s.measure.first!=u&&es(s.measure,u);for(var c=0,b;c<o.length;++c)if(b=o[c]){var w=ns(b),E=Math.max(0,w.top-v.top),S=Math.min(w.bottom-v.top,y);for(var d=0;d<m.length;d+=2){var x=m[d],T=m[d+1];if(x>S||T<E)continue;if(x<=E&&T>=S||E<=x&&S>=T||Math.min(S,T)-Math.max(E,x)>=S-E>>1){m[d]=Math.min(E,x),m[d+1]=Math.max(S,T);break}}d==m.length&&m.push(E,S);var N=w.right;b.measureRight&&(N=ns(b.measureRight).left),g[c]={left:w.left-v.left,right:N-v.left,top:d}}for(var c=0,b;c<g.length;++c)if(b=g[c]){var C=b.top;b.top=m[C],b.bottom=m[C+1]}return g}function lt(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];i.collapsed&&(i.to==null||i.to==t.text.length)&&(n=!0)}var s=!n&&ut(e,t);if(s)return ot(e,t,t.text.length,s).right;var o=qr(e,t),u=o.appendChild(as(e.display.measure));return es(e.display.measure,o),ns(u).right-ns(e.display.lineDiv).left}function ct(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ht(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=Ar(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=ai(e,t);r!="local"&&(o-=e.display.viewOffset);if(r=="page"){var u=ns(e.display.lineSpace);o+=u.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=u.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function pt(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;n=="page"&&(r-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,i-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var s=ns(e.display.lineSpace);r-=s.left,i-=s.top;if(n=="local"||!n){var o=ns(e.display.wrapper);r+=o.left,i+=o.top}return{left:r,top:i}}function dt(e,t,n,r){return r||(r=ni(e.doc,t.line)),ht(e,r,ot(e,r,t.ch),n)}function vt(e,t,n,r,i){function s(t,s){var o=ot(e,r,t,i);return s?o.left=o.right:o.right=o.left,ht(e,r,o,n)}r=r||ni(e.doc,t.line),i||(i=at(e,r));var o=fi(r),u=t.ch;if(!o)return s(u);var a,f,l=o[0].level;for(var c=0;c<o.length;++c){var h=o[c],p=h.level%2,d,v;if(h.from<u&&h.to>u)return s(u,p);var m=p?h.to:h.from,g=p?h.from:h.to;if(m==u)c&&h.level<(d=o[c-1]).level?v=s(d.level%2?d.from:d.to-1,!0):v=s(p&&h.from!=h.to?u-1:u),p==l?a=v:f=v;else if(g==u){var d=c<o.length-1&&o[c+1];if(!p&&d&&d.from==d.to)continue;d&&h.level<d.level?v=s(d.level%2?d.to-1:d.from):v=s(p?u:u-1,!0),p==l?a=v:f=v}}return l&&!u&&(f=s(o[0].to-1)),a?(f&&(a.other=f),a):f}function mt(e,t,n){var r=new bn(e,t);return n&&(r.outside=!0),r}function gt(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return mt(r.first,0,!0);var i=ui(r,n),s=r.first+r.size-1;if(i>s)return mt(r.first+r.size-1,ni(r,s).text.length,!0);t<0&&(t=0);for(;;){var o=ni(r,i),u=yt(e,o,i,t,n),a=Er(o),f=a&&a.find();if(!(a&&u.ch>=f.from.ch))return u;i=f.to.line}}function yt(e,t,n,r,i){function f(r){var i=vt(e,bn(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-ai(e,t),o=!1,u=2*e.display.wrapper.clientWidth,a=at(e,t),l=fi(t),c=t.text.length,h=ms(t),p=gs(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return mt(n,p,g);for(;;){if(l?p==h||p==ws(t,h,1):p-h<=1){var y=r-d<m-r,b=y?h:p;while(Gi.test(t.text.charAt(b)))++b;var w=mt(n,b,y?v:g);return w.after=y,w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=ws(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c-=E}else h=S,d=T,v=o,c=E}}function wt(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(bt==null){bt=Yi("pre");for(var t=0;t<49;++t)bt.appendChild(document.createTextNode("x")),bt.appendChild(Yi("br"));bt.appendChild(document.createTextNode("x"))}es(e.measure,bt);var n=bt.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Zi(e.measure),n||1}function Et(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Yi("span","x"),n=Yi("pre",[t]);es(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function xt(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++St},Mi++||(Oi=[])}function Tt(e){var t=e.curOp,n=e.doc,r=e.display;e.curOp=null,t.updateMaxLine&&D(e);if(r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=lt(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+Hi)+"px",r.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&!t.updateScrollPos&&Xt(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.updateScrollPos)o=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var a=vt(e,n.sel.head);o=Hn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||o&&o.scrollTop!=null)u=R(e,t.changes,o&&o.scrollTop),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop);!u&&t.selectionChanged&&K(e),t.updateScrollPos?(r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o.scrollTop,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o.scrollLeft,j(e),t.scrollToPos&&Dn(e,Tn(e.doc,t.scrollToPos),t.scrollToPosMargin)):o&&_n(e),t.selectionChanged&&Y(e),e.state.focused&&t.updateInput&&_t(e,t.userSelChange);var f=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(f)for(var c=0;c<f.length;++c)f[c].lines.length||Ai(f[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&Ai(l[c],"unhide");var h;--Mi||(h=Oi,Oi=null),t.textChanged&&Ai(e,"change",e,t.textChanged),t.cursorActivity&&Ai(e,"cursorActivity",e);if(h)for(var c=0;c<h.length;++c)h[c]()}function Nt(e,t){return function(){var n=e||this,r=!n.curOp;r&&xt(n);try{var i=t.apply(n,arguments)}finally{r&&Tt(n)}return i}}function Ct(e){return function(){var t=this.cm&&!this.cm.curOp,n;t&&xt(this.cm);try{n=e.apply(this,arguments)}finally{t&&Tt(this.cm)}return n}}function kt(e,t){var n=!e.curOp,r;n&&xt(e);try{r=t()}finally{n&&Tt(e)}return r}function Lt(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function At(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){Mt(e),e.state.focused&&At(e)})}function Ot(e){function n(){var r=Mt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,At(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function Mt(e){var n=e.display.input,r=e.display.prevInput,i=e.doc,s=i.sel;if(!e.state.focused||ls(n)||Pt(e))return!1;var o=n.value;if(o==r&&wn(s.from,s.to))return!1;if(t&&o&&n.selectionStart===0)return _t(e,!0),!1;var u=!e.curOp;u&&xt(e),s.shift=!1;var a=0,f=Math.min(r.length,o.length);while(a<f&&r[a]==o[a])++a;var l=s.from,c=s.to;a<r.length?l=bn(l.line,l.ch-(r.length-a)):e.state.overwrite&&wn(l,c)&&!e.state.pasteIncoming&&(c=bn(c.line,Math.min(ni(i,c.line).text.length,c.ch+(o.length-a))));var h=e.curOp.updateInput;return hn(e.doc,{from:l,to:c,text:fs(o.slice(a)),origin:e.state.pasteIncoming?"paste":"+input"},"end"),e.curOp.updateInput=h,o.length>1e3||o.indexOf("\n")>-1?n.value=e.display.prevInput="":e.display.prevInput=o,u&&Tt(e),e.state.pasteIncoming=!1,!0}function _t(e,t){var n,r,i=e.doc;wn(i.sel.from,i.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",n=cs&&(i.sel.to.line-i.sel.from.line>100||(r=e.getSelection()).length>1e3),n?e.display.input.value="-":e.display.input.value=r||e.getSelection(),e.state.focused&&Ui(e.display.input)),e.display.inaccurateSelection=n}function Dt(e){e.options.readOnly!="nocursor"&&(!d||document.activeElement!=e.display.input)&&e.display.input.focus()}function Pt(e){return e.options.readOnly||e.doc.cantEdit}function Ht(e){function n(){e.state.focused&&setTimeout($i(Dt,e),0)}function r(){t.cachedCharWidth=t.cachedTextHeight=null,ct(e),kt(e,$i(Lt,e))}function i(){for(var e=t.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(i,5e3):Li(window,"resize",r)}function s(t){if(e.options.onDragEvent&&e.options.onDragEvent(e,Ei(t)))return;Ti(t)}function o(){t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,t.input.value=e.getSelection(),Ui(t.input))}var t=e.display;ki(t.scroller,"mousedown",Nt(e,qt)),ki(t.scroller,"dblclick",Nt(e,Si)),ki(t.lineSpace,"selectstart",function(e){Bt(t,e)||Si(e)}),b||ki(t.scroller,"contextmenu",function(t){un(e,t)}),ki(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Wt(e,t.scroller.scrollTop),Xt(e,t.scroller.scrollLeft,!0),Ai(e,"scroll",e))}),ki(t.scrollbarV,"scroll",function(){t.scroller.clientHeight&&Wt(e,t.scrollbarV.scrollTop)}),ki(t.scrollbarH,"scroll",function(){t.scroller.clientHeight&&Xt(e,t.scrollbarH.scrollLeft)}),ki(t.scroller,"mousewheel",function(t){Jt(e,t)}),ki(t.scroller,"DOMMouseScroll",function(t){Jt(e,t)}),ki(t.scrollbarH,"mousedown",n),ki(t.scrollbarV,"mousedown",n),ki(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),ki(window,"resize",r),setTimeout(i,5e3),ki(t.input,"keyup",Nt(e,function(t){if(e.options.onKeyEvent&&e.options.onKeyEvent(e,Ei(t)))return;t.keyCode==16&&(e.doc.sel.shift=!1)})),ki(t.input,"input",$i(Ot,e)),ki(t.input,"keydown",Nt(e,tn)),ki(t.input,"keypress",Nt(e,nn)),ki(t.input,"focus",$i(rn,e)),ki(t.input,"blur",$i(sn,e)),e.options.dragDrop&&(ki(t.scroller,"dragstart",function(t){zt(e,t)}),ki(t.scroller,"dragenter",s),ki(t.scroller,"dragover",s),ki(t.scroller,"drop",Nt(e,Rt))),ki(t.scroller,"paste",function(n){if(Bt(t,n))return;Dt(e),Ot(e)}),ki(t.input,"paste",function(){e.state.pasteIncoming=!0,Ot(e)}),ki(t.input,"cut",o),ki(t.input,"copy",o),f&&ki(t.sizer,"mouseup",function(){document.activeElement==t.input&&t.input.blur(),Dt(e)})}function Bt(e,t){for(var n=Ni(t);n!=e.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==e.sizer&&n!=e.mover)return!0}}function jt(e,t,n){var r=e.display;if(!n){var i=Ni(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller)return null}var s,o,u=ns(r.lineSpace);try{s=t.clientX,o=t.clientY}catch(t){return null}return gt(e,s-u.left,o-u.top)}function qt(e){function v(e){if(f=="single"){kn(n.doc,Tn(s,u),e);return}p=Tn(s,p),d=Tn(s,d);if(f=="double"){var t=Un(ni(s,e.line).text,e);En(e,p)?kn(n.doc,t.from,d):kn(n.doc,p,t.to)}else f=="triple"&&(En(e,p)?kn(n.doc,d,Tn(s,bn(e.line,0))):kn(n.doc,p,Tn(s,bn(e.line+1,0))))}function y(e){var t=++g,i=jt(n,e,!0);if(!i)return;if(!wn(i,c)){n.state.focused||rn(n),c=i,v(i);var o=B(r,s);(i.line>=o.to||i.line<o.from)&&setTimeout(Nt(n,function(){g==t&&y(e)}),150)}else{var u=e.clientY<m.top?-20:e.clientY>m.bottom?20:0;u&&setTimeout(Nt(n,function(){if(g!=t)return;r.scroller.scrollTop+=u,y(e)}),50)}}function w(e){g=Infinity;var t=jt(n,e);t&&v(t),Si(e),Dt(n),Li(document,"mousemove",E),Li(document,"mouseup",S)}var n=this,r=n.display,s=n.doc,o=s.sel;o.shift=e.shiftKey;if(Bt(r,e)){i||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(Ut(n,e))return;var u=jt(n,e);switch(Ci(e)){case 3:b&&un.call(n,n,e);return;case 2:u&&kn(n.doc,u),setTimeout($i(Dt,n),20),Si(e);return}if(!u){Ni(e)==r.scroller&&Si(e);return}n.state.focused||rn(n);var a=+(new Date),f="single";if(It&&It.time>a-400&&wn(It.pos,u))f="triple",Si(e),setTimeout($i(Dt,n),20),zn(n,u.line);else if(Ft&&Ft.time>a-400&&wn(Ft.pos,u)){f="double",It={time:a,pos:u},Si(e);var l=Un(ni(s,u.line).text,u);kn(n.doc,l.from,l.to)}else Ft={time:a,pos:u};var c=u;if(n.options.dragDrop&&rs&&!Pt(n)&&!wn(o.from,o.to)&&!En(u,o.from)&&!En(o.to,u)&&f=="single"){var h=Nt(n,function(t){i&&(r.scroller.draggable=!1),n.state.draggingText=!1,Li(document,"mouseup",h),Li(r.scroller,"drop",h),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Si(t),kn(n.doc,u),Dt(n))});i&&(r.scroller.draggable=!0),n.state.draggingText=h,r.scroller.dragDrop&&r.scroller.dragDrop(),ki(document,"mouseup",h),ki(r.scroller,"drop",h);return}Si(e),f=="single"&&kn(n.doc,Tn(s,u));var p=o.from,d=o.to,m=ns(r.wrapper),g=0,E=Nt(n,function(e){!t&&!Ci(e)?w(e):y(e)}),S=Nt(n,w);ki(document,"mousemove",E),ki(document,"mouseup",S)}function Rt(e){var t=this;if(Bt(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,Ei(e)))return;Si(e);var n=jt(t,e,!0),r=e.dataTransfer.files;if(!n||Pt(t))return;if(r&&r.length&&window.FileReader&&window.File){var i=r.length,s=Array(i),o=0,u=function(e,r){var u=new FileReader;u.onload=function(){s[r]=u.result,++o==i&&(n=Tn(t.doc,n),hn(t.doc,{from:n,to:n,text:fs(s.join("\n")),origin:"paste"},"around"))},u.readAsText(e)};for(var a=0;a<i;++a)u(r[a],a)}else{if(t.state.draggingText&&!En(n,t.doc.sel.from)&&!En(t.doc.sel.to,n)){t.state.draggingText(e),setTimeout($i(Dt,t),20);return}try{var s=e.dataTransfer.getData("Text");if(s){var f=t.doc.sel.from,l=t.doc.sel.to;An(t.doc,n,n),t.state.draggingText&&yn(t.doc,"",f,l,"paste"),t.replaceSelection(s,null,"paste"),Dt(t),rn(t)}}catch(e){}}}function Ut(e,t){var n=e.display;try{var r=t.clientX,i=t.clientY}catch(t){return!1}if(r>=Math.floor(ns(n.gutters).right))return!1;Si(t);if(!Pi(e,"gutterClick"))return!0;var s=ns(n.lineDiv);if(i>s.bottom)return!0;i-=s.top-n.viewOffset;for(var o=0;o<e.options.gutters.length;++o){var u=n.gutters.childNodes[o];if(u&&ns(u).right>=r){var a=ui(e.doc,i),f=e.options.gutters[o];_i(e,"gutterClick",e,a,f,t);break}}return!0}function zt(e,t){if(Bt(e.display,t))return;var n=e.getSelection();t.dataTransfer.setData("Text",n);if(t.dataTransfer.setDragImage){var r=Yi("img",null,null,"position: fixed; left: 0; top: 0;");u&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),a&&(e.display.dragImg?r=e.display.dragImg:(e.display.dragImg=r,r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.display.wrapper.appendChild(r))),t.dataTransfer.setDragImage(r,0,0),u&&r.parentNode.removeChild(r)}}function Wt(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||R(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&R(t,[])}function Xt(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,j(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function Jt(t,n){var r=n.wheelDeltaX,s=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),s==null&&n.detail&&n.axis==n.VERTICAL_AXIS?s=n.detail:s==null&&(s=n.wheelDelta);var o=t.display,a=o.scroller;if(!(r&&a.scrollWidth>a.clientWidth||s&&a.scrollHeight>a.clientHeight))return;if(s&&v&&i)for(var f=n.target;f!=a;f=f.parentNode)if(f.lineObj){t.display.currentWheelTarget=f;break}if(r&&!e&&!u&&$t!=null){s&&Wt(t,Math.max(0,Math.min(a.scrollTop+s*$t,a.scrollHeight-a.clientHeight))),Xt(t,Math.max(0,Math.min(a.scrollLeft+r*$t,a.scrollWidth-a.clientWidth))),Si(n),o.wheelStartX=null;return}if(s&&$t!=null){var l=s*$t,c=t.doc.scrollTop,h=c+o.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.doc.height,h+l+50),R(t,[],{top:c,bottom:h})}Vt<20&&(o.wheelStartX==null?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=s,setTimeout(function(){if(o.wheelStartX==null)return;var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;$t=($t*Vt+n)/(Vt+1),++Vt},200)):(o.wheelDX+=r,o.wheelDY+=s))}function Kt(e,t,n){if(typeof t=="string"){t=er[t];if(!t)return!1}e.display.pollingFast&&Mt(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,s=!1;try{Pt(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),s=t(e)!=Bi}finally{r.sel.shift=i,e.state.suppressEdits=!1}return s}function Qt(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Yt(e,t){var n=nr(e.options.keyMap),i=n.auto;clearTimeout(Gt),i&&!ir(t)&&(Gt=setTimeout(function(){nr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var s=sr(t,!0),o=!1;if(!s)return!1;var u=Qt(e);return t.shiftKey?o=rr("Shift-"+s,u,function(t){return Kt(e,t,!0)})||rr(s,u,function(t){if(typeof t=="string"&&/^go[A-Z]/.test(t))return Kt(e,t)}):o=rr(s,u,function(t){return Kt(e,t)}),o=="stop"&&(o=!1),o&&(Si(t),Y(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),o}function Zt(e,t,n){var r=rr("'"+n+"'",Qt(e),function(t){return Kt(e,t,!0)});return r&&(Si(t),Y(e)),r}function tn(e){var n=this;n.state.focused||rn(n),t&&e.keyCode==27&&(e.returnValue=!1);if(n.options.onKeyEvent&&n.options.onKeyEvent(n,Ei(e)))return;var r=e.keyCode;n.doc.sel.shift=r==16||e.shiftKey;var i=Yt(n,e);u&&(en=i?r:null,!i&&r==88&&!cs&&(v?e.metaKey:e.ctrlKey)&&n.replaceSelection(""))}function nn(e){var t=this;if(t.options.onKeyEvent&&t.options.onKeyEvent(t,Ei(e)))return;var n=e.keyCode,r=e.charCode;if(u&&n==en){en=null,Si(e);return}if((u&&(!e.which||e.which<10)||f)&&Yt(t,e))return;var i=String.fromCharCode(r==null?n:r);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Pt(this)&&this.doc.mode.electricChars.indexOf(i)>-1&&setTimeout(Nt(t,function(){Fn(t,t.doc.sel.to.line,"smart")}),75);if(Zt(t,e,i))return;Ot(t)}function rn(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(Ai(e,"focus",e),e.state.focused=!0,e.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.wrapper.className+=" CodeMirror-focused"),_t(e,!0)),At(e),Y(e)}function sn(e){e.state.focused&&(Ai(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function un(e,n){function l(){i.inputDiv.style.position="relative",i.input.style.cssText=f,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),At(e);if(i.input.selectionStart!=null&&(!t||r)){clearTimeout(on);var n=i.input.value=" "+(wn(s.from,s.to)?"":i.input.value),o=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=n.length;var u=function(){i.prevInput==" "&&i.input.selectionStart==0?Nt(e,er.selectAll)(e):o++<10?on=setTimeout(u,500):_t(e)};on=setTimeout(u,200)}}var i=e.display,s=e.doc.sel;if(Bt(i,n))return;var o=jt(e,n),a=i.scroller.scrollTop;if(!o||u)return;(wn(s.from,s.to)||En(o,s.from)||!En(o,s.to))&&Nt(e,An)(e.doc,o,o);var f=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",Dt(e),_t(e,!0),wn(s.from,s.to)&&(i.input.value=i.prevInput=" ");if(b){Ti(n);var c=function(){Li(window,"mouseup",c),setTimeout(l,20)};ki(window,"mouseup",c)}else setTimeout(l,50)}function an(e){return e.text?bn(e.from.line+e.text.length-1,Ri(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function fn(e,t,n){if(!En(t.from,n))return Tn(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,s=e.first+e.size-1;return i>s?bn(s,ni(e,s).text.length):Nn(n,ni(e,i).text.length)}if(n.line==t.to.line+r)return Nn(n,Ri(t.text).length+(t.text.length==1?t.from.ch:0)+ni(e,t.to.line).text.length-t.to.ch);var o=n.line-t.from.line;return Nn(n,t.text[o].length+(o?0:t.from.ch))}function ln(e,t,n){if(n&&typeof n=="object"
)return{anchor:fn(e,t,n.anchor),head:fn(e,t,n.head)};if(n=="start")return{anchor:t.from,head:t.from};var r=an(t);if(n=="around")return{anchor:t.from,head:r};if(n=="end")return{anchor:r,head:r};var i=function(e){if(En(e,t.from))return e;if(!En(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),bn(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function cn(e,t){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,update:function(t,n,r,i){t&&(this.from=Tn(e,t)),n&&(this.to=Tn(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)},cancel:function(){this.canceled=!0}};return Ai(e,"beforeChange",e,n),e.cm&&Ai(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function hn(e,t,n,r){if(e.cm){if(!e.cm.curOp)return Nt(e.cm,hn)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(Pi(e,"beforeChange")||e.cm&&Pi(e.cm,"beforeChange")){t=cn(e,t);if(!t)return}var i=w&&!r&&yr(e,t.from,t.to);if(i){for(var s=i.length-1;s>=1;--s)pn(e,{from:i[s].from,to:i[s].to,text:[""]});i.length&&pn(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else pn(e,t,n)}function pn(e,t,n){var r=ln(e,t,n);pi(e,t,r,e.cm?e.cm.curOp.id:NaN),mn(e,t,r,mr(e,t));var i=[];ei(e,function(e,n){!n&&zi(i,e.history)==-1&&(bi(e.history,t),i.push(e.history)),mn(e,t,null,mr(e,t))})}function dn(e,t){if(e.cm&&e.cm.state.suppressEdits)return;var n=e.history,r=(t=="undo"?n.done:n.undone).pop();if(!r)return;n.dirtyCounter+=t=="undo"?-1:1;var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore};(t=="undo"?n.undone:n.done).push(i);for(var s=r.changes.length-1;s>=0;--s){var o=r.changes[s];o.origin=t,i.changes.push(hi(e,o));var u=s?ln(e,o,null):{anchor:r.anchorBefore,head:r.headBefore};mn(e,o,u,gr(e,o));var a=[];ei(e,function(e,t){!t&&zi(a,e.history)==-1&&(bi(e.history,o),a.push(e.history)),mn(e,o,null,gr(e,o))})}}function vn(e,t){function n(e){return bn(e.line+t,e.ch)}e.first+=t,e.cm&&Lt(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function mn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Nt(e.cm,mn)(e,t,n,r);if(t.to.line<e.first){vn(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);vn(e,i),t={from:bn(e.first,0),to:bn(t.to.line+i,t.to.ch),text:[Ri(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:bn(s,ni(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ri(e,t.from,t.to),n||(n=ln(e,t,null)),e.cm?gn(e.cm,t,r,n):$r(e,t,r,n)}function gn(e,t,n,r){var i=e.doc,s=e.display,o=t.from,u=t.to,a=!1,f=o.line;e.options.lineWrapping||(f=oi(Sr(i,ni(i,o.line))),i.iter(f,u.line+1,function(e){if(e==s.maxLine)return a=!0,!0})),!En(i.sel.head,t.from)&&!En(t.to,i.sel.head)&&(e.curOp.cursorActivity=!0),$r(i,t,n,r,C(e)),e.options.lineWrapping||(i.iter(f,o.line+t.text.length,function(e){var t=_(i,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),Z(e,400);var l=t.text.length-(u.line-o.line)-1;Lt(e,o.line,u.line+1,l);if(Pi(e,"change")){var c={from:o,to:u,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var h=e.curOp.textChanged;h.next;h=h.next);h.next=c}else e.curOp.textChanged=c}}function yn(e,t,n,r,i){r||(r=n);if(En(r,n)){var s=r;r=n,n=s}typeof t=="string"&&(t=fs(t)),hn(e,{from:n,to:r,text:t,origin:i},null)}function bn(e,t){if(!(this instanceof bn))return new bn(e,t);this.line=e,this.ch=t}function wn(e,t){return e.line==t.line&&e.ch==t.ch}function En(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Sn(e){return bn(e.line,e.ch)}function xn(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Tn(e,t){if(t.line<e.first)return bn(e.first,0);var n=e.first+e.size-1;return t.line>n?bn(n,ni(e,n).text.length):Nn(t,ni(e,t.line).text.length)}function Nn(e,t){var n=e.ch;return n==null||n>t?bn(e.line,t):n<0?bn(e.line,0):e}function Cn(e,t){return t>=e.first&&t<e.first+e.size}function kn(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var s=En(t,i);s!=En(n,i)?(i=t,t=n):s!=En(t,n)&&(t=n)}An(e,i,t,r)}else An(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function Ln(e,t,n){var r={anchor:t,head:n};return Ai(e,"beforeSelectionChange",e,r),e.cm&&Ai(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Tn(e,r.anchor),r.head=Tn(e,r.head),r}function An(e,t,n,r,i){if(!i&&Pi(e,"beforeSelectionChange")||e.cm&&Pi(e.cm,"beforeSelectionChange")){var s=Ln(e,t,n);n=s.head,t=s.anchor}var o=e.sel;o.goalColumn=null;if(i||!wn(t,o.anchor))t=Mn(e,t,r,i!="push");if(i||!wn(n,o.head))n=Mn(e,n,r,i!="push");if(wn(o.anchor,t)&&wn(o.head,n))return;o.anchor=t,o.head=n;var u=En(n,t);o.from=u?n:t,o.to=u?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),_i(e,"cursorActivity",e)}function On(e){An(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function Mn(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=ni(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){Ai(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find()[o<0?"from":"to"];if(wn(c,s)){c.ch+=o,c.ch<0?c.line>e.first?c=Tn(e,bn(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=bn(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,bn(e.first,0)):Mn(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function _n(e){var t=Dn(e,e.doc.sel.head);if(!e.state.focused)return;var n=e.display,r=ns(n.sizer),i=null,s=rt(e.display);t.top+s+r.top<0?i=!0:t.bottom+s+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!h){var o=n.cursor.style.display=="none";o&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),o&&(n.cursor.style.display="none")}}function Dn(e,t,n){n==null&&(n=0);for(;;){var r=!1,i=vt(e,t),s=Hn(e,i.left,i.top-n,i.left,i.bottom+n),o=e.doc.scrollTop,u=e.doc.scrollLeft;s.scrollTop!=null&&(Wt(e,s.scrollTop),Math.abs(e.doc.scrollTop-o)>1&&(r=!0)),s.scrollLeft!=null&&(Xt(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(r=!0));if(!r)return i}}function Pn(e,t,n,r,i){var s=Hn(e,t,n,r,i);s.scrollTop!=null&&Wt(e,s.scrollTop),s.scrollLeft!=null&&Xt(e,s.scrollLeft)}function Hn(e,t,n,r,i){var s=e.display,o=rt(s);n+=o,i+=o,n<0&&(n=0);var u=s.scroller.clientHeight-Hi,a=s.scroller.scrollTop,f={},l=e.doc.height+it(s),c=n<o+10,h=i+o>l-10;if(n<a)f.scrollTop=c?0:n;else if(i>a+u){var p=Math.min(n,(h?l:i)-u);p!=a&&(f.scrollTop=p)}var d=s.scroller.clientWidth-Hi,v=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var m=s.gutters.offsetWidth,g=t<m+10;return t<v+m||g?(g&&(t=0),f.scrollLeft=Math.max(0,t-10-m)):r>d+v-3&&(f.scrollLeft=r+10-d),f}function Bn(e,t,n){e.curOp.updateScrollPos={scrollLeft:t==null?e.doc.scrollLeft:t,scrollTop:n==null?e.doc.scrollTop:n}}function jn(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function Fn(e,t,n,r){var i=e.doc;n||(n="add");if(n=="smart")if(!e.doc.mode.indent)n="prev";else var s=nt(e,t);var o=e.options.tabSize,u=ni(i,t),a=Fi(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.doc.mode.indent(s,u.text.slice(f.length),u.text);if(l==Bi){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=Fi(ni(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"&&(l=a-e.options.indentUnit),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=qi(l-h)),c!=f&&yn(e.doc,c,bn(t,0),bn(t,f.length),"+input"),u.stateAfter=null}function In(e,t,n){var r=t,i=t,s=e.doc;return typeof t=="number"?i=ni(s,xn(s,t)):r=oi(t),r==null?null:n(i,r)?(Lt(e,r,r+1),i):null}function qn(e,t,n,r,i){function f(){var t=s+n;return t<e.first||t>=e.first+e.size?a=!1:(s=t,u=ni(e,t))}function l(e){var t=(i?ws:Es)(u,o,n,!0);if(t==null){if(!!e||!f())return a=!1;i?o=(n<0?gs:ms)(u):o=n<0?u.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=ni(e,s),a=!0;if(r=="char")l();else if(r=="column")l(!0);else if(r=="word"||r=="group"){var c=null,h=r=="group";for(var p=!0;;p=!1){if(n<0&&!l(!p))break;var d=u.text.charAt(o)||"\n",v=Ki(d)?"w":h?/\s/.test(d)?null:"p":null;if(c&&c!=v){n<0&&(n=1,l());break}v&&(c=v);if(n>0&&!l(!p))break}}var m=Mn(e,bn(s,o),n,!0);return a||(m.hitSide=!0),m}function Rn(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*wt(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=gt(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function Un(e,t){var n=t.ch,r=t.ch;if(e){t.after===!1||r==e.length?--n:++r;var i=e.charAt(n),s=Ki(i)?Ki:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Ki(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:bn(t.line,n),to:bn(t.line,r)}}function zn(e,t){kn(e.doc,bn(t,0),Tn(e.doc,bn(t+1,0)))}function Vn(e,t,n,r){S.defaults[e]=t,n&&(Wn[e]=r?function(e,t,r){r!=$n&&n(e,t,r)}:n)}function Yn(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Zn(e,t,n){return e.startState?e.startState(t,n):!0}function nr(e){return typeof e=="string"?tr[e]:e}function rr(e,t,n){function r(t){t=nr(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0,u=s.length;o<u;++o){var a=r(s[o]);if(a)return a}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s}}function ir(e){var t=hs[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function sr(e,t){if(u&&e.keyCode==34&&e["char"])return!1;var n=hs[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(y?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(y?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n}function or(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function ur(e,t){this.lines=[],this.type=t,this.doc=e}function ar(e,t,n,r,i){if(r&&r.shared)return lr(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Nt(e.cm,ar)(e,t,n,r,i);var s=new ur(e,i);if(i=="range"&&!En(t,n))return s;r&&Xi(r,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=Yi("span",[s.replacedWith],"CodeMirror-widget")),s.collapsed&&(E=!0),s.addToHistory&&pi(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},NaN);var o=t.line,u=0,a,f,l=e.cm,c;e.iter(o,n.line+1,function(r){l&&s.collapsed&&!l.options.lineWrapping&&Sr(e,r)==l.display.maxLine&&(c=!0);var i={from:null,to:null,marker:s};u+=r.text.length,o==t.line&&(i.from=t.ch,u-=t.ch),o==n.line&&(i.to=n.ch,u-=r.text.length-n.ch),s.collapsed&&(o==n.line&&(f=br(r,n.ch)),o==t.line?a=br(r,t.ch):si(r,0)),pr(r,i),++o}),s.collapsed&&e.iter(t.line,n.line+1,function(t){xr(e,t)&&si(t,0)}),s.clearOnEnter&&ki(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(w=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory());if(s.collapsed){if(a!=f)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=u,s.atomic=!0}return l&&(c&&(l.curOp.updateMaxLine=!0),(s.className||s.startStyle||s.endStyle||s.collapsed)&&Lt(l,t.line,n.line+1),s.atomic&&On(l)),s}function fr(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,ki(e[n],"clear",function(){r.clear()})}function lr(e,t,n,r,i){r=Xi(r),r.shared=!1;var s=[ar(e,t,n,r,i)],o=s[0],u=r.replacedWith;return ei(e,function(e){u&&(r.replacedWith=u.cloneNode(!0)),s.push(ar(e,Tn(e,t),Tn(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=Ri(s)}),new fr(s,o)}function cr(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function hr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function pr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function dr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function vr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||o.type=="bookmark"&&s.from==t&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push({from:a?null:s.from-t,to:s.to==null?null:s.to-t,marker:o})}}return i}function mr(e,t){var n=Cn(e,t.from.line)&&ni(e,t.from.line).markedSpans,r=Cn(e,t.to.line)&&ni(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=wn(t.from,t.to),u=dr(n,i,o),a=vr(r,s,o),f=t.text.length==1,l=Ri(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=cr(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=cr(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push({from:null,to:null,marker:u[c].marker});for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function gr(e,t){var n=vi(e,t),r=mr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function yr(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||zi(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find();for(var a=0;a<i.length;++a){var f=i[a];if(En(f.to,u.from)||En(u.to,f.from))continue;var l=[a,1];(En(f.from,u.from)||!o.inclusiveLeft&&wn(f.from,u.from))&&l.push({from:f.from,to:u.from}),(En(u.to,f.to)||!o.inclusiveRight&&wn(f.to,u.to))&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function br(e,t){var n=E&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function wr(e){return br(e,-1)}function Er(e){return br(e,e.text.length+1)}function Sr(e,t){var n;while(n=wr(t))t=ni(e,n.find().from.line);return t}function xr(e,t){var n=E&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.from==0&&r.marker.inclusiveLeft&&Tr(e,t,r))return!0}}function Tr(e,t,n){if(n.to==null){var r=n.marker.find().to,i=ni(e,r.line);return Tr(e,i,cr(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o){s=t.markedSpans[o];if(s.marker.collapsed&&s.from==n.to&&(s.marker.inclusiveLeft||n.marker.inclusiveRight)&&Tr(e,t,s))return!0}}function Nr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Cr(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Lr(e){return function(){var t=!this.cm.curOp;t&&xt(this.cm);try{var n=e.apply(this,arguments)}finally{t&&Tt(this.cm)}return n}}function Ar(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&es(e.cm.display.measure,Yi("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Or(e,t,n,r){var i=new kr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),In(e,t,function(t){(t.widgets||(t.widgets=[])).push(i),i.line=t;if(!xr(e.doc,t)||i.showIfHidden){var n=ai(e,t)<e.display.scroller.scrollTop;si(t,t.height+Ar(i)),n&&jn(e,0,i.height)}return!0}),i}function Mr(e,t,n){var r={text:e};return Cr(r,t),r.height=n?n(r):1,r}function _r(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Nr(e),Cr(e,n);var i=r?r(e):1;i!=e.height&&si(e,i)}function Dr(e){e.parent=null,Nr(e)}function Pr(e,t,n,r,i){var s=n.flattenSpans;s==null&&(s=e.options.flattenSpans);var o="",u=null,a=new or(t,e.options.tabSize),f;t==""&&n.blankLine&&n.blankLine(r);while(!a.eol()){a.pos>e.options.maxHighlightLength?(s=!1,a.pos=Math.min(t.length,a.start+5e4),f=null):f=n.token(a,r);var l=a.current();a.start=a.pos,!s||u!=f?(o&&i(o,u),o=l,u=f):o+=l}o&&i(o,u)}function Hr(e,t,n){var r=[e.state.modeGen];Pr(e,t.text,e.doc.mode,n,function(e,t){r.push(e,t)});for(var i=0;i<e.state.overlays.length;++i){var s=e.state.overlays[i],o=1;Pr(e,t.text,s.mode,!0,function(e,t){var n=o,i=e.length;while(i){var u=r[o],a=u.length;a<=i?i-=a:(r.splice(o,1,u.slice(0,i),r[o+1],u.slice(i)),i=0),o+=2}if(!t)return;if(s.opaque)r.splice(n,o-n,e,t),o=n+2;else for(;n<o;n+=2){var u=r[n+1];r[n+1]=u?u+" "+t:t}})}return r}function Br(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen)t.styles=Hr(e,t,t.stateAfter=nt(e,oi(t)));return t.styles}function jr(e,t,n){var r=e.doc.mode,i=new or(t.text,e.options.tabSize);t.text==""&&r.blankLine&&r.blankLine(n);while(!i.eol()&&i.pos<=e.options.maxHighlightLength)r.token(i,n),i.start=i.pos}function Ir(e){return e?Fr[e]||(Fr[e]="cm-"+e.replace(/ +/g," cm-")):null}function qr(e,n,r){var s,o=n,u,a,f=!0;while(s=wr(o))f=!1,o=ni(e.doc,s.find().from.line),u||(u=o);var l={pre:Yi("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};o.textClass&&(l.pre.className=o.textClass);do{l.measure=o==n&&r,l.pos=0,l.addToken=l.measure?zr:Ur,(t||i)&&e.getOption("lineWrapping")&&(l.addToken=Wr(l.addToken)),r&&a&&o!=n&&!l.addedOne&&(r[0]=l.pre.appendChild(as(e.display.measure)),l.addedOne=!0);var c=Vr(o,l,Br(e,o));a=o==u,c&&(o=ni(e.doc,c.to.line),f=!1)}while(c);r&&!l.addedOne&&(r[0]=l.pre.appendChild(f?Yi("span"," "):as(e.display.measure))),!l.pre.firstChild&&!xr(e.doc,n)&&l.pre.appendChild(document.createTextNode(" "));var h;if(r&&t&&(h=fi(o))){var p=h.length-1;h[p].from==h[p].to&&--p;var d=h[p],v=h[p-1];if(d.from+1==d.to&&v&&d.level<v.level){var m=r[l.pos-1];m&&m.parentNode.insertBefore(m.measureRight=as(e.display.measure),m.nextSibling)}}return Ai(e,"renderLine",e,n,l.pre),l.pre}function Ur(e,t,n,r,i){if(!t)return;if(!Rr.test(t)){e.col+=t.length;var s=document.createTextNode(t)}else{var s=document.createDocumentFragment(),o=0;for(;;){Rr.lastIndex=o;var u=Rr.exec(t),a=u?u.index-o:t.length-o;a&&(s.appendChild(document.createTextNode(t.slice(o,o+a))),e.col+=a);if(!u)break;o+=a+1;if(u[0]=="	"){var f=e.cm.options.tabSize,l=f-e.col%f;s.appendChild(Yi("span",qi(l),"cm-tab")),e.col+=l}else{var c=Yi("span","•","cm-invalidchar");c.title="\\u"+u[0].charCodeAt(0).toString(16),s.appendChild(c),e.col+=1}}}if(n||r||i||e.measure){var h=n||"";return r&&(h+=r),i&&(h+=i),e.pre.appendChild(Yi("span",[s],h))}e.pre.appendChild(s)}function zr(e,n,r,i,s){var o=e.cm.options.lineWrapping;for(var u=0;u<n.length;++u){var a=n.charAt(u),f=u==0;a>=""&&a<""&&u<n.length-1?(a=n.slice(u,u+2),++u):u&&o&&is.test(n.slice(u-1,u+1))&&e.pre.appendChild(Yi("wbr"));var l=e.measure[e.pos]=Ur(e,a,r,f&&i,u==n.length-1&&s);t&&o&&a==" "&&u&&!/\s/.test(n.charAt(u-1))&&u<n.length-1&&!/\s/.test(n.charAt(u+1))&&(l.style.whiteSpace="normal"),e.pos+=a.length}n.length&&(e.addedOne=!0)}function Wr(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" ",t}return function(n,r,i,s,o){return e(n,r.replace(/ {3,}/,t),i,s,o)}}function Xr(e,t,n){n&&(e.display||(n=n.cloneNode(!0)),e.pre.appendChild(n),e.measure&&t&&(e.measure[e.pos]=n,e.addedOne=!0)),e.pos+=t}function Vr(e,t,n){var r=e.markedSpans;if(!r){for(var i=1;i<n.length;i+=2)t.addToken(t,n[i],Ir(n[i+1]));return}var s=e.text,o=s.length,u=0,i=1,a="",f,l=0,c,h,p,d;for(;;){if(l==u){c=h=p="",d=null,l=Infinity;var v=null;for(var m=0;m<r.length;++m){var g=r[m],y=g.marker;g.from<=u&&(g.to==null||g.to>u)?(g.to!=null&&l>g.to&&(l=g.to,h=""),y.className&&(c+=" "+y.className),y.startStyle&&g.from==u&&(p+=" "+y.startStyle),y.endStyle&&g.to==l&&(h+=" "+y.endStyle),y.collapsed&&(!d||d.marker.width<y.width)&&(d=g)):g.from>u&&l>g.from&&(l=g.from),y.type=="bookmark"&&g.from==u&&y.replacedWith&&(v=y.replacedWith)}if(d&&(d.from||0)==u){Xr(t,(d.to==null?o:d.to)-u,d.from!=null&&d.marker.replacedWith);if(d.to==null)return d.marker.find()}v&&!d&&Xr(t,0,v)}if(u>=o)break;var b=Math.min(o,l);for(;;){if(a){var w=u+a.length;if(!d){var E=w>b?a.slice(0,b-u):a;t.addToken(t,E,f?f+c:c,p,u+E.length==l?h:"")}if(w>=b){a=a.slice(b-u),u=b;break}u=w,p=""}a=n[i++],f=Ir(n[i++])}}}function $r(e,t,n,r,i){function s(e){return n?n[e]:null}function o(e,n,r){_r(e,n,r,i),_i(e,"change",e,t)}var u=t.from,a=t.to,f=t.text,l=ni(e,u.line),c=ni(e,a.line),h=Ri(f),p=s(f.length-1),d=a.line-u.line;if(u.ch==0&&a.ch==0&&h==""){for(var v=0,m=f.length-1,g=[];v<m;++v)g.push(Mr(f[v],s(v),i));o(c,c.text,p),d&&e.remove(u.line,d),g.length&&e.insert(u.line,g)}else if(l==c)if(f.length==1)o(l,l.text.slice(0,u.ch)+h+l.text.slice(a.ch),p);else{for(var g=[],v=1,m=f.length-1;v<m;++v)g.push(Mr(f[v],s(v),i));g.push(Mr(h+l.text.slice(a.ch),p,i)),o(l,l.text.slice(0,u.ch)+f[0],s(0)),e.insert(u.line+1,g)}else if(f.length==1)o(l,l.text.slice(0,u.ch)+f[0]+c.text.slice(a.ch),s(0)),e.remove(u.line+1,d);else{o(l,l.text.slice(0,u.ch)+f[0],s(0)),o(c,h+c.text.slice(a.ch),p);for(var v=1,m=f.length-1,g=[];v<m;++v)g.push(Mr(f[v],s(v),i));d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,g)}_i(e,"change",e,t),An(e,r.anchor,r.head,null,!0)}function Jr(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Kr(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function ei(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function ti(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,k(e),T(e),e.options.lineWrapping||D(e),e.options.mode=t.modeOption,Lt(e)}function ni(e,t){t-=e.first;while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function ri(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function ii(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function si(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function oi(e){if(e.parent==null)return null;var t=e.parent,n=zi(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function ui(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function ai(e,t){t=Sr(e.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function fi(e){var t=e.order;return t==null&&(t=e.order=Ss(e.text)),t}function li(){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function ci(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function hi(e,t){var n={from:t.from,to:an(t),text:ri(e,t.from,t.to)};return ci(e,n,t.from.line,t.to.line+1),ei(e,function(e){ci(e,n,t.from.line,t.to.line+1)},!0),n}function pi(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o=Ri(i.done);if(o&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&i.lastTime>s-600||t.origin.charAt(0)=="*"))){var u=Ri(o.changes);wn(t.from,t.to)&&wn(t.from,u.to)?u.to=an(t):o.changes.push(hi(e,t)),o.anchorAfter=n.anchor,o.headAfter=n.head}else{o={changes:[hi(e,t)],anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(o);while(i.done.length>i.undoDepth)i.done.shift();i.dirtyCounter<0?i.dirtyCounter=NaN:i.dirtyCounter++}i.lastTime=s,i.lastOp=r,i.lastOrigin=t.origin}function di(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function vi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(di(n[r]));return i}function mi(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],s=i.changes,o=[];r.push({changes:o,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var u=0;u<s.length;++u){var a=s[u],f;o.push({from:a.from,to:a.to,text:a.text});if(t)for(var l in a)(f=l.match(/^spans_(\d+)$/))&&zi(t,Number(f[1]))>-1&&(Ri(o)[l]=a[l],delete a[l])}}return r}function gi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yi(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;for(var u=0;u<s.changes.length;++u){var a=s.changes[u];s.copied||(a.from=Sn(a.from),a.to=Sn(a.to));if(n<a.from.line)a.from.line+=r,a.to.line+=r;else if(t<=a.to.line){o=!1;break}}s.copied||(s.anchorBefore=Sn(s.anchorBefore),s.headBefore=Sn(s.headBefore),s.anchorAfter=Sn(s.anchorAfter),s.readAfter=Sn(s.headAfter),s.copied=!0),o?(gi(s.anchorBefore),gi(s.headBefore),gi(s.anchorAfter),gi(s.headAfter)):(e.splice(0,i+1),i=0)}}function bi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yi(e.done,n,r,i),yi(e.undone,n,r,i)}function wi(){Ti(this)}function Ei(e){return e.stop||(e.stop=wi),e}function Si(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function xi(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ti(e){Si(e),xi(e)}function Ni(e){return e.target||e.srcElement}function Ci(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function ki(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Li(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function Ai(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function _i(e,t){function i(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);Oi||(++Mi,Oi=[],setTimeout(Di,0));for(var s=0;s<n.length;++s)Oi.push(i(n[s]))}function Di(){--Mi;var e=Oi;Oi=null;for(var t=0;t<e.length;++t)e[t]()}function Pi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function ji(){this.id=null}function Fi(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;s<t;++s)e.charAt(s)=="	"?o+=n-o%n:++o;return o}function qi(e){while(Ii.length<=e)Ii.push(Ri(Ii)+" ");return Ii[e]}function Ri(e){return e[e.length-1]}function Ui(e){p?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function zi(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function Wi(e,t){function n(){}n.prototype=e;var r=new n;return t&&Xi(t,r),r}function Xi(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Vi(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function $i(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ki(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ji.test(e))}function Qi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Yi(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")ts(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function Zi(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function es(e,t){return Zi(e).appendChild(t)}function ts(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function ns(e){return e.getBoundingClientRect()}function os(e){if(ss!=null)return ss;var t=Yi("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return es(e,t),t.offsetWidth&&(ss=t.offsetHeight-t.clientHeight),ss||0}function as(e){if(us==null){var t=Yi("span","​");es(e,Yi("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(us=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return us?Yi("span","​"):Yi("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ps(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=0;i<e.length;++i){var s=e[i];(s.from<n&&s.to>t||t==n&&s.to==t)&&r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr")}}function ds(e){return e.level%2?e.to:e.from}function vs(e){return e.level%2?e.from:e.to}function ms(e){var t=fi(e);return t?ds(t[0]):0}function gs(e){var t=fi(e);return t?vs(Ri(t)):e.text.length}function ys(e,t){var n=ni(e.doc,t),r=Sr(e.doc,n);r!=n&&(t=oi(r));var i=fi(r),s=i?i[0].level%2?gs(r):ms(r):0;return bn(t,s)}function bs(e,t){var n,r;while(n=Er(r=ni(e.doc,t)))t=n.find().to.line;var i=fi(r),s=i?i[0].level%2?ms(r):gs(r):r.text.length;return bn(t,s)}function ws(e,t,n,r){var i=fi(e);if(!i)return Es(e,t,n,r);var s=r?function(t,n){do t+=n;while(t>0&&Gi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},o=i[0].level;for(var u=0;u<i.length;++u){var a=i[u],f=a.level%2==o;if(a.from<t&&a.to>t||f&&(a.from==t||a.to==t))break}var l=s(t,a.level%2?-n:n);while(l!=null)if(a.level%2==o){if(!(l<a.from||l>a.to))break;a=i[u+=n],l=a&&(n>0==a.level%2?s(a.to,-1):s(a.from,1))}else if(l==ds(a))a=i[--u],l=a&&vs(a);else{if(l!=vs(a))break;a=i[++u],l=a&&ds(a)}return l<0||l>e.text.length?null:l}function Es(e,t,n,r){var i=t+n;if(r)while(i>0&&Gi.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/WebKit\//.test(navigator.userAgent),s=i&&/Qt\/\d+\.\d+/.test(navigator.userAgent),o=/Chrome\//.test(navigator.userAgent),u=/Opera\//.test(navigator.userAgent),a=/Apple Computer/.test(navigator.vendor),f=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/windows/i.test(navigator.platform),g=u&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1]));var y=v&&(s||u&&(g==null||g<12.11)),b=e||t&&!r,w=!1,E=!1,bt,St=0,Ft,It,Vt=0,$t=null;t?$t=-0.53:e?$t=15:o?$t=-0.7:a&&($t=-1/3);var Gt,en=null,on;S.Pos=bn,S.prototype={focus:function(){window.focus(),Dt(this),rn(this),Ot(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,Wn.hasOwnProperty(e)&&Nt(this,Wn[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if((typeof e=="string"?t[n].name:t[n])==
e)return t.splice(n,1),!0},addOverlay:Nt(null,function(e,t){var n=e.token?e:S.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Lt(this)}),removeOverlay:Nt(null,function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n)if(t[n].modeSpec==e){t.splice(n,1),this.state.modeGen++,Lt(this);return}}),indentLine:Nt(null,function(e,t,n){typeof t!="string"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Cn(this.doc,e)&&Fn(this,e,t,n)}),indentSelection:Nt(null,function(e){var t=this.doc.sel;if(wn(t.from,t.to))return Fn(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)Fn(this,r,e)}),getTokenAt:function(e){var t=this.doc;e=Tn(t,e);var n=nt(this,e.line),r=this.doc.mode,i=ni(t,e.line),s=new or(i.text,this.options.tabSize);while(s.pos<e.ch&&!s.eol()){s.start=s.pos;var o=r.token(s,n)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,type:o||null,state:n}},getStateAfter:function(e){var t=this.doc;return e=xn(t,e==null?t.first+t.size-1:e),nt(this,e+1)},cursorCoords:function(e,t){var n,r=this.doc.sel;return e==null?n=r.head:typeof e=="object"?n=Tn(this.doc,e):n=e?r.from:r.to,vt(this,n,t||"page")},charCoords:function(e,t){return dt(this,Tn(this.doc,e),t||"page")},coordsChar:function(e,t){return e=pt(this,e,t||"page"),gt(this,e.left,e.top)},defaultTextHeight:function(){return wt(this.display)},defaultCharWidth:function(){return Et(this.display)},setGutterMarker:Nt(null,function(e,t,n){return In(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Qi(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Nt(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Lt(t,r,r+1),Qi(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Nt(null,function(e,t,n){return In(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("\\b"+n+"\\b")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:Nt(null,function(e,t,n){return In(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.replace(new RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(s==i)return!1;e[r]=s||null}return!0})}),addLineWidget:Nt(null,function(e,t,n){return Or(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Cn(this.doc,e))return null;var t=e;e=ni(this.doc,e);if(!e)return null}else{var t=oi(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=vt(this,Tn(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+rt(s)+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Pn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Nt(null,tn),execCommand:function(e){return er[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=Tn(this.doc,e);s<t;++s){o=qn(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Nt(null,function(e,t){var n=this.doc.sel,r;n.shift||n.extend||wn(n.from,n.to)?r=qn(this.doc,n.head,e,t,this.options.rtlMoveVisually):r=e<0?n.from:n.to,kn(this.doc,r,r,e)}),deleteH:Nt(null,function(e,t){var n=this.doc.sel;wn(n.from,n.to)?yn(this.doc,"",n.from,qn(this.doc,n.head,e,t,!1),"+delete"):yn(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=Tn(this.doc,e);o<t;++o){var a=vt(this,u,"div");s==null?s=a.left:a.left=s,u=Rn(this,a,i,n);if(u.hitSide)break}return u},moveV:Nt(null,function(e,t){var n=this.doc.sel,r=vt(this,n.head,"div");n.goalColumn!=null&&(r.left=n.goalColumn);var i=Rn(this,r,e,t);t=="page"&&jn(this,0,dt(this,i,"div").top-r.top),kn(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:Nt(null,function(e,t){Bn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=Hi;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Nt(null,function(e,t){typeof e=="number"&&(e=bn(e,0)),t||(t=0);var n=e;if(!e||e.line!=null)this.curOp.scrollToPos=e?Tn(this.doc,e):this.doc.sel.head,this.curOp.scrollToPosMargin=t,n=vt(this,this.curOp.scrollToPos);var r=Hn(this,n.left,n.top-t,n.right,n.bottom+t);Bn(this,r.scrollLeft,r.scrollTop)}),setSize:function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.refresh()},on:function(e,t){ki(this,e,t)},off:function(e,t){Li(this,e,t)},operation:function(e){return kt(this,e)},refresh:Nt(null,function(){ct(this),Bn(this,this.doc.scrollLeft,this.doc.scrollTop),Lt(this)}),swapDoc:Nt(null,function(e){var t=this.doc;return t.cm=null,ti(this,e),ct(this),_t(this,!0),Bn(this,e.scrollLeft,e.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Wn=S.optionHandlers={},Xn=S.defaults={},$n=S.Init={toString:function(){return"CodeMirror.Init"}};Vn("value","",function(e,t){e.setValue(t)},!0),Vn("mode",null,function(e,t){e.doc.modeOption=t,T(e)},!0),Vn("indentUnit",2,T,!0),Vn("indentWithTabs",!1),Vn("smartIndent",!0),Vn("tabSize",4,function(e){T(e),ct(e),Lt(e)},!0),Vn("electricChars",!0),Vn("rtlMoveVisually",!m),Vn("theme","default",function(e){A(e),O(e)},!0),Vn("keyMap","default",L),Vn("extraKeys",null),Vn("onKeyEvent",null),Vn("onDragEvent",null),Vn("lineWrapping",!1,N,!0),Vn("gutters",[],function(e){P(e.options),O(e)},!0),Vn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?q(e.display)+"px":"0",e.refresh()},!0),Vn("lineNumbers",!1,function(e){P(e.options),O(e)},!0),Vn("firstLineNumber",1,O,!0),Vn("lineNumberFormatter",function(e){return e},O,!0),Vn("showCursorWhenSelecting",!1,K,!0),Vn("readOnly",!1,function(e,t){t=="nocursor"?(sn(e),e.display.input.blur()):t||_t(e,!0)}),Vn("dragDrop",!0),Vn("cursorBlinkRate",530),Vn("cursorHeight",1),Vn("workTime",100),Vn("workDelay",100),Vn("flattenSpans",!0),Vn("pollInterval",100),Vn("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),Vn("viewportMargin",10,function(e){e.refresh()},!0),Vn("maxHighlightLength",1e4,function(e){T(e),e.refresh()},!0),Vn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Vn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Vn("autofocus",null);var Jn=S.modes={},Kn=S.mimeModes={};S.defineMode=function(e,t){!S.defaults.mode&&e!="null"&&(S.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}Jn[e]=t},S.defineMIME=function(e,t){Kn[e]=t},S.resolveMode=function(e){if(typeof e=="string"&&Kn.hasOwnProperty(e))e=Kn[e];else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return S.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},S.getMode=function(e,t){t=S.resolveMode(t);var n=Jn[t.name];if(!n)return S.getMode(e,"text/plain");var r=n(e,t);if(Qn.hasOwnProperty(t.name)){var i=Qn[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},S.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),S.defineMIME("text/plain","null");var Qn=S.modeExtensions={};S.extendMode=function(e,t){var n=Qn.hasOwnProperty(e)?Qn[e]:Qn[e]={};Xi(t,n)},S.defineExtension=function(e,t){S.prototype[e]=t},S.defineOption=Vn;var Gn=[];S.defineInitHook=function(e){Gn.push(e)},S.copyState=Yn,S.startState=Zn,S.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}};var er=S.commands={selectAll:function(e){e.setSelection(bn(e.firstLine(),0),bn(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!wn(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,bn(t.line+1,0),"+delete"):e.replaceRange("",t,r?n:bn(t.line),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",bn(t,0),bn(t),"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(bn(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(bn(e.lastLine()))},goLineStart:function(e){e.extendSelection(ys(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=ys(e,t.line),r=e.getLineHandle(n.line),i=fi(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection(bn(n.line,o?0:s))}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(bs(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),bn(t.line,t.ch-1),bn(t.line,t.ch+1))},newlineAndIndent:function(e){Nt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},tr=S.keyMap={};tr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},tr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},tr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},tr["default"]=v?tr.macDefault:tr.pcDefault,tr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},S.lookupKey=rr,S.isModifierKey=ir,S.keyName=sr,S.fromTextArea=function(e,t){function i(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){ki(e.form,"submit",i);if(!t.leaveSubmitMethodAlone){var s=e.form,o=s.submit;try{var u=s.submit=function(){i(),s.submit=o,s.submit(),s.submit=u}}catch(r){}}}e.style.display="none";var a=S(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(Li(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},a},or.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Fi(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},S.StringStream=or,S.TextMarker=ur,ur.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&xt(e);var n=null,r=null;for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=cr(s.markedSpans,this);o.to!=null&&(r=oi(s)),s.markedSpans=hr(s.markedSpans,o),o.from!=null?n=oi(s):this.collapsed&&!xr(this.doc,s)&&e&&si(s,wt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var u=Sr(e.doc,this.lines[i]),a=_(e.doc,u);a>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=a,e.display.maxLineChanged=!0)}n!=null&&e&&Lt(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&On(e)),t&&Tt(e),_i(this,"clear")},ur.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=cr(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=oi(r);i.from!=null&&(e=bn(s,i.from)),i.to!=null&&(t=bn(s,i.to))}}return this.type=="bookmark"?e:e&&{from:e,to:t}},ur.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},ur.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||zi(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ur.prototype.detachLine=function(e){this.lines.splice(zi(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},S.SharedTextMarker=fr,fr.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();_i(this,"clear")},fr.prototype.find=function(){return this.primary.find()},fr.prototype.getOptions=function(e){var t=this.primary.getOptions(e);return t.shared=!0,t};var kr=S.LineWidget=function(e,t,n){for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};kr.prototype.clear=Lr(function(){var e=this.line.widgets,t=oi(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null),si(this.line,Math.max(0,this.line.height-Ar(this))),Lt(this.cm,t,t+1)}),kr.prototype.changed=Lr(function(){var e=this.height;this.height=null;var t=Ar(this)-e;if(!t)return;si(this.line,this.line.height+t);var n=oi(this.line);Lt(this.cm,n,n+1)});var Fr={},Rr=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;Jr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Dr(i),_i(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Kr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25){var u=[];this.collapse(u),this.children=[new Jr(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertInner(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new Jr(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Kr(t);if(!e.parent){var r=new Kr(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=zi(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}};var Qr=0,Gr=S.Doc=function(e,t,n){if(!(this instanceof Gr))return new Gr(e,t,n);n==null&&(n=0),Kr.call(this,[new Jr([Mr("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=li(),this.frontier=n;var r=bn(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++Qr,this.modeOption=t,typeof e=="string"&&(e=fs(e)),$r(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};Gr.prototype=Wi(Kr.prototype,{iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ii(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=bn(this.first,0),n=this.first+this.size-1;hn(this,{from:t,to:bn(n,ni(this,n).text.length),text:fs(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Tn(this,t),n=n?Tn(this,n):t,yn(this,e,t,n,r)},getRange:function(e,t,n){var r=ri(this,Tn(this,e),Tn(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Cn(this,e)&&yn(this,t,bn(e,0),Tn(this,bn(e)))},removeLine:function(e){e?yn(this,"",Tn(this,bn(e-1)),Tn(this,bn(e))):yn(this,"",bn(0,0),Tn(this,bn(1,0)))},getLineHandle:function(e){if(Cn(this,e))return ni(this,e)},getLineNumber:function(e){return oi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Tn(this,e)},getCursor:function(e){var t=this.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,Sn(n)},somethingSelected:function(){return!wn(this.sel.head,this.sel.anchor)},setCursor:Ct(function(e,t,n){var r=Tn(this,typeof e=="number"?bn(e,t||0):e);n?kn(this,r):An(this,r,r)}),setSelection:Ct(function(e,t){An(this,Tn(this,e),Tn(this,t||e))}),extendSelection:Ct(function(e,t){kn(this,Tn(this,e),t&&Tn(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){hn(this,{from:this.sel.from,to:this.sel.to,text:fs(e),origin:n},t||"around")},undo:Ct(function(){dn(this,"undo")}),redo:Ct(function(){dn(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=li()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return this.history.dirtyCounter==0},getHistory:function(){return{done:mi(this.history.done),undone:mi(this.history.undone)}},setHistory:function(e){var t=this.history=li();t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return ar(this,Tn(this,e),Tn(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft};return e=Tn(this,e),ar(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Tn(this,e);var t=[],n=ni(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),Tn(this,bn(n,t))},indexFromPos:function(e){e=Tn(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Gr(ii(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Gr(ii(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(e){e instanceof S&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this);break}if(e.history==this.history){var r=[e.id];ei(e,function(e){r.push(e.id)},!0),e.history=li(),e.history.done=mi(this.history.done,r),e.history.undone=mi(this.history.undone,r)}},iterLinkedDocs:function(e){ei(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Gr.prototype.eachLine=Gr.prototype.iter;var Yr="iter insert remove copy getEditor".split(" ");for(var Zr in Gr.prototype)Gr.prototype.hasOwnProperty(Zr)&&zi(Yr,Zr)<0&&(S.prototype[Zr]=function(e){return function(){return e.apply(this.doc,arguments)}}(Gr.prototype[Zr]));S.e_stop=Ti,S.e_preventDefault=Si,S.e_stopPropagation=xi;var Oi,Mi=0;S.on=ki,S.off=Li,S.signal=Ai;var Hi=30,Bi=S.Pass={toString:function(){return"CodeMirror.Pass"}};ji.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},S.countColumn=Fi;var Ii=[""],Ji=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Gi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;S.replaceGetRect=function(e){ns=e};var rs=function(){if(r)return!1;var e=Yi("div");return"draggable"in e||"dragDrop"in e}(),is=/^$/;e?is=/$'/:a&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?is=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:i&&(is=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var ss,us,fs="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};S.splitLines=fs;var ls=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},cs=function(){var e=Yi("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),hs={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};S.keyNames=hs,function(){for(var e=0;e<10;e++)hs[e+48]=String(e);for(var e=65;e<=90;e++)hs[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)hs[e+111]=hs[e+63235]="F"+e}();var Ss=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,f=[];for(var l=0,c;l<t;++l)f.push(c=n(e.charCodeAt(l)));for(var l=0,h=a;l<t;++l){var c=f[l];c=="m"?f[l]=h:h=c}for(var l=0,p=a;l<t;++l){var c=f[l];c=="1"&&p=="r"?f[l]="n":s.test(c)&&(p=c,c=="r"&&(f[l]="R"))}for(var l=1,h=f[0];l<t-1;++l){var c=f[l];c=="+"&&h=="1"&&f[l+1]=="1"?f[l]="1":c==","&&h==f[l+1]&&(h=="1"||h=="n")&&(f[l]=h),h=c}for(var l=0;l<t;++l){var c=f[l];if(c==",")f[l]="N";else if(c=="%"){for(var d=l+1;d<t&&f[d]=="%";++d);var v=l&&f[l-1]=="!"||d<t-1&&f[d]=="1"?"1":"N";for(var m=l;m<d;++m)f[m]=v;l=d-1}}for(var l=0,p=a;l<t;++l){var c=f[l];p=="L"&&c=="1"?f[l]="L":s.test(c)&&(p=c)}for(var l=0;l<t;++l)if(i.test(f[l])){for(var d=l+1;d<t&&i.test(f[d]);++d);var g=(l?f[l-1]:a)=="L",y=(d<t-1?f[d]:a)=="L",v=g||y?"L":"R";for(var m=l;m<d;++m)f[m]=v;l=d-1}var b=[],w;for(var l=0;l<t;)if(o.test(f[l])){var E=l;for(++l;l<t&&o.test(f[l]);++l);b.push({from:E,to:l,level:0})}else{var S=l,x=b.length;for(++l;l<t&&f[l]!="L";++l);for(var m=S;m<l;)if(u.test(f[m])){S<m&&b.splice(x,0,{from:S,to:m,level:1});var T=m;for(++m;m<l&&u.test(f[m]);++m);b.splice(x,0,{from:T,to:m,level:2}),S=m}else++m;S<l&&b.splice(x,0,{from:S,to:l,level:1})}return b[0].level==1&&(w=e.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),Ri(b).level==1&&(w=e.match(/\s+$/))&&(Ri(b).to-=w[0].length,b.push({from:t-w[0].length,to:t,level:0})),b[0].level!=Ri(b).level&&b.push({from:t,to:t,level:b[0].level}),b}}();return S.version="3.11 +",S}(),CodeMirror.defineMode("ruby",function(e){function t(e){var t={};for(var n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function u(e,t,n){return n.tokenize.push(e),e(t,n)}function a(e,t){o=null;if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(h),"comment";if(e.eatSpace())return null;var n=e.next(),r;if(n=="`"||n=="'"||n=='"'||n=="/"&&!e.eol()&&e.peek()!=" ")return u(l(n,"string",n=='"'||n=="`"),e,t);if(n=="%"){var i,a=!1;e.eat("s")?i="atom":e.eat(/[WQ]/)?(i="string",a=!0):e.eat(/[wxqr]/)&&(i="string");var f=e.eat(/[^\w\s]/);return f?(s.propertyIsEnumerable(f)&&(f=s[f]),u(l(f,i,a,!0),e,t)):"operator"}if(n=="#")return e.skipToEnd(),"comment";if(n=="<"&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return u(c(r[1]),e,t);if(n=="0")return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(n))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(n=="?"){while(e.match(/^\\[CM]-/));return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return n==":"?e.eat("'")?u(l("'","atom",!1),e,t):e.eat('"')?u(l('"',"atom",!0),e,t):(e.eatWhile(/[\w\?]/),"atom"):n=="@"?(e.eat("@"),e.eatWhile(/[\w\?]/),"variable-2"):n=="$"?(e.next(),e.eatWhile(/[\w\?]/),"variable-3"):/\w/.test(n)?(e.eatWhile(/[\w\?]/),e.eat(":")?"atom":"ident"):n!="|"||!t.varList&&t.lastTok!="{"&&t.lastTok!="do"?/[\(\)\[\]{}\\;]/.test(n)?(o=n,null):n=="-"&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(n)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(o="|",null)}function f(){var e=1;return function(t,n){if(t.peek()=="}"){e--;if(e==0)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else t.peek()=="{"&&e++;return a(t,n)}}function l(e,t,n,r){return function(i,s){var o=!1,u;while((u=i.next())!=null){if(u==e&&(r||!o)){s.tokenize.pop();break}if(n&&u=="#"&&!o&&i.eat("{")){s.tokenize.push(f(arguments.callee));break}o=!o&&u=="\\"}return t}}function c(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function h(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var n=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo"
,"rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload"]),r=t(["def","class","case","for","while","do","module","then","catch","loop","proc","begin"]),i=t(["end","until"]),s={"[":"]","{":"}","(":")"},o;return{startState:function(){return{tokenize:[a],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var s=t.tokenize[t.tokenize.length-1](e,t),u;if(s=="ident"){var a=e.current();s=n.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(a)?"tag":t.lastTok=="def"||t.lastTok=="class"||t.varList?"def":"variable",r.propertyIsEnumerable(a)?u="indent":i.propertyIsEnumerable(a)?u="dedent":(a=="if"||a=="unless")&&e.column()==e.indentation()&&(u="indent")}if(o||s&&s!="comment")t.lastTok=a||o||s;return o=="|"&&(t.varList=!t.varList),u=="indent"||/[\(\[\{]/.test(o)?t.context={prev:t.context,type:o||s,indented:t.indented}:(u=="dedent"||/[\)\]\}]/.test(o))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine=o=="\\"||s=="operator"),s},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=a)return 0;var r=n&&n.charAt(0),i=t.context,o=i.type==s[r]||i.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return i.indented+(o?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de"}}),CodeMirror.defineMIME("text/x-ruby","ruby"),CodeMirror.defineMode("coffeescript",function(e){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function y(e,n){if(e.sol()){var c=n.scopes[0].offset;if(e.eatSpace()){var h=e.indentation();return h>c?"indent":h<c?"dedent":null}c>0&&S(e,n)}if(e.eatSpace())return null;var m=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return n.tokenize=w,n.tokenize(e,n);if(m==="#")return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var y=!1;e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(y=!0),e.match(/^-?\d+\.\d*/)&&(y=!0),e.match(/^-?\.\d+/)&&(y=!0);if(y)return e.peek()=="."&&e.backUp(1),"number";var E=!1;e.match(/^-?0x[0-9a-f]+/i)&&(E=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(E=!0),e.match(/^-?0(?![\dx])/i)&&(E=!0);if(E)return"number"}if(e.match(d))return n.tokenize=b(e.current(),"string"),n.tokenize(e,n);if(e.match(v)){if(e.current()!="/"||e.match(/^.*\//,!1))return n.tokenize=b(e.current(),"string-2"),n.tokenize(e,n);e.backUp(1)}return e.match(u)||e.match(o)?"punctuation":e.match(s)||e.match(r)||e.match(l)?"operator":e.match(i)?"punctuation":e.match(g)?"atom":e.match(p)?"keyword":e.match(a)?"variable":e.match(f)?"property":(e.next(),t)}function b(n,r){var i=n.length==1;return function(s,o){while(!s.eol()){s.eatWhile(/[^'"\/\\]/);if(s.eat("\\")){s.next();if(i&&s.eol())return r}else{if(s.match(n))return o.tokenize=y,r;s.eat(/['"\/]/)}}return i&&(e.mode.singleLineStringErrors?r=t:o.tokenize=y),r}}function w(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match("###")){t.tokenize=y;break}e.eatWhile("#")}return"comment"}function E(t,n,r){r=r||"coffee";var i=0;if(r==="coffee"){for(var s=0;s<n.scopes.length;s++)if(n.scopes[s].type==="coffee"){i=n.scopes[s].offset+e.indentUnit;break}}else i=t.column()+t.current().length;n.scopes.unshift({offset:i,type:r})}function S(e,t){if(t.scopes.length==1)return;if(t.scopes[0].type==="coffee"){var n=e.indentation(),r=-1;for(var i=0;i<t.scopes.length;++i)if(n===t.scopes[i].offset){r=i;break}if(r===-1)return!0;while(t.scopes[0].offset!==n)t.scopes.shift();return!1}return t.scopes.shift(),!1}function x(e,n){var r=n.tokenize(e,n),i=e.current();if(i===".")return r=n.tokenize(e,n),i=e.current(),r==="variable"?"variable":t;i==="return"&&(n.dedent+=1),((i==="->"||i==="=>")&&!n.lambda&&n.scopes[0].type=="coffee"&&e.peek()===""||r==="indent")&&E(e,n);var s="[({".indexOf(i);return s!==-1&&E(e,n,"])}".slice(s,s+1)),c.exec(i)&&E(e,n),i=="then"&&S(e,n),r==="dedent"&&S(e,n)?t:(s="])}".indexOf(i),s!==-1&&S(e,n)?t:(n.dedent>0&&e.eol()&&n.scopes[0].type=="coffee"&&(n.scopes.length>1&&n.scopes.shift(),n.dedent-=1),r))}var t="error",r=new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]"),i=new RegExp("^[\\(\\)\\[\\]\\{\\},:`=;\\.]"),s=new RegExp("^((->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))"),o=new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),u=new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))"),a=new RegExp("^[_A-Za-z$][_A-Za-z$0-9]*"),f=new RegExp("^(@|this.)[_A-Za-z$][_A-Za-z$0-9]*"),l=n(["and","or","not","is","isnt","in","instanceof","typeof"]),c=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],h=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],p=n(c.concat(h));c=n(c);var d=new RegExp("^('{3}|\"{3}|['\"])"),v=new RegExp("^(/{3}|/)"),m=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],g=n(m),T={startState:function(e){return{tokenize:y,scopes:[{offset:e||0,type:"coffee"}],lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=x(e,t);return t.lastToken={style:n,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=y?0:e.scopes[0].offset}};return T}),CodeMirror.defineMIME("text/x-coffeescript","coffeescript"),CodeMirror.defineMode("css",function(e){return CodeMirror.getMode(e,"text/css")}),CodeMirror.defineMode("css-base",function(e,t){"use strict";function c(e,t){return l=t,e}function h(e,t){var n=e.next();if(r[n]){var i=r[n](e,t);if(i!==!1)return i}if(n=="@")return e.eatWhile(/[\w\\\-]/),c("def",e.current());if(n=="=")c(null,"compare");else{if(!(n!="~"&&n!="|"||!e.eat("=")))return c(null,"compare");if(n=='"'||n=="'")return t.tokenize=p(n),t.tokenize(e,t);if(n=="#")return e.eatWhile(/[\w\\\-]/),c("atom","hash");if(n=="!")return e.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(n))return e.eatWhile(/[\w.%]/),c("number","unit");if(n!=="-")return/[,+>*\/]/.test(n)?c(null,"select-op"):n=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?c("qualifier","qualifier"):n==":"?c("operator",n):/[;{}\[\]\(\)]/.test(n)?c(null,n):n=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=d,c("property","variable")):(e.eatWhile(/[\w\\\-]/),c("property","variable"));if(/\d/.test(e.peek()))return e.eatWhile(/[\w.%]/),c("number","unit");if(e.match(/^[^-]+-/))return c("meta","meta")}}function p(e,t){return function(n,r){var i=!1,s;while((s=n.next())!=null){if(s==e&&!i)break;i=!i&&s=="\\"}return i||(t&&n.backUp(1),r.tokenize=h),c("string","string")}}function d(e,t){return e.next(),e.match(/\s*[\"\']/,!1)?t.tokenize=h:t.tokenize=p(")",!0),c(null,"(")}var n=e.indentUnit,r=t.hooks||{},i=t.atMediaTypes||{},s=t.atMediaFeatures||{},o=t.propertyKeywords||{},u=t.colorKeywords||{},a=t.valueKeywords||{},f=!!t.allowNested,l=null;return{startState:function(e){return{tokenize:h,baseIndent:e||0,stack:[]}},token:function(e,t){t.tokenize=t.tokenize||h;if(t.tokenize==h&&e.eatSpace())return null;var n=t.tokenize(e,t);n&&typeof n!="string"&&(n=c(n[0],n[1]));var r=t.stack[t.stack.length-1];if(n=="variable")return l=="variable-definition"&&t.stack.push("propertyValue"),"variable-2";if(n=="property"){var p=e.current().toLowerCase();r=="propertyValue"?a.hasOwnProperty(p)?n="string-2":u.hasOwnProperty(p)?n="keyword":n="variable-2":r=="rule"?o.hasOwnProperty(p)||(n+=" error"):r=="block"?o.hasOwnProperty(p)?n="property":u.hasOwnProperty(p)?n="keyword":a.hasOwnProperty(p)?n="string-2":n="tag":!r||r=="@media{"?n="tag":r=="@media"?i[e.current()]?n="attribute":/^(only|not)$/.test(p)?n="keyword":p=="and"?n="error":s.hasOwnProperty(p)?n="error":n="attribute error":r=="@mediaType"?i.hasOwnProperty(p)?n="attribute":p=="and"?n="operator":/^(only|not)$/.test(p)?n="error":n="error":r=="@mediaType("?o.hasOwnProperty(p)||(i.hasOwnProperty(p)?n="error":p=="and"?n="operator":/^(only|not)$/.test(p)?n="error":n+=" error"):r=="@import"?n="tag":n="error"}else n=="atom"?!r||r=="@media{"||r=="block"?n="builtin":r=="propertyValue"?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())||(n+=" error"):n="error":r=="@media"&&l=="{"&&(n="error");if(l=="{")if(r=="@media"||r=="@mediaType")t.stack.pop(),t.stack[t.stack.length-1]="@media{";else{var d=f?"block":"rule";t.stack.push(d)}else if(l=="}"){var v=t.stack[t.stack.length-1];v=="interpolation"&&(n="operator"),t.stack.pop(),r=="propertyValue"&&t.stack.pop()}else l=="interpolation"?t.stack.push("interpolation"):l=="@media"?t.stack.push("@media"):l=="@import"?t.stack.push("@import"):r=="@media"&&/\b(keyword|attribute)\b/.test(n)?t.stack.push("@mediaType"):r=="@mediaType"&&e.current()==","?t.stack.pop():r=="@mediaType"&&l=="("?t.stack.push("@mediaType("):r=="@mediaType("&&l==")"?t.stack.pop():r!="rule"&&r!="block"||l!=":"?r=="propertyValue"&&l==";"?t.stack.pop():r=="@import"&&l==";"&&t.stack.pop():t.stack.push("propertyValue");return n},indent:function(e,t){var r=e.stack.length;return/^\}/.test(t)&&(r-=e.stack[e.stack.length-1]=="propertyValue"?2:1),e.baseIndent+r*n},electricChars:"}"}}),function(){function e(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function o(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=null;break}n=r=="*"}return["comment","comment"]}var t=e(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),n=e(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),r=e(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),i=e(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),s=e(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);CodeMirror.defineMIME("text/css",{atMediaTypes:t,atMediaFeatures:n,propertyKeywords:r,colorKeywords:i,valueKeywords:s,hooks:{"<":function(e,t){function n(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=null;break}n=r=="-"?n+1:0}return["comment","comment"]}if(e.eat("!"))return t.tokenize=n,n(e,t)},"/":function(e,t){return e.eat("*")?(t.tokenize=o,o(e,t)):!1}},name:"css-base"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:t,atMediaFeatures:n,propertyKeywords:r,colorKeywords:i,valueKeywords:s,allowNested:!0,hooks:{$:function(e){return e.match(/^[\w-]+/),e.peek()==":"?["variable","variable-definition"]:["variable","variable"]},"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=o,o(e,t)):["operator","operator"]},"#":function(e){return e.eat("{")?["operator","interpolation"]:(e.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css-base"})}(),CodeMirror.defineMode("xml",function(e,t){function a(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<"){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(c("atom","]]>")):null:e.match("--")?n(c("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(h(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=c("meta","?>"),"meta";var i=e.eat("/");o="";var s;while(s=e.eat(/[^\s\u00a0=<>\"\'\/?]/))o+=s;return o?(u=i?"closeTag":"openTag",t.tokenize=f,"tag"):"error"}if(r=="&"){var a;return e.eat("#")?e.eat("x")?a=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):a=e.eatWhile(/[\d]/)&&e.eat(";"):a=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),a?"atom":"error"}return e.eatWhile(/[^&<]/),null}function f(e,t){var n=e.next();return n==">"||n=="/"&&e.eat(">")?(t.tokenize=a,u=n==">"?"endTag":"selfcloseTag","tag"):n=="="?(u="equals",null):/[\'\"]/.test(n)?(t.tokenize=l(n),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function l(e){return function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=f;break}return"string"}}function c(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=a;break}n.next()}return e}}function h(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=h(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=a;break}return n.tokenize=h(e-1),n.tokenize(t,n)}}return"meta"}}function m(){for(var e=arguments.length-1;e>=0;e--)p.cc.push(arguments[e])}function g(){return m.apply(null,arguments),!0}function y(e,t){var n=i.doNotIndent.hasOwnProperty(e)||p.context&&p.context.noIndent;p.context={prev:p.context,tagName:e,indent:p.indented,startOfLine:t,noIndent:n}}function b(){p.context&&(p.context=p.context.prev)}function w(e){if(e=="openTag")return p.tagName=o,p.tagStart=d.column(),g(T,E(p.startOfLine));if(e=="closeTag"){var t=!1;return p.context?p.context.tagName!=o&&(i.implicitlyClosed.hasOwnProperty(p.context.tagName.toLowerCase())&&b(),t=!p.context||p.context.tagName!=o):t=!0,t&&(v="error"),g(S(t))}return g()}function E(e){return function(t){var n=p.tagName;return p.tagName=p.tagStart=null,t=="selfcloseTag"||t=="endTag"&&i.autoSelfClosers.hasOwnProperty(n.toLowerCase())?(x(n.toLowerCase()),g()):t=="endTag"?(x(n.toLowerCase()),y(n,e),g()):g()}}function S(e){return function(t){return e&&(v="error"),t=="endTag"?(b(),g()):(v="error",g(arguments.callee))}}function x(e){var t;for(;;){if(!p.context)return;t=p.context.tagName.toLowerCase();if(!i.contextGrabbers.hasOwnProperty(t)||!i.contextGrabbers[t].hasOwnProperty(e))return;b()}}function T(e){return e=="word"?(v="attribute",g(N,T)):e=="endTag"||e=="selfcloseTag"?m():(v="error",g(T))}function N(e){return e=="equals"?g(C,T):(i.allowMissing?e=="word"&&(v="attribute"):v="error",e=="endTag"||e=="selfcloseTag"?m():g())}function C(e){return e=="string"?g(k):e=="word"&&i.allowUnquoted?(v="string",g()):(v="error",e=="endTag"||e=="selfCloseTag"?m():g())}function k(e){return e=="string"?g(k):m()}var n=e.indentUnit,r=t.multilineTagIndentFactor||1,i=t.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},s=t.alignCDATA,o,u,p,d,v;return{startState:function(){return{tokenize:a,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(e,t){!t.tagName&&e.sol()&&(t.startOfLine=!0,t.indented=e.indentation());if(e.eatSpace())return null;v=u=o=null;var n=t.tokenize(e,t);t.type=u;if((n||u)&&n!="comment"){p=t,d=e;for(;;){var r=t.cc.pop()||w;if(r(u||n))break}}return t.startOfLine=!1,v||n},indent:function(e,t,i){var o=e.context;if(e.tokenize!=f&&e.tokenize!=a||o&&o.noIndent)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return e.tagStart+n*r;if(s&&/<!\[CDATA\[/.test(t))return 0;o&&/^<\//.test(t)&&(o=o.prev);while(o&&!o.startOfLine)o=o.prev;return o?o.indent+n:0},electricChars:"/",configuration:t.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("javascript",function(e,t){function u(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return u(e,t,p(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n)||n=="-"&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?u(e,t,d):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(o),c("operator",null,e.current()));if(n=="#")return e.skipToEnd(),c("error","error");if(o.test(n))return e.eatWhile(o),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=s.propertyIsEnumerable(r)&&s[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function m(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function g(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function y(e,t,n,i,s){var o=e.cc;b.state=e,b.stream=s,b.marked=null,b.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():r?O:A;if(u(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return b.marked?b.marked:n=="variable"&&g(e,i)?"variable-2":t}}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function E(){return w.apply(null,arguments),!0}function S(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=b.state;if(n.context){b.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function T(){b.state.context={prev:b.state.context,vars:b.state.localVars},b.state.localVars=x}function N(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var n=function(){var n=b.state;n.lexical=new m(n.indented,b.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function k(){var e=b.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function L(e){return function(t){return t==e?E():e==";"?w():E(arguments.callee)}}function A(e){return e=="var"?E(C("vardef"),W,L(";"),k):e=="keyword a"?E(C("form"),O,A,k):e=="keyword b"?E(C("form"),A,k):e=="{"?E(C("}"),R,k):e==";"?E():e=="if"?E(C("form"),O,A,k,V(b.state.indented)):e=="function"?E(G):e=="for"?E(C("form"),L("("),C(")"),$,L(")"),k,A,k):e=="variable"?E(C("stat"),B):e=="switch"?E(C("form"),O,C("}","switch"),L("{"),R,k,k):e=="case"?E(O,L(":")):e=="default"?E(L(":")):e=="catch"?E(C("form"),T,L("("),Y,L(")"),A,k,N):w(C("stat"),O,L(";"),k)}function O(e){return _(e,P)}function M(e){return _(e,H)}function _(e,t){return v.hasOwnProperty(e)?E(t):e=="function"?E(G):e=="keyword c"?E(D):e=="("?E(C(")"),D,L(")"),k,t):e=="operator"?E(O):e=="["?E(C("]"),q(M,"]"),k,t):e=="{"?E(C("}"),q(F,"}"),k,t):E()}function D(e){return e.match(/[;\}\)\],]/)?w():w(O)}function P(e,t){return e==","?w():H(e,t,P)}function H(e,t,n){n||(n=H);if(e=="operator")return/\+\+|--/.test(t)?E(n):t=="?"?E(O,L(":"),O):E(O);if(e==";")return;if(e=="(")return E(C(")","call"),q(M,")"),k,n);if(e==".")return E(j,n);if(e=="[")return E(C("]"),O,L("]"),k,n)}function B(e){return e==":"?E(k,A):w(P,L(";"),k)}function j(e){if(e=="variable")return b.marked="property",E()}function F(e,t){if(e=="variable"){b.marked="property";if(t=="get"||t=="set")return E(I)}else if(e=="number"||e=="string")b.marked=e+" property";if(v.hasOwnProperty(e))return E(L(":"),M)}function I(e){return e==":"?E(O):e!="variable"?E(L(":"),O):(b.marked="property",E(G))}function q(e,t){function n(r){if(r==","){var i=b.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),E(e,n)}return r==t?E():E(L(t))}return function(r){return r==t?E():w(e,n)}}function R(e){return e=="}"?E():w(A,R)}function U(e){return e==":"?E(z):w()}function z(e){return e=="variable"?(b.marked="variable-3",E()):w()}function W(e,t){return e=="variable"?(S(t),i?E(U,X):E(X)):w()}function X(e,t){if(t=="=")return E(M,X);if(e==",")return E(W)}function V(e){return function(t,n){return t=="keyword b"&&n=="else"?(b.state.lexical=new m(e,0,"form",null,b.state.lexical),E(A,k)):w()}}function $(e){return e=="var"?E(W,L(";"),K):e==";"?E(K):e=="variable"?E(J):w(O,L(";"),K)}function J(e,t){return t=="in"?E(O):E(P,K)}function K(e,t){return e==";"?E(Q):t=="in"?E(O):w(O,L(";"),Q)}function Q(e){e!=")"&&E(O)}function G(e,t){if(e=="variable")return S(t),E(G);if(e=="(")return E(C(")"),T,q(Y,")"),k,A,N)}function Y(e,t){if(e=="variable")return S(t),i?E(U):E()}var n=e.indentUnit,r=t.json,i=t.typescript,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),s=e("operator"),o={type:"atom",style:"atom"},u={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":s,"typeof":s,"instanceof":s,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o,"this":e("this")};if(i){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),o=/[+\-*&%=<>!?|~^]/,f,l,v={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},b={state:null,column:null,marked:null,cc:null},x={name:"this",next:{name:"arguments"}};return k.lex=!0,{startState:function(e){return{tokenize:h,lastType:null,cc:[],lexical:new m((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(t.tokenize!=d&&e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f!="operator"||l!="++"&&l!="--"?f:"incdec",y(t,n,f,l,e))},indent:function(e,r){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var i=r&&r.charAt(0),s=e.lexical;s.type=="stat"&&
i=="}"&&(s=s.prev);var o=s.type,u=i==o;if(t.statementIndent!=null){o==")"&&s.prev&&s.prev.type=="stat"&&(s=s.prev);if(s.type=="stat")return s.indented+t.statementIndent}return o=="vardef"?s.indented+(e.lastType=="operator"||e.lastType==","?4:0):o=="form"&&i=="{"?s.indented:o=="form"?s.indented+n:o=="stat"?s.indented+(e.lastType=="operator"||e.lastType==","?n:0):s.info=="switch"&&!u?s.indented+(/^(?:case|default)\b/.test(r)?n:2*n):s.align?s.column+(u?0:1):s.indented+(u?0:n)},electricChars:":{}",jsonMode:r}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("htmlmixed",function(e,t){function a(e,t){var s=t.htmlState.tagName,o=n.token(e,t.htmlState);if(s=="script"&&/\btag\b/.test(o)&&e.current()==">"){var u=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);u=u?u[1]:"",u&&/[\"\']/.test(u.charAt(0))&&(u=u.slice(1,u.length-1));for(var a=0;a<i.length;++a){var f=i[a];if(typeof f.matches=="string"?u==f.matches:f.matches.test(u)){f.mode&&(t.token=l,t.localMode=f.mode,t.localState=f.mode.startState&&f.mode.startState(n.indent(t.htmlState,"")));break}}}else s=="style"&&/\btag\b/.test(o)&&e.current()==">"&&(t.token=c,t.localMode=r,t.localState=r.startState(n.indent(t.htmlState,"")));return o}function f(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r[0]);return n}function l(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=a,t.localState=t.localMode=null,a(e,t)):f(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function c(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=a,t.localState=t.localMode=null,a(e,t)):f(e,/<\/\s*style\s*>/,r.token(e,t.localState))}var n=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),r=CodeMirror.getMode(e,"css"),i=[],s=t&&t.scriptTypes;i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(e,"javascript")});if(s)for(var o=0;o<s.length;++o){var u=s[o];i.push({matches:u.matches,mode:u.mode&&CodeMirror.getMode(e,u.mode)})}return i.push({matches:/./,mode:CodeMirror.getMode(e,"text/plain")}),{startState:function(){var e=n.startState();return{token:a,localMode:null,localState:null,htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:t,htmlState:CodeMirror.copyState(n,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return!e.localMode||/^\s*<\//.test(t)?n.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||n}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("sass",function(e){var t=function(e){return new RegExp("^"+e.join("|"))},n=["true","false","null","auto"],r=new RegExp("^"+n.join("|")),i=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not"],s=t(i),o=/^::?[\w\-]+/,u=function(e,t){var n=e.peek();return n===")"?(e.next(),t.tokenizer=p,"operator"):n==="("?(e.next(),e.eatSpace(),"operator"):n==="'"||n==='"'?(t.tokenizer=f(e.next()),"string"):(t.tokenizer=f(")",!1),"string")},a=function(e,t){return e.skipTo("*/")?(e.next(),e.next(),t.tokenizer=p):e.next(),"comment"},f=function(e,t){function n(r,i){var s=r.next(),o=r.peek(),u=r.string.charAt(r.pos-2),a=s!=="\\"&&o===e||s===e&&u!=="\\";return a?(s!==e&&t&&r.next(),i.tokenizer=p,"string"):s==="#"&&o==="{"?(i.tokenizer=l(n),r.next(),"operator"):"string"}return t==null&&(t=!0),n},l=function(e){return function(t,n){return t.peek()==="}"?(t.next(),n.tokenizer=e,"operator"):p(t,n)}},c=function(t){if(t.indentCount==0){t.indentCount++;var n=t.scopes[0].offset,r=n+e.indentUnit;t.scopes.unshift({offset:r})}},h=function(e){if(e.scopes.length==1)return;e.scopes.shift()},p=function(e,t){var n=e.peek();if(e.match("//"))return e.skipToEnd(),"comment";if(e.match("/*"))return t.tokenizer=a,t.tokenizer(e,t);if(e.match("#{"))return t.tokenizer=l(p),"operator";if(n===".")return e.next(),e.match(/^[\w-]+/)?(c(t),"atom"):e.peek()==="#"?(c(t),"atom"):"operator";if(n==="#"){e.next();if(e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))return"number";if(e.match(/^[\w-]+/))return c(t),"atom";if(e.peek()==="#")return c(t),"atom"}return e.match(/^-?[0-9\.]+/)?"number":e.match(/^(px|em|in)\b/)?"unit":e.match(r)?"keyword":e.match(/^url/)&&e.peek()==="("?(t.tokenizer=u,"atom"):n==="$"?(e.next(),e.eatWhile(/[\w-]/),e.peek()===":"?(e.next(),"variable-2"):"variable-3"):n==="!"?(e.next(),e.match(/^[\w]+/)?"keyword":"operator"):n==="="?(e.next(),e.match(/^[\w-]+/)?(c(t),"meta"):"operator"):n==="+"?(e.next(),e.match(/^[\w-]+/)?"variable-3":"operator"):e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/)?(c(t),"meta"):n==="@"?(e.next(),e.eatWhile(/[\w-]/),"meta"):n==='"'||n==="'"?(e.next(),t.tokenizer=f(n),"string"):n==":"&&e.match(o)?"keyword":e.eatWhile(/[\w-&]/)?e.peek()===":"&&!e.match(o,!1)?"property":"atom":e.match(s)?"operator":(e.next(),null)},d=function(t,n){t.sol()&&(n.indentCount=0);var r=n.tokenizer(t,n),i=t.current();i==="@return"&&h(n),r==="atom"&&c(n);if(r!==null){var s=t.pos-i.length,o=s+e.indentUnit*n.indentCount,u=[];for(var a=0;a<n.scopes.length;a++){var f=n.scopes[a];f.offset<=o&&u.push(f)}n.scopes=u}return r};return{startState:function(){return{tokenizer:p,scopes:[{offset:0,type:"sass"}],definedVars:[],definedMixins:[]}},token:function(e,t){var n=d(e,t);return t.lastToken={style:n,content:e.current()},n},indent:function(e){return e.scopes[0].offset}}}),CodeMirror.defineMIME("text/x-sass","sass"),function(){"use strict";CodeMirror.defineMode("haml",function(e){function r(e){return function(t,n){var r=t.peek();return r==e&&n.rubyState.tokenize.length==1?(t.next(),n.tokenize=s,"closeAttributeTag"):i(t,n)}}function i(e,t){return e.match("-#")?(e.skipToEnd(),"comment"):n.token(e,t.rubyState)}function s(e,n){var s=e.peek();if(n.previousToken.style=="comment"&&n.indented>n.previousToken.indented)return e.skipToEnd(),"commentLine";if(n.startOfLine){if(s=="!"&&e.match("!!"))return e.skipToEnd(),"tag";if(e.match(/^%[\w:#\.]+=/))return n.tokenize=i,"hamlTag";if(e.match(/^%[\w:]+/))return"hamlTag";if(s=="/")return e.skipToEnd(),"comment"}if(n.startOfLine||n.previousToken.style=="hamlTag")if(s=="#"||s==".")return e.match(/[\w-#\.]*/),"hamlAttribute";if(n.startOfLine&&!e.match("-->",!1)&&(s=="="||s=="-"))return n.tokenize=i,null;if(n.previousToken.style=="hamlTag"||n.previousToken.style=="closeAttributeTag"||n.previousToken.style=="hamlAttribute"){if(s=="(")return n.tokenize=r(")"),null;if(s=="{")return n.tokenize=r("}"),null}return t.token(e,n.htmlState)}var t=CodeMirror.getMode(e,{name:"htmlmixed"}),n=CodeMirror.getMode(e,"ruby");return{startState:function(){var e=t.startState(),r=n.startState();return{htmlState:e,rubyState:r,indented:0,previousToken:{style:null,indented:0},tokenize:s}},copyState:function(e){return{htmlState:CodeMirror.copyState(t,e.htmlState),rubyState:CodeMirror.copyState(n,e.rubyState),indented:e.indented,previousToken:e.previousToken,tokenize:e.tokenize}},token:function(e,t){e.sol()&&(t.indented=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return null;var n=t.tokenize(e,t);t.startOfLine=!1,n&&n!="commentLine"&&(t.previousToken={style:n,indented:t.indented});if(e.eol()&&t.tokenize==i){e.backUp(1);var r=e.peek();e.next(),r&&r!=","&&(t.tokenize=s)}return n=="hamlTag"?n="tag":n=="commentLine"?n="comment":n=="hamlAttribute"?n="attribute":n=="closeAttributeTag"&&(n=null),n},indent:function(e){return e.indented}}},"htmlmixed","ruby"),CodeMirror.defineMIME("text/x-haml","haml")}(),CodeMirror.defineMode("skim",function(e){var t=function(e){return new RegExp("^"+e.join("|"))},n=["true","false","null","auto"],r=new RegExp("^"+n.join("|")),i=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not"],s=t(i),o=/^::?[\w\-]+/,u=function(e,t){var n=e.peek();return n===")"?(e.next(),t.tokenizer=p,"operator"):n==="("?(e.next(),e.eatSpace(),"operator"):n==="'"||n==='"'?(t.tokenizer=f(e.next()),"string"):(t.tokenizer=f(")",!1),"string")},a=function(e,t){return e.skipTo("*/")?(e.next(),e.next(),t.tokenizer=p):e.next(),"comment"},f=function(e,t){function n(r,i){var s=r.next(),o=r.peek(),u=r.string.charAt(r.pos-2),a=s!=="\\"&&o===e||s===e&&u!=="\\";return a?(s!==e&&t&&r.next(),i.tokenizer=p,"string"):s==="#"&&o==="{"?(i.tokenizer=l(n),r.next(),"operator"):"string"}return t==null&&(t=!0),n},l=function(e){return function(t,n){return t.peek()==="}"?(t.next(),n.tokenizer=e,"operator"):p(t,n)}},c=function(t){if(t.indentCount==0){t.indentCount++;var n=t.scopes[0].offset,r=n+e.indentUnit;t.scopes.unshift({offset:r})}},h=function(e){if(e.scopes.length==1)return;e.scopes.shift()},p=function(e,t){var n=e.peek();if(e.match("//"))return e.skipToEnd(),"comment";if(e.match("/*"))return t.tokenizer=a,t.tokenizer(e,t);if(e.match("#{"))return t.tokenizer=l(p),"operator";if(n===".")return e.next(),e.match(/^[\w-]+/)?(c(t),"atom"):e.peek()==="#"?(c(t),"atom"):"operator";if(n==="#"){e.next();if(e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))return"number";if(e.match(/^[\w-]+/))return c(t),"atom";if(e.peek()==="#")return c(t),"atom"}return e.match(/^-?[0-9\.]+/)?"number":e.match(/^(px|em|in)\b/)?"unit":e.match(r)?"keyword":e.match(/^url/)&&e.peek()==="("?(t.tokenizer=u,"atom"):n==="$"?(e.next(),e.eatWhile(/[\w-]/),e.peek()===":"?(e.next(),"variable-2"):"variable-3"):n==="!"?(e.next(),e.match(/^[\w]+/)?"keyword":"operator"):n==="="?(e.next(),e.match(/^[\w-]+/)?(c(t),"meta"):"operator"):n==="+"?(e.next(),e.match(/^[\w-]+/)?"variable-3":"operator"):e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/)?(c(t),"meta"):n==="@"?(e.next(),e.eatWhile(/[\w-]/),"meta"):n==='"'||n==="'"?(e.next(),t.tokenizer=f(n),"string"):n==":"&&e.match(o)?"keyword":e.eatWhile(/[\w-&]/)?e.peek()===":"&&!e.match(o,!1)?"property":"atom":e.match(s)?"operator":(e.next(),null)},d=function(t,n){t.sol()&&(n.indentCount=0);var r=n.tokenizer(t,n),i=t.current();i==="@return"&&h(n),r==="atom"&&c(n);if(r!==null){var s=t.pos-i.length,o=s+e.indentUnit*n.indentCount,u=[];for(var a=0;a<n.scopes.length;a++){var f=n.scopes[a];f.offset<=o&&u.push(f)}n.scopes=u}return r};return{startState:function(){return{tokenizer:p,scopes:[{offset:0,type:"skim"}],definedVars:[],definedMixins:[]}},token:function(e,t){var n=d(e,t);return t.lastToken={style:n,content:e.current()},n},indent:function(e){return e.scopes[0].offset}}}),CodeMirror.defineMIME("text/x-skim","skim"),function(){"use strict";var e=[{keys:["Left"],type:"keyToKey",toKeys:["h"]},{keys:["Right"],type:"keyToKey",toKeys:["l"]},{keys:["Up"],type:"keyToKey",toKeys:["k"]},{keys:["Down"],type:"keyToKey",toKeys:["j"]},{keys:["Space"],type:"keyToKey",toKeys:["l"]},{keys:["Backspace"],type:"keyToKey",toKeys:["h"]},{keys:["Ctrl-Space"],type:"keyToKey",toKeys:["W"]},{keys:["Ctrl-Backspace"],type:"keyToKey",toKeys:["B"]},{keys:["Shift-Space"],type:"keyToKey",toKeys:["w"]},{keys:["Shift-Backspace"],type:"keyToKey",toKeys:["b"]},{keys:["Ctrl-n"],type:"keyToKey",toKeys:["j"]},{keys:["Ctrl-p"],type:"keyToKey",toKeys:["k"]},{keys:["Ctrl-["],type:"keyToKey",toKeys:["Esc"]},{keys:["Ctrl-c"],type:"keyToKey",toKeys:["Esc"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"]},{keys:["S"],type:"keyToKey",toKeys:["c","c"]},{keys:["Home"],type:"keyToKey",toKeys:["0"]},{keys:["End"],type:"keyToKey",toKeys:["$"]},{keys:["PageUp"],type:"keyToKey",toKeys:["Ctrl-b"]},{keys:["PageDown"],type:"keyToKey",toKeys:["Ctrl-f"]},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:["Ctrl-f"],type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:["Ctrl-b"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["Ctrl-d"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:["Ctrl-u"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change",operatorArgs:{enterInsertMode:!0}},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",operatorArgs:{enterInsertMode:!0},motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["Ctrl-i"],type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:["Ctrl-o"],type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:["a"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode"},{keys:["I"],type:"action",action:"enterInsertMode",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["J"],type:"action",action:"joinLines"},{keys:["p"],type:"action",action:"paste",actionArgs:{after:!0}},{keys:["P"],type:"action",action:"paste",actionArgs:{after:!1}},{keys:["r","character"],type:"action",action:"replace"},{keys:["R"],type:"action",action:"enterReplaceMode"},{keys:["u"],type:"action",action:"undo"},{keys:["Ctrl-r"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","Enter"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["Ctrl-a"],type:"action",action:"incrementNumberToken",actionArgs:{increase:!0,backtrack:!1}},{keys:["Ctrl-x"],type:"action",action:"incrementNumberToken",actionArgs:{increase:!1,backtrack:!1}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:[":"],type:"ex"}],t=function(){function a(e,t){var n=[];for(var r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}function g(e){return r.test(e)}function y(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function b(e){return/^[a-z]$/.test(e)}function w(e){return"()[]{}".indexOf(e)!=-1}function E(e){return i.test(e)}function S(e){return/^[A-Z]$/.test(e)}function x(e){return/^[\w]$/.test(e)}function T(e){return s.test(e)}function N(e){return/^\s*$/.test(e)}function C(e,t,n){return e>=t&&e<=n}function k(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function O(){return A||(A={searchQuery:null,searchIsReversed:!1,jumpList:L,lastChararacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new H({})}),A}function M(e){return e.vimState||(e.vimState={inputState:new D,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},visualMode:!1,visualLine:!1}),e.vimState}function D(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function P(e,t){this.clear(),e&&this.set(e,t)}function H(e){this.registers=e,this.unamedRegister=e['"']=new P}function R(e,t,n){var r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),i=Z(e,r)-1;i=n?i+1:i;var s=Math.min(Math.max(0,t.ch),i);return{line:r,ch:s}}function U(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function z(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function W(e,t,n){return{line:e.line+t,ch:e.ch+n}}function X(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function V(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&t[n]!="character")return!1;return!0}function $(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function J(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function K(e){return{line:e.line,ch:e.ch}}function Q(e,t){return e.ch==t.ch&&e.line==t.line}function G(e,t){return e.line<t.line?!0:e.line==t.line&&e.ch<t.ch?!0:!1}function Y(e,t,n){var r=G(e,t),i=G(t,n);return r&&i}function Z(e,t){return e.getLine(t).length}function et(e){return e.split("").reverse().join("")}function tt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function nt(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function rt(e,t){t.visualMode=!1,t.visualLine=!1;var n=e.getCursor("anchor"),r=e.getCursor("head");Q(n,r)||e.setCursor(R(e,r))}function it(e,t,n){var r=e.getRange(t,n),i=r.split("\n");i.length>1&&N(i.pop())&&(n.line--,n.ch=Z(e,n.line))}function st(e,t,n){t.ch=0,n.ch=0,n.line++}function ot(e){if(!e)return 0;var t=e.search(/\S/);return t==-1?e.length:t}function ut(e,t,n,r,i){var s=e.getCursor(),o=e.getLine(s.line),u=s.ch,a=o.substring(u),f;i?f=a.search(/\w/):f=a.search(/\S/);if(f==-1)return null;u+=f,a=o.substring(u);var l=o.substring(0,u),c;r?c=/^\S+/:/\w/.test(o.charAt(u))?c=/^\w+/:c=/^[^\w\s]+/;var h=c.exec(a),p=u,d=u+h[0].length,v=et(l),m=c.exec(v);m&&(p-=m[0].length);if(t){var g=o.substring(d),y=g.match(/^\s*/)[0].length;if(y>0)d+=y;else{var b=v.length-p,w=v.substring(b),E=w.match(/^\s*/)[0].length;p-=E}}return{start:{line:s.line,ch:p},end:{line:s.line,ch:d}}}function at(e,t,n){Q(t,n)||O().jumpList.add(e,t,n)}function ft(e,t){var n=O();n.lastChararacterSearch.increment=e,n.lastChararacterSearch.forward=t.forward,n.lastChararacterSearch.selectedCharacter=t.selectedCharacter}function ht(e,t,n,r){var i=e.getCursor(),s=n?1:-1,o=n?e.lineCount():-1,u=i.ch,a=i.line,f=e.getLine(a),l={lineText:f,nextCh:f.charAt(u),lastCh:null,index:u,symb:r,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[r],forward:n,depth:0,curMoveThrough:!1},c=lt[r];if(!c)return i;var h=ct[c].init,p=ct[c].isComplete;h&&h(l);while(a!==o&&t){l.index+=s,l.nextCh=l.lineText.charAt(l.index);if(!l.nextCh){a+=s,l.lineText=e.getLine(a)||"";if(s>0)l.index=0;else{var d=l.lineText.length;l.index=d>0?d-1:0}l.nextCh=l.lineText.charAt(l.index)}p(l)&&(i.line=a,i.ch=l.index,t--)}return l.nextCh||l.curMoveThrough?{line:a,ch:l.index}:i}function pt(e,t,n,r){var i=t.line,s=t.ch,a=e.getLine(i),f=n?1:-1,l=r?u:o;for(;;){var c=f>0?a.length:-1,h=c,p=c;while(s!=c){var d=!1;for(var v=0;v<l.length&&!d;++v)if(l[v].test(a.charAt(s))){h=s;while(s!=c&&l[v].test(a.charAt(s)))s+=f;p=s,d=h!=p;if(h==t.ch&&i==t.line&&p==h+f)continue;return{from:Math.min(h,p+1),to:Math.max(h,p),line:i}}d||(s+=f)}i+=f;if(!y(e,i))return null;a=e.getLine(i),s=f>0?0:a.length}throw"The impossible happened."}function dt(e,t,n,r,i){var s=e.getCursor();for(var o=0;o<t;o++){var u=s.ch,a=s.line,f,l=!1;while(!l){f=pt(e,s,n,i),l=!0;if(!f)return n?{line:s.line,ch:Z(e,s.line)}:{line:s.line,ch:0};s.line=f.line,n&&r?s.ch=f.to-1:n&&!r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.to-1):s.ch=f.from:!n&&r?C(s.ch,f.from,f.to)&&f.line==a?(l=!1,s.ch=f.from):s.ch=f.to:!n&&!r&&(s.ch=f.from)}}return s}function vt(e,t,n,r){var i=e.getCursor(),s=i.ch,o;for(var u=0;u<t;u++){var a=e.getLine(i.line);o=yt(s,a,r,n,!0);if(o==-1)return null;s=o}return{line:e.getCursor().line,ch:o}}function mt(e,t){var n=e.getCursor().line;return R(e,{line:n,ch:t-1})}function gt(e,t,n,r){if(!k(n,v))return;t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r)}function yt(e,t,n,r,i){var s;return r?(s=t.indexOf(n,e+1),s!=-1&&!i&&(s-=1)):(s=t.lastIndexOf(n,e-1),s!=-1&&!i&&(s+=1)),s}function bt(e,t,n){var r=t.line;n=n?n:e.getLine(r).charAt(t.ch);var i={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"}[n];if(!i)return t;var s={"(":1,"{":1,"[":1}[n]||-1,o=s===1?e.lineCount():-1,u=1,a=n,f=t.ch,l=e.getLine(r);while(r!==o&&u>0){f+=s,a=l.charAt(f);if(!a){r+=s,l=e.getLine(r)||"";if(s>0)f=0;else{var c=l.length;f=c>0?c-1:0}a=l.charAt(f)}a===n?u++:a===i&&u--}return a?{line:r,ch:f}:t}function wt(e,t,n){var r=e.getCursor(),i=bt(e,r,t),s=bt(e,i);return s.ch+=n?1:0,i.ch+=n?0:1,{start:s,end:i}}function Et(e,t,n){for(var r=n?n:e.length;r>=0;--r)if(t.test(e.charAt(r)))return r;return-1}function St(e,t,n){var r=e.getCursor(),i=e.getLine(r.line),s=i.split(""),o,u,a,f,l=s.indexOf(t);r.ch<l?r.ch=l:l<r.ch&&s[r.ch]==t&&(u=r.ch,--r.ch);if(s[r.ch]==t&&!u)o=r.ch+1;else for(a=r.ch;a>-1&&!o;a--)s[a]==t&&(o=a+1);if(o&&!u)for(a=o,f=s.length;a<f&&!u;a++)s[a]==t&&(u=a);return!o||!u?{start:r,end:r}:(n&&(--o,++u),{start:{line:r.line,ch:o},end:{line:r.line,ch:u}})}function xt(){}function Tt(e){var t=M(e);return t.searchState_||(t.searchState_=new xt)}function Nt(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i.value,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp}):r(prompt(n,""))}function Ct(e){var t=!1,n=[];for(var r=0;r<e.length;r++){var i=e.charAt(r);!t&&i=="/"&&n.push(r),t=i=="\\"}return n}function kt(e,t,n,r){if(t instanceof RegExp)return t;var i=Ct(t),s,o;if(!i.length)s=t;else{s=t.substring(0,i[0]);var u=t.substring(i[0]);o=u.indexOf("i")!=-1}if(!s)return null;r&&(n=/^[^A-Z]*$/.test(s));var a=new RegExp(s,n||o?"i":undefined);return a}function Lt(e,t){e.openConfirm?e.openConfirm('<span style="color: red">'+t+'</span> <button type="button">OK</button>',function(){},{bottom:!0}):alert(t)}function At(e,t){var n="";return e&&(n+='<span style="font-family: monospace">'+e+"</span>"),n+='<input type="text"/> <span style="color: #888">',t&&(n+='<span style="color: #888">',n+=t,n+="</span>"),n}function Mt(e,t){var n=(t.prefix||"")+" "+(t.desc||""),r=At(t.prefix,t.desc);Nt(e,r,n,t.onClose,t)}function _t(e,t){if(e instanceof RegExp&&t instanceof RegExp){var n=["global","multiline","ignoreCase","source"];for(var r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}function Dt(e,t,n,r){if(!t)return;var i=Tt(e),s=kt(e,t,!!n,!!r);if(!s)return;return Ht(e,s),_t(s,i.getQuery())?s:(i.setQuery(s),s)}function Pt(e){if(e.source.charAt(0)=="^")var t=!0;return{token:function(n){if(t&&!n.sol()){n.skipToEnd();return}var r=n.match(e,!1);if(r){if(r[0].length==0){n.next();return}if(!n.sol()){n.backUp(1);if(!e.exec(n.next()+r[0]))return n.next(),null}return n.match(e),"searching"}while(!n.eol()){n.next();if(n.match(e,!1))break}},query:e}}function Ht(e,t){var n=Tt(e).getOverlay();if(!n||t!=n.query)n&&e.removeOverlay(n),n=Pt(t),e.addOverlay(n),Tt(e).setOverlay(n)}function Bt(e,t,n,r){return r===undefined&&(r=1),e.operation(function(){var i=e.getCursor();t||(i.ch+=1);var s=e.getSearchCursor(n,i);for(var o=0;o<r;o++)if(!s.find(t)){s=e.getSearchCursor(n,t?{line:e.lastLine()}:{line:e.firstLine(),ch:0});if(!s.find(t))return}return s.from()})}function jt(e){e.removeOverlay(Tt(e).getOverlay()),Tt(e).setOverlay(null)}function Ft(e,t,n){return typeof e!="number"&&(e=e.line),t instanceof Array?k(e,t):n?e>=t&&e<=n:e==t}function It(e){var t=e.getScrollInfo(),n=6,r=10,i=e.coordsChar({left:0,top:n},"local"),s=t.clientHeight-r,o=e.coordsChar({left:0,top:s},"local");return{top:i.line,bottom:o.line}}function Rt(e){var t=0,n=[];while(t<e.length){if(e.charAt(t)!="<"){n.push(e.charAt(t)),t++;continue}var r=++t;while(e.charAt(t++)!=">");var i=e.substring(r,t-1),s="",o=/^C-(.+)$/.exec(i);o&&(s="Ctrl-",i=o[1]);var u;switch(i){case"BS":u="Backspace";break;case"CR":u="Enter";break;case"Del":u="Delete";break;default:u=i}n.push(s+u)}return n}function Wt(){function e(e,t,r){S(t)&&(r=="Shift"?r=null:t=t.toLowerCase()),r&&(t=r+"-"+t),n.handleKey(e,t)}function t(t,n){return function(r){e(r,t,n)}}function s(e,n){for(var r=0;r<e.length;r++){var s=e[r];!n&&k(s,p)&&(s="'"+s+"'"),n?i[n+"-"+s]=t(e[r],n):i[s]=t(e[r])}}var r=["Shift","Ctrl"],i={nofallthrough:!0,style:"fat-cursor"};return s(f),s(f,"Shift"),s(f,"Ctrl"),s(p),s(p,"Ctrl"),s(c),s(c,"Ctrl"),s(d),s(d,"Ctrl"),i}function Xt(e){e.setCursor(e.getCursor().line,e.getCursor().ch-1,!0),e.setOption("keyMap","vim")}function Vt(e){e.toggleOverwrite(),e.setCursor(e.getCursor().line,e.getCursor().ch-1,!0),e.setOption("keyMap","vim")}var r=/[A-Za-z]/,i=/[\d]/,s=/\s/,o=[/\w/,/[^\w\s]/],u=[/\S/],f=a(65,26),l=a(97,26),c=a(48,10),h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'",p=h.split(""),d=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"],v=f.concat(l).concat(c).concat(["<",">"]),m=f.concat(l).concat(c).concat('-"'.split("")),L=function(){function s(s,o,u){function l(n){var r=++t%e,o=i[r];o&&o.clear(),i[r]=s.setBookmark(n)}var a=t%e,f=i[a];(!f||!Q(f.find(),o))&&l(o),l(u),n=t,r=t-e+1,r<0&&(r=0)}function o(s){return t+=s,t>n?t=n:t<r&&(t=r),i[(e+t)%e]}var e=100,t=-1,n=0,r=0,i=new Array(e);return{cachedCursor:undefined,add:s,move:o}}(),A,_={buildKeyMap:function(){},getRegisterController:function(){return O().registerController},clearVimGlobalState_:function(){A=null},map:function(e,t){zt.map(e,t)},defineEx:function(e,t,n){if(e.indexOf(t)!==0)throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered');Ut[e]=n,zt.commandMap_[t]={name:e,shortName:t,type:"api"}},maybeInitState:function(e){M(e)},handleKey:function(t,n){var r,i=M(t);if(n=="Esc"){i.inputState=new D,i.visualMode&&rt(t,i);return}i.visualMode&&Q(t.getCursor("head"),t.getCursor("anchor"))&&rt(t,i),!i.visualMode&&!Q(t.getCursor("head"),t.getCursor("anchor"))&&(i.visualMode=!0,i.visualLine=!1);if(n!="0"||n=="0"&&i.inputState.getRepeat()===0)r=B.matchCommand(n,e,i);if(!r){E(n)&&i.inputState.pushRepeatDigit(n);return}if(r.type=="keyToKey")for(var s=0;s<r.toKeys.length;s++)this.handleKey(t,r.toKeys[s]);else B.processCommand(t,i,r)}};D.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},D.prototype.getRepeat=function(){var e=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0)e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10));return e},P.prototype={set:function(e,t){this.text=e,this.linewise=!!t},append:function(e,t){t||this.linewise?(this.text+="\n"+e,this.linewise=!0):this.text+=e},clear:function(){this.text="",this.linewise=!1},toString:function(){return this.text}},H.prototype={pushText:function(e,t,n,r){var i=this.isValidRegister(e)?this.getRegister(e):null;if(!i){switch(t){case"yank":this.registers[0]=new P(n,r);break;case"delete":case"change":n.indexOf("\n")==-1?this.registers["-"]=new P(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new P(n,r))}this.unamedRegister.set(n,r);return}var s=S(e);s?(i.append(n,r),this.unamedRegister.append(n,r)):(i.set(n,r),this.unamedRegister.set(n,r))},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||
(this.registers[e]=new P),this.registers[e]):this.unamedRegister},isValidRegister:function(e){return e&&k(e,m)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}};var B={matchCommand:function(e,t,n){var r=n.inputState,i=r.keyBuffer.concat(e);for(var s=0;s<t.length;s++){var o=t[s];if(V(i,o.keys)){if(i.length<o.keys.length)return r.keyBuffer.push(e),null;if(r.operator&&o.type=="action")continue;if(o.keys[i.length-1]=="character"){r.selectedCharacter=i[i.length-1];if(r.selectedCharacter.length>1)switch(r.selectedCharacter){case"Enter":r.selectedCharacter="\n";break;case"Space":r.selectedCharacter=" ";break;default:continue}}return r.keyBuffer=[],o}}return r.keyBuffer=[],null},processCommand:function(e,t,n){t.inputState.repeatOverride=n.repeatOverride;switch(n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n);break;default:}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=z(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator){r.motion="expandToLine",r.motionArgs={linewise:!0},this.evalInput(e,t);return}t.inputState=new D}r.operator=n.operator,r.operatorArgs=z(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=z(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),s=!!i,o=z(n.actionArgs)||{};r.selectedCharacter&&(o.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),o.repeat=i||1,o.repeatIsExplicit=s,o.registerName=r.registerName,t.inputState=new D,t.lastMotion=null,I[n.action](e,o,t)},processSearch:function(e,t,n){function u(r,i,s){try{Dt(e,r,i,s)}catch(o){Lt(e,"Invalid regex: "+regexPart);return}B.processMotion(e,t,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}function a(t){e.scrollTo(o.left,o.top),u(t,!0,!0)}function f(t,n){var i;try{i=Dt(e,n,!0,!0)}catch(t){}i?e.scrollIntoView(Bt(e,!r,i),30):(jt(e),e.scrollTo(o.left,o.top))}function l(t,n,r){var i=CodeMirror.keyName(t);if(i=="Esc"||i=="Ctrl-C"||i=="Ctrl-[")Dt(e,s),jt(e),e.scrollTo(o.left,o.top),CodeMirror.e_stop(t),r(),e.focus()}if(!e.getSearchCursor)return;var r=n.searchArgs.forward;Tt(e).setReversed(!r);var i=r?"/":"?",s=Tt(e).getQuery(),o=e.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":Mt(e,{onClose:a,prefix:i,desc:Ot,onKeyUp:f,onKeyDown:l});break;case"wordUnderCursor":var c=ut(e,!1,!0,!1,!0),h=!0;c||(c=ut(e,!1,!0,!1,!1),h=!1);if(!c)return;var p=e.getLine(c.start.line).substring(c.start.ch,c.end.ch);h?p="\\b"+p+"\\b":p=nt(p),O().jumpList.cachedCursor=e.getCursor(),e.setCursor(c.start),u(p,!0,!1)}},processEx:function(e,t,n){function r(t){zt.processCommand(e,t)}function i(t,n,r){var i=CodeMirror.keyName(t);if(i=="Esc"||i=="Ctrl-C"||i=="Ctrl-[")CodeMirror.e_stop(t),r(),e.focus()}n.type=="keyToEx"?zt.processCommand(e,n.exArgs.input):t.visualMode?Mt(e,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:i}):Mt(e,{onClose:r,prefix:":",onKeyDown:i})},evalInput:function(e,t){var n=t.inputState,r=n.motion,i=n.motionArgs||{},s=n.operator,o=n.operatorArgs||{},u=n.registerName,a=e.getCursor("head"),f=e.getCursor("anchor"),l=K(a),c=K(l),h,p;s&&this.recordLastEdit(e,t,n),n.repeatOverride!==undefined?p=n.repeatOverride:p=n.getRepeat();if(p>0&&i.explicitRepeat)i.repeatIsExplicit=!0;else if(i.noRepeat||!i.explicitRepeat&&p===0)p=1,i.repeatIsExplicit=!1;n.selectedCharacter&&(i.selectedCharacter=o.selectedCharacter=n.selectedCharacter),i.repeat=p,t.inputState=new D;if(r){var d=j[r](e,i,t);t.lastMotion=j[r];if(!d)return;if(i.toJumplist){var v=O().jumpList,m=v.cachedCursor;m?(at(e,m,d),delete v.cachedCursor):at(e,c,d)}d instanceof Array?(l=d[0],h=d[1]):h=d,h||(h={ch:l.ch,line:l.line}),t.visualMode?(G(f,a)&&(Q(f,h)||G(h,f))?f.ch+=1:G(a,f)&&(Q(f,h)||G(f,h))&&(f.ch-=1),a=h,t.visualLine&&(G(f,a)?(f.ch=0,a.ch=Z(e,a.line)):(a.ch=0,f.ch=Z(e,f.line))),e.setSelection(f,a),gt(e,t,"<",G(f,a)?f:a),gt(e,t,">",G(f,a)?a:f)):s||(h=R(e,h),e.setCursor(h.line,h.ch))}if(s){var g=!1;t.lastMotion=null,o.repeat=p,t.visualMode&&(l=f,h=a,i.inclusive=!0);if(G(h,l)){var y=l;l=h,h=y,g=!0}i.inclusive&&(!t.visualMode||!g)&&h.ch++;var b=i.linewise||t.visualMode&&t.visualLine;b?st(e,l,h):i.forward&&it(e,l,h),o.registerName=u,o.linewise=b,F[s](e,o,t,l,h,c),t.visualMode&&rt(e,t),o.enterInsertMode&&I.enterInsertMode(e)}},recordLastEdit:function(e,t,n){t.lastEdit=n}},j={moveToTopLine:function(e,t){var n=It(e).top+t.repeat-1;return{line:n,ch:ot(e.getLine(n))}},moveToMiddleLine:function(e){var t=It(e),n=Math.floor((t.top+t.bottom)*.5);return{line:n,ch:ot(e.getLine(n))}},moveToBottomLine:function(e,t){var n=It(e).bottom-t.repeat+1;return{line:n,ch:ot(e.getLine(n))}},expandToLine:function(e,t){var n=e.getCursor();return{line:n.line+t.repeat-1,ch:Infinity}},findNext:function(e,t,n){var r=Tt(e),i=r.getQuery();if(!i)return;var s=!t.forward;return s=r.isReversed()?!s:s,Ht(e,i),Bt(e,s,i,t.repeat)},goToMark:function(e,t,n){var r=n.marks[t.selectedCharacter];return r?r.find():null},jumpToMark:function(e,t,n){var r=e.getCursor();for(var i=0;i<t.repeat;i++){var s=r;for(var o in n.marks){if(!b(o))continue;var u=n.marks[o].find(),a=t.forward?G(u,s):G(s,u);if(a)continue;if(t.linewise&&u.line==s.line)continue;var f=Q(s,r),l=t.forward?Y(s,u,r):Y(r,u,s);if(f||l)r=u}}return t.linewise&&(r.ch=ot(e.getLine(r.line))),r},moveByCharacters:function(e,t){var n=e.getCursor(),r=t.repeat,i=t.forward?n.ch+r:n.ch-r;return{line:n.line,ch:i}},moveByLines:function(e,t,n){var r=e.getCursor(),i=r.ch;switch(n.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:i=n.lastHPos;break;default:n.lastHPos=i}var s=t.repeat+(t.repeatOffset||0),o=t.forward?r.line+s:r.line-s;return o<e.firstLine()||o>e.lastLine()?null:(t.toFirstChar&&(i=ot(e.getLine(o)),n.lastHPos=i),n.lastHSPos=e.charCoords({line:o,ch:i},"div").left,{line:o,ch:i})},moveByDisplayLines:function(e,t,n){var r=e.getCursor();switch(n.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:n.lastHSPos=e.charCoords(r,"div").left}var i=t.repeat,s=e.findPosV(r,t.forward?i:-i,"line",n.lastHSPos);if(s.hitSide)if(t.forward)var o=e.charCoords(s,"div"),u={top:o.top+8,left:n.lastHSPos},s=e.coordsChar(u,"div");else{var a=e.charCoords({line:e.firstLine(),ch:0},"div");a.left=n.lastHSPos,s=e.coordsChar(a,"div")}return n.lastHPos=s.ch,s},moveByPage:function(e,t){var n=e.getCursor(),r=t.repeat;e.moveV(t.forward?r:-r,"page");var i=e.getCursor();return e.setCursor(n),i},moveByParagraph:function(e,t){var n=e.getCursor().line,r=t.repeat,i=t.forward?1:-1;for(var s=0;s<r;s++){if(!t.forward&&n===e.firstLine()||t.forward&&n==e.lastLine())break;n+=i;while(n!==e.firstLine()&&n!=e.lastLine()&&e.getLine(n))n+=i}return{line:n,ch:0}},moveByScroll:function(e,t,n){var r=O(),i=e.getScrollInfo(),s=null,o=t.repeat;o||(o=i.clientHeight/(2*e.defaultTextHeight()));var u=e.charCoords(e.getCursor(),"local");t.repeat=o;var s=j.moveByDisplayLines(e,t,n);if(!s)return null;var a=e.charCoords(s,"local");return e.scrollTo(null,i.top+a.top-u.top),s},moveByWords:function(e,t){return dt(e,t.repeat,!!t.forward,!!t.wordEnd,!!t.bigWord)},moveTillCharacter:function(e,t){var n=t.repeat,r=vt(e,n,t.forward,t.selectedCharacter),i=t.forward?-1:1;return ft(i,t),r?(r.ch+=i,r):e.getCursor()},moveToCharacter:function(e,t){var n=t.repeat;return ft(0,t),vt(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToSymbol:function(e,t){var n=t.repeat;return ht(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToColumn:function(e,t,n){var r=t.repeat;return n.lastHPos=r-1,n.lastHSPos=e.charCoords(e.getCursor(),"div").left,mt(e,r)},moveToEol:function(e,t,n){var r=e.getCursor();n.lastHPos=Infinity;var i={line:r.line+t.repeat-1,ch:Infinity},s=e.clipPos(i);return s.ch--,n.lastHSPos=e.charCoords(s,"div").left,i},moveToFirstNonWhiteSpaceCharacter:function(e){var t=e.getCursor();return{line:t.line,ch:ot(e.getLine(t.line))}},moveToMatchedSymbol:function(e,t){var n=e.getCursor(),r=e.getLine(n.line).charAt(n.ch);return w(r)?bt(e,e.getCursor(),t.symbol):n},moveToStartOfLine:function(e){var t=e.getCursor();return{line:t.line,ch:0}},moveToLineOrEdgeOfDocument:function(e,t){var n=t.forward?e.lastLine():e.firstLine();return t.repeatIsExplicit&&(n=t.repeat-e.getOption("firstLineNumber")),{line:n,ch:ot(e.getLine(n))}},textObjectManipulation:function(e,t){var n=t.selectedCharacter,r=!t.textObjectInner;if(!q[n])return null;var i=q[n](e,r),s=i.start,o=i.end;return[s,o]},repeatLastCharacterSearch:function(e,t){var n=O().lastChararacterSearch,r=t.repeat,i=t.forward===n.forward,s=(n.increment?1:0)*(i?-1:1);e.moveH(-s,"char"),t.inclusive=i?!0:!1;var o=vt(e,r,i,n.selectedCharacter);return o?(o.ch+=s,o):(e.moveH(s,"char"),e.getCursor())}},F={change:function(e,t,n,r,i){O().registerController.pushText(t.registerName,"change",e.getRange(r,i),t.linewise),t.linewise?(r.ch=ot(e.getLine(r.line)),e.replaceRange("\n",r,i)):e.replaceRange("",r,i),e.setCursor(r)},"delete":function(e,t,n,r,i){O().registerController.pushText(t.registerName,"delete",e.getRange(r,i),t.linewise),e.replaceRange("",r,i),t.linewise?e.setCursor(j.moveToFirstNonWhiteSpaceCharacter(e)):e.setCursor(r)},indent:function(e,t,n,r,i){var s=r.line,o=i.line,u=n.visualMode?t.repeat:1;t.linewise&&o--;for(var a=s;a<=o;a++)for(var f=0;f<u;f++)e.indentLine(a,t.indentRight);e.setCursor(r),e.setCursor(j.moveToFirstNonWhiteSpaceCharacter(e))},swapcase:function(e,t,n,r,i,s){var o=e.getRange(r,i),u="";for(var a=0;a<o.length;a++){var f=o.charAt(a);u+=S(f)?f.toLowerCase():f.toUpperCase()}e.replaceRange(u,r,i),e.setCursor(s)},yank:function(e,t,n,r,i,s){O().registerController.pushText(t.registerName,"yank",e.getRange(r,i),t.linewise),e.setCursor(s)}},I={jumpListWalk:function(e,t,n){if(n.visualMode)return;var r=t.repeat,i=t.forward,s=O().jumpList,o=s.move(i?r:-r),u=o?o.find():e.getCursor();e.setCursor(u)},scrollToCursor:function(e,t){var n=e.getCursor().line,r=window.getComputedStyle(e.getScrollerElement()).getPropertyValue("height"),i=parseInt(r),s=e.charCoords({line:n,ch:0},"local").top,o=parseInt(i)/2;switch(t.position){case"center":s=s-i/2+10;break;case"bottom":s-=i;break;case"top":}e.scrollTo(null,s),e.scrollIntoView()},enterInsertMode:function(e,t){var n=t?t.insertAt:null;if(n=="eol"){var r=e.getCursor();r={line:r.line,ch:Z(e,r.line)},e.setCursor(r)}else n=="charAfter"&&e.setCursor(W(e.getCursor(),0,1));e.setOption("keyMap","vim-insert")},toggleVisualMode:function(e,t,n){var r=t.repeat,i=e.getCursor(),s;n.visualMode?(i=e.getCursor("anchor"),s=e.getCursor("head"),!n.visualLine&&t.linewise?(n.visualLine=!0,i.ch=G(i,s)?0:Z(e,i.line),s.ch=G(i,s)?Z(e,s.line):0,e.setSelection(i,s)):n.visualLine&&!t.linewise?n.visualLine=!1:rt(e,n)):(n.visualMode=!0,n.visualLine=!!t.linewise,n.visualLine?(i.ch=0,s=R(e,{line:i.line+r-1,ch:Z(e,i.line)},!0)):s=R(e,{line:i.line,ch:i.ch+r},!0),!t.repeatIsExplicit&&!n.visualLine?(e.setCursor(s),e.setSelection(s,i)):e.setSelection(i,s)),gt(e,n,"<",G(i,s)?i:s),gt(e,n,">",G(i,s)?s:i)},joinLines:function(e,t,n){var r,i;if(n.visualMode)r=e.getCursor("anchor"),i=e.getCursor("head"),i.ch=Z(e,i.line)-1;else{var s=Math.max(t.repeat,2);r=e.getCursor(),i=R(e,{line:r.line+s-1,ch:Infinity})}var o=0;e.operation(function(){for(var t=r.line;t<i.line;t++){o=Z(e,r.line);var n={line:r.line+1,ch:Z(e,r.line+1)},s=e.getRange(r,n);s=s.replace(/\n\s*/g," "),e.replaceRange(s,r,n)}var u={line:r.line,ch:o};e.setCursor(u)})},newLineAndEnterInsertMode:function(e,t){var n=e.getCursor();if(n.line===e.firstLine()&&!t.after)e.replaceRange("\n",{line:e.firstLine(),ch:0}),e.setCursor(e.firstLine(),0);else{n.line=t.after?n.line:n.line-1,n.ch=Z(e,n.line),e.setCursor(n);var r=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;r(e)}this.enterInsertMode(e)},paste:function(e,t,n){var r=e.getCursor(),i=O().registerController.getRegister(t.registerName);if(!i.text)return;for(var s="",o=0;o<t.repeat;o++)s+=i.text;var u=i.linewise;u?t.after?(s="\n"+s.slice(0,s.length-1),r.ch=Z(e,r.line)):r.ch=0:r.ch+=t.after?1:0,e.replaceRange(s,r);var a,f;u&&t.after?a={line:r.line+1,ch:ot(e.getLine(r.line+1))}:u&&!t.after?a={line:r.line,ch:ot(e.getLine(r.line))}:!u&&t.after?(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length-1)):(f=e.indexFromPos(r),a=e.posFromIndex(f+s.length)),e.setCursor(a)},undo:function(e,t){J(e,CodeMirror.commands.undo,t.repeat)()},redo:function(e,t){J(e,CodeMirror.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){var r=t.selectedCharacter;gt(e,n,r,e.getCursor())},replace:function(e,t,n){var r=t.selectedCharacter,i=e.getCursor(),s,o;if(n.visualMode)i=e.getCursor("start"),o=e.getCursor("end"),o=e.clipPos({line:o.line,ch:o.ch+1});else{var u=e.getLine(i.line);s=i.ch+t.repeat,s>u.length&&(s=u.length),o={line:i.line,ch:s}}if(r=="\n")n.visualMode||e.replaceRange("",i,o),(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(e);else{var a=e.getRange(i,o);a=a.replace(/[^\n]/g,r),e.replaceRange(a,i,o),n.visualMode?(e.setCursor(i),rt(e,n)):e.setCursor(W(o,0,-1))}},enterReplaceMode:function(e,t){e.setOption("keyMap","vim-replace"),e.toggleOverwrite()},incrementNumberToken:function(e,t,n){var r=e.getCursor(),i=e.getLine(r.line),s=/-?\d+/g,o,u,a,f,l;while((o=s.exec(i))!==null){l=o[0],u=o.index,a=u+l.length;if(r.ch<a)break}if(!t.backtrack&&a<=r.ch)return;if(!l)return;var c=t.increase?1:-1,h=parseInt(l)+c*t.repeat,p={ch:u,line:r.line},d={ch:a,line:r.line};f=h.toString(),e.replaceRange(f,p,d),e.setCursor({line:r.line,ch:u+f.length-1})},repeatLastEdit:function(e,t,n){var r=n.lastEdit;if(r){t.repeat&&t.repeatIsExplicit&&(n.lastEdit.repeatOverride=t.repeat);var i=n.inputState;n.inputState=n.lastEdit,B.evalInput(e,n),n.inputState=i}}},q={w:function(e,t){return ut(e,t,!0,!1)},W:function(e,t){return ut(e,t,!0,!0)},"{":function(e,t){return wt(e,"}",t)},"(":function(e,t){return wt(e,")",t)},"[":function(e,t){return wt(e,"]",t)},"'":function(e,t){return St(e,"'",t)},'"':function(e,t){return St(e,'"',t)}},lt={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},ct={bracket:{isComplete:function(e){if(e.nextCh===e.symb){e.depth++;if(e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return e.index===0&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t=e.lastCh==="*"&&e.nextCh==="/";return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb=e.symb==="m"?"{":"}",e.reverseSymb=e.symb==="{"?"}":"{"},isComplete:function(e){return e.nextCh===e.symb?!0:!1}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if(e.nextCh==="#"){var t=e.lineText.match(/#(\w+)/)[1];if(t==="endif"){if(e.forward&&e.depth===0)return!0;e.depth++}else if(t==="if"){if(!e.forward&&e.depth===0)return!0;e.depth--}if(t==="else"&&e.depth===0)return!0}return!1}}};xt.prototype={getQuery:function(){return O().query},setQuery:function(e){O().query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return O().isReversed},setReversed:function(e){O().isReversed=e}};var Ot="(Javascript regexp)",qt=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"},{name:"nohlsearch",shortName:"noh",type:"builtIn"},{name:"delmarks",shortName:"delm",type:"builtin"}];t.ExCommandDispatcher=function(){this.buildCommandMap_()},t.ExCommandDispatcher.prototype={processCommand:function(e,t){var r=new CodeMirror.StringStream(t),i={};i.input=t;try{this.parseInput_(e,r,i)}catch(s){Lt(e,s);return}var o;if(!i.commandName)i.line!==undefined&&(o="move");else{var u=this.matchCommand_(i.commandName);if(u){o=u.name,this.parseCommandArgs_(r,i,u);if(u.type=="exToKey"){for(var a=0;a<u.toKeys.length;a++)n.handleKey(e,u.toKeys[a]);return}if(u.type=="exToEx"){this.processCommand(e,u.toInput);return}}}if(!o){Lt(e,'Not an editor command ":'+t+'"');return}Ut[o](e,i)},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),n.line!==undefined&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return e.getCursor().line;case"$":return e.lastLine();case"'":var r=M(e).marks[t.next()];if(r&&r.find())return r.find().line;throw"Mark not set";default:return t.backUp(1),e.getCursor().line}},parseCommandArgs_:function(e,t,n){if(e.eol())return;t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=tt(t.argString).split(r);i.length&&i[0]&&(t.args=i)},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(r.name.indexOf(e)===0)return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<qt.length;e++){var t=qt[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(t,n){if(t!=":"&&t.charAt(0)==":"){var r=t.substring(1);n!=":"&&n.charAt(0)==":"?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1)}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:Rt(n)}}else n!=":"&&n.charAt(0)==":"?e.unshift({keys:Rt(t),type:"keyToEx",exArgs:{input:n.substring(1)}}):e.unshift({keys:Rt(t),type:"keyToKey",toKeys:Rt(n)})}};var Ut={map:function(e,t){var n=t.args;if(!n||n.length<2){e&&Lt(e,"Invalid mapping: "+t.input);return}zt.map(n[0],n[1],e)},move:function(e,t){B.processCommand(e,M(e),{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},substitute:function(e,t){function v(){for(var t=e.getSearchCursor(c,d);t.findNext()&&Ft(t.from(),h,p);){var n=e.getRange(t.from(),t.to()),r=n.replace(c,s);t.replace(r)}var i=M(e);i.visualMode&&rt(e,i)}var n=t.argString,r=Ct(n);if(r[0]!==0){Lt(e,"Substitutions should be of the form :s/pattern/replace/");return}var i=n.substring(r[0]+1,r[1]),s="",o,u;r[1]&&(s=n.substring(r[1]+1,r[2]));if(r[2]){var a=n.substring(r[2]+1).split(" ");o=a[0],u=parseInt(a[1])}o&&(i=i+"/"+o);if(i)try{Dt(e,i,!0,!0)}catch(f){Lt(e,"Invalid regex: "+i);return}var l=Tt(e),c=l.getQuery(),h=t.line||e.firstLine(),p=t.lineEnd||h;u&&(h=p,p=h+u-1);var d=R(e,{line:h,ch:0});e.operation(v)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(e){CodeMirror.commands.save?CodeMirror.commands.save(e):e.save()},nohlsearch:function(e){jt(e)},delmarks:function(e,t){if(!t.argString||!t.argString.trim()){Lt(e,"Argument required");return}var n=M(e),r=new CodeMirror.StringStream(t.argString.trim());while(!r.eol()){r.eatSpace();var i=r.pos;if(!r.match(/[a-zA-Z]/,!1)){Lt(e,"Invalid argument: "+t.argString.substring(i));return}var s=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1)){Lt(e,"Invalid argument: "+t.argString.substring(i));return}var o=s,u=r.next();if(!(b(o)&&b(u)||S(o)&&S(u))){Lt(e,"Invalid argument: "+o+"-");return}var a=o.charCodeAt(0),f=u.charCodeAt(0);if(a>=f){Lt(e,"Invalid argument: "+t.argString.substring(i));return}for(var l=0;l<=f-a;l++){var c=String.fromCharCode(a+l);delete n.marks[c]}}else delete n.marks[s]}}},zt=new t.ExCommandDispatcher;return CodeMirror.keyMap.vim=Wt(),CodeMirror.keyMap["vim-insert"]={Esc:Xt,"Ctrl-[":Xt,"Ctrl-C":Xt,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(e){var t=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;t(e)},fallthrough:["default"]},CodeMirror.keyMap["vim-replace"]={Esc:Vt,"Ctrl-[":Vt,"Ctrl-C":Vt,Backspace:"goCharLeft",fallthrough:["default"]},_},n=t();CodeMirror.Vim=n}(),CodeMirror.defineMode("markdown",function(e,t){function L(e,t,n){return t.f=t.inline=n,n(e,t)}function A(e,t,n){return t.f=t.block=n,n(e,t)}function O(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,!n&&e.f==_&&(e.f=B,e.block=M),e.thisLineHasContent=!1,null}function M(e,n){var r=n.list!==!1;n.list!==!1&&n.indentationDiff>=0?(n.indentationDiff<4&&(n.indentation-=n.indentationDiff),n.list=null):n.list!==!1&&n.indentation>0?(n.list=null,n.listDepth=Math.floor(n.indentation/4)):n.list!==!1&&(n.list=!1,n.listDepth=0);if(n.indentationDiff>=4)return n.indentation-=4,e.skipToEnd(),a;if(e.eatSpace())return null;if(e.peek()==="#"||n.prevLineHasContent&&e.match(C))n.header=!0;else if(e.eat(">")){n.indentation++,n.quote=1,e.eatSpace();while(e.eat(">"))e.eatSpace(),n.quote++}else{if(e.peek()==="[")return L(e,n,F);if(e.match(S,!0))return d;if((!n.prevLineHasContent||r)&&(e.match(x,!0)||e.match(T,!0)))n.indentation+=4,n.list=!0,n.listDepth++,t.taskLists&&e.match(N,!1)&&(n.taskList=!0);else if(t.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0))return n.localMode=s(RegExp.$1),n.localMode&&(n.localState=n.localMode.startState()),A(e,n,D),a}return L(e,n,n.inline)}function _(e,t){var i=r.token(e,t.htmlState);return n&&i==="tag"&&t.htmlState.type!=="openTag"&&!t.htmlState.context&&(t.f=B,t.block=M),t.md_inside&&e.current().indexOf(">")!=-1&&(t.f=B,t.block=M,t.htmlState.context=undefined),i}function D(e,t){return e.sol()&&e.match(/^```/,!0)?(t.localMode=t.localState=null,t.f=B,t.block=M,a):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),a)}function P(e){var t=[];if(e.taskOpen)return"meta";if(e.taskClosed)return"property";e.strong&&t.push(E),e.em&&t.push(w),e.linkText&&t.push(y),e.code&&t.push(a),e.header&&t.push(u),e.quote&&t.push(e.quote%2?f:l);if(e.list!==!1){var n=(e.listDepth-1)%3;n?n===1?t.push(h):t.push(p):t.push(c)}return t.length?t.join(" "):null}function H(e,t){return e.match(k,!0)?P(t):undefined}function B(e,n){var r=n.text(e,n);if(typeof r!="undefined")return r;if(n.list)return n.list=null,P(n);if(n.taskList){var i=e.match(N,!0)[1]!=="x";return i?n.taskOpen=!0:n.taskClosed=!0,n.taskList=!1,P(n)}n.taskOpen=!1,n.taskClosed=!1;var s=e.next();if(s==="\\")return e.next(),P(n);if(n.linkTitle){n.linkTitle=!1;var u=s;s==="("&&(u=")"),u=(u+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var a="^\\s*(?:[^"+u+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(e.match(new RegExp(a),!0))return b}if(s==="`"){var f=P(n),l=e.pos;e.eatWhile("`");var c=1+e.pos-l;return n.code?c===o?(n.code=!1,f):P(n):(o=c,n.code=!0,P(n))}if(n.code)return P(n);if(s==="!"&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),n.inline=n.f=j,v;if(s==="["&&e.match(/.*\](\(| ?\[)/,!1))return n.linkText=!0,P(n);if(s==="]"&&n.linkText){var h=P(n);return n.linkText=!1,n.inline=n.f=j,h}if(s==="<"&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return L(e,n,U(m,">"));if(s==="<"&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return L(e,n,U(g,">"));if(s==="<"&&e.match(/^\w/,!1)){if(e.string.indexOf(">")!=-1){var p=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(p)&&(n.md_inside=!0)}return e.backUp(1),A(e,n,_)}if(s==="<"&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var d=!1;if(!t.underscoresBreakWords&&s==="_"&&e.peek()!=="_"&&e.match(/(\w)/,!1)){var y=e.pos-2;if(y>=0){var w=e.string.charAt(y);w!=="_"&&w.match(/(\w)/,!1)&&(d=!0)}}var f=P(n);if(s==="*"||s==="_"&&!d){if(n.strong===s&&e.eat(s))return n.strong=!1,f;if(!n.strong&&e.eat(s))return n.strong=s,P(n);if(n.em===s)return n.em=!1,f;if(!n.em)return n.em=s,P(n)}else if(s===" ")if(e.eat("*")||e.eat("_")){if(e.peek()===" ")return P(n);e.backUp(1)}return P(n)}function j(e,t){if(e.eatSpace())return null;var n=e.next();return n==="("||n==="["?L(e,t,U(b,n==="("?")":"]")):"error"}function F(e,t){return e.match(/^[^\]]*\]:/,!0)?(t.f=I,y):L(e,t,B)}function I(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),e.peek()===undefined?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=B,b)}function R(e){return q[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),q[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),q[e]}function U(e,t,n){return n=n||B,function(r,i){return r.match(R(t)),i.inline=i.f=n,e}}var n=CodeMirror.modes.hasOwnProperty("xml"),r=CodeMirror.getMode(e,n?{name:"xml",htmlMode:!0}:"text/plain"),i={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},s=function(){var t,n={},r={},s,o=[];for(var u in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(u)&&o.push(u);for(t=0;t<o.length;t++)n[o[t]]=o[t];var a=[];for(var u in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(u)&&a.push({mime:u,mode:CodeMirror.mimeModes[u]});for(t=0;t<a.length;t++)s=a[t].mime,r[s]=a[t].mime;for(var f in i)if(i[f]in n||i[f]in r)n[f]=i[f];return function(t){return n[t]?CodeMirror.getMode(e,n[t]):null}}();t.underscoresBreakWords===undefined&&(t.underscoresBreakWords=!0),t.fencedCodeBlocks===undefined&&(t.fencedCodeBlocks=!1),t.taskLists===undefined&&(t.taskLists=!1);var o=0,u="header",a="comment",f="atom",l="number",c="variable-2",h="variable-3",p="keyword",d="hr",v="tag",m="link",g="link",y="link",b="string",w="em",E="strong",S=/^([*\-=_])(?:\s*\1){2,}\s*$/,x=/^[*\-+]\s+/,T=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,C=/^(?:\={1,}|-{1,})$/,k=/^[^!\[\]*_\\<>` "'(]+/,q=[];return{startState:function(){return{f:M,prevLineHasContent:!1,thisLineHasContent:!1,block:M,htmlState:CodeMirror.startState(r),indentation:0,inline:B,text:H,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:CodeMirror.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,md_inside:e.md_inside}},token:function(e,t){if(e.sol()){if(e.match(/^\s*$/,!0))return t.prevLineHasContent=!1,O(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.header=!1,t.taskList=!1,t.code=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,r=Math.floor((n-t.indentation)/4)*4;r>4&&(r=4);var i=t.indentation+r;t.indentationDiff=i-t.indentation,t.indentation=i;if(n>0)return null}return t.f(e,t)},blankLine:O,getType:P}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),function(){}.call(this),function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,n){var r,i,o,u,a;r=e.keyCode,t(w,r)==-1&&w.push(r);if(r==93||r==224)r=91;if(r in m){m[r]=!0;for(o in y)y[o]==r&&(s[o]=!0);return}if(!s.filter.call(this,e))return;if(!(r in v))return;for(u=0;u<v[r].length;u++){i=v[r][u];if(i.scope==n||i.scope=="all"){a=i.mods.length>0;for(o in m)if(!m[o]&&t(i.mods,+o)>-1||m[o]&&t(i.mods,+o)==-1)a=!1;(i.mods.length==0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||a)&&i.method(e,i)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function r(e){var n=e.keyCode,r,i=t(w,n);i>=0&&w.splice(i,1);if(n==93||n==224)n=91;if(n in m){m[n]=!1;for(r in y)y[r]==n&&(s[r]=!1)}}function i(){for(d in m)m[d]=!1;for(d in y)s[d]=!1}function s(e,t,n){var r,i,s,o;n===undefined&&(n=t,t="all"),e=e.replace(/\s/g,""),r=e.split(","),r[r.length-1]==""&&(r[r.length-2]+=",");for(s=0;s<r.length;s++){i=[],e=r[s].split("+");if(e.length>1){i=e.slice(0,e.length-1);for(o=0;o<i.length;o++)i[o]=y[i[o]];e=[e[e.length-1]]}e=e[0],e=b[e]||e.toUpperCase().charCodeAt(0),e in v||(v[e]=[]),v[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}}function o(e){if(typeof e=="string"){if(e.length!=1)return!1;e=e.toUpperCase().charCodeAt(0)}return t(w,e)!=-1}function u(){return w}function a(e){var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function f(e){g=e||"all"}function l(){return g||"all"}function c(e){var t,n,r;for(t in v){n=v[t];for(r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++}}function h(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function p(){var t=e.key;return e.key=E,t}var d,v={},m={16:!1,18:!1,17:!1,91:!1},g="all",y={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},b={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=[];for(d=1;d<20;d++)y["f"+d]=111+d;for(d in y)s[d]=!1;h(document,"keydown",function(e){n(e,g)}),h(document,"keyup",r),h(window,"focus",i);var E=e.key;e.key=s,e.key.setScope=f,e.key.getScope=l,e.key.deleteScope=c,e.key.filter=a,e.key.isPressed=o,e.key.getPressedKeyCodes=u,e.key.noConflict=p,typeof module!="undefined"&&(module.exports=key)}(this),function(){var e;window.KeyLauncher||(window.KeyLauncher={}),(e=window.KeyLauncher).loaders||(e.loaders={}),window.loadedScripts={},window.scriptTimers={},KeyLauncher.loaders.stylesheet=function(e,t,n){var r;return t==null&&(t={}),r=document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=e,document.getElementsByTagName("head")[0].appendChild(r),n.call(this)},KeyLauncher.loaders.script=function(e,t,n){var r,i,s,o,u,a;t==null&&(t={}),i=loadedScripts,a=scriptTimers,typeof t=="function"&&n==null&&(n=t,t={}),r=document.getElementsByTagName("head")[0],o=document.createElement("script"),o.src=e,o.type="text/javascript",u=this,s=function(){typeof n=="function"&&n.call(u,e,t,o);try{r.removeChild(o)}catch(s){!0}return i[e]=!0};if(t.once===!0&&i[e])return!1;r.appendChild(o),o.onreadystatechange=function(){if(o.readyState==="loaded"||o.readyState==="complete")return s()},o.onload=s;if(typeof navigator!="undefined"&&navigator!==null?navigator.userAgent.match(/WebKit/):void 0)return a[e]=setInterval(function(){return s(),clearInterval(a[e])},10)}}.call(this),function(){window.KeyLauncher.Launcher=function(){function Launcher(e){var t,n,r;this.options=e!=null?e:{},this.fn=e.fn,this.before=e.before,this.command=e.command,r=this.options.requires;for(t in r)n=r[t],this._dependencies[n]={loaded:!1,provides:t}}return Launcher.prototype._dependencies={},Launcher.prototype.run=function(){var state,type,url,_ref,_ref1,_results,_this=this;this.ran=!1,(_ref=this.before)!=null&&typeof _ref.call=="function"&&_ref.call(this);if(this.isReady())return this.onReady();_ref1=this._dependencies,_results=[];for(url in _ref1){state=_ref1[url];try{state.loaded=eval(state.provides)!=null}catch(e){state.loaded=!1}state.loaded!==!0?(type=url.match(/\.css/)?"stylesheet":"script",_results.push(KeyLauncher.loaders[type](url,function(e){return _this.onDependencyLoad(e)}))):_results.push(void 0)}return _results},Launcher.prototype.requires=function(e){return this._dependencies[e]={loaded:!1}},Launcher.prototype.isReady=function(){var e,t,n,r;t=!0,r=this._dependencies;for(e in r)n=r[e],n.loaded===!1&&(t=!1);return t},Launcher.prototype.onDependencyLoad=function(e){this._dependencies[e].loaded=!0;if(this.isReady())return this.onReady()},Launcher.prototype.onReady=function(){var e=this;if(!this.isReady()||this.ran!==!1)return;return function(){return e.fn.call(e),e.ran=!0}()},Launcher}()}.call(this),function(){var e;KeyLauncher.VERSION="0.0.4",KeyLauncher.on=function(e,t,n){var r;n==null&&(n={});if(e==null)throw"Must specify a valid key command";return r=new KeyLauncher.Launcher({command:e,fn:t||function(){},before:n.before,requires:n.requires||[]}),key(e,function(){return r.run.call(r)}),r},e=function(e,t){var n,r,i,s,o;s=KeyLauncher.currentSequence||"",o=t.shortcut,KeyLauncher.currentSequence=""+s+o,i=function(){var e,t;e=KeyLauncher.sequences,t=[];for(n in e)r=e[n],n.match(KeyLauncher.currentSequence)&&t
.push(n);return t}(),i.length>0||(KeyLauncher.currentSequence="");if(i.length===1&&(r=KeyLauncher.sequences[KeyLauncher.currentSequence]))return r.run.call(r),KeyLauncher.currentSequence=""},KeyLauncher.onSequence=function(t,n,r){var i,s,o,u,f;r==null&&(r={}),KeyLauncher.sequences||(KeyLauncher.sequences={}),s=KeyLauncher.sequences[t]=new KeyLauncher.Launcher({fn:n||function(){},requires:r.requires||[],before:r.before}),f=t.split("");for(o=0,u=f.length;o<u;o++)i=f[o],key(i,e);return s}}.call(this),function(){var e,t,n,r=[].slice;t=this,typeof exports!="undefined"?e=exports:e=t.CodeSync={},e.VERSION="0.6.5",e.backends={},e.util={},e.plugins={},e._config||(e._config={defaultFileType:"coffeescript",assetCompilationEndpoint:"http://localhost:9295/source",serverInfoEndpoint:"http://localhost:9295/info",sprocketsEndpoint:"http://localhost:9295/assets",socketEndpoint:"http://localhost:9295/faye",editorToggleHotkey:"ctrl+j",debugMode:!1}),e.set=function(t,n){return e._config[t]=n},e.get=function(t){return e._config[t]},e.enableLogging=function(){return e.set("debugMode",!0)},e.log=function(){var t;t=1<=arguments.length?r.call(arguments,0):[];if(e.get("debugMode")!==!1)return t.unshift("CodeSync Log:"),console.log.apply(console,t)},n=CodeMirror.prototype.setOption}.call(this),function(){var sourceEval;CodeSync.Client=function(){function e(e){var t=this;e==null&&(e={}),this.logLevel=e.logLevel||0,CodeSync.Client._clients.push(this),CodeSync.util.loadScript(""+CodeSync.get("socketEndpoint")+"/client.js",function(){if(t.clientLoaded===!0)return;return setTimeout(function(){try{return t.setupSocket()}catch(e){return console.log("Error setting up codesync client")}},25),t.clientLoaded=!0})}return e._clients=[],e.get=function(){return CodeSync.Client._clients[0]},e.prototype.VERSION=CodeSync.VERSION,e.prototype.logLevel=0,e.prototype.setupSocket=function(){var e=this;if(typeof Faye=="undefined"||Faye===null)return;return this.socket=new Faye.Client(CodeSync.get("socketEndpoint")),this.socket.subscribe("/code-sync/outbound",function(t){var n,r,i;console.log("notification",t),e.logLevel>0&&console.log("Received notification on outbound channel",t),(n=e.onNotification)!=null&&typeof n.call=="function"&&n.call(e,t),((r=t.name)!=null?r.match(/\.js$/):void 0)&&e.onJavascriptNotification.call(e,t);if((i=t.name)!=null?i.match(/\.css$/):void 0)return e.onStylesheetNotification.call(e,t)})},e.prototype.javascriptCallbacks=[],e.prototype.stylesheetCallbacks=[],e.prototype.removeJavascriptCallbacks=function(){return this.javascriptCallbacks=[]},e.prototype.removeStylesheetCallbacks=function(){return this.stylesheetCalbacks=[]},e.prototype.afterJavascriptChange=function(e,t){return t==null&&(t=!1),this.javascriptCallbacks||(this.javascriptCallbacks=[]),t===!0&&(this.javascriptCallbacks=[]),this.javascriptCallbacks.push(e)},e.prototype.afterStylesheetChange=function(e,t){return t==null&&(t=!1),this.stylesheetCallbacks||(this.stylesheetCallbacks=[]),t===!0&&(this.stylesheetCallbacks=[]),this.stylesheetCallbacks.push(e)},e.prototype.onJavascriptNotification=function(e){var t,n,r,i,s;n=this,CodeSync.processing=!0;if(e.source){sourceEval.call(window,e.source),s=n.javascriptCallbacks;for(r=0,i=s.length;r<i;r++)t=s[r],t.call!=null&&t.call(n,e);CodeSync.processing=!1;return}if(e.path)return console.log("notification",e.path),CodeSync.util.loadScript(""+CodeSync.get("sprocketsEndpoint")+"/"+e.path,function(){var r,i,s,o;s=n.javascriptCallbacks,o=[];for(r=0,i=s.length;r<i;r++)t=s[r],t.call!=null&&o.push(t.call(this,e));return o})},e.prototype.onStylesheetNotification=function(e){var t;t=this;if(e.path&&e.name)return CodeSync.util.loadStylesheet(""+CodeSync.get("sprocketsEndpoint")+"/"+e.path,{tracker:e.name},function(){var n,r,i,s,o;s=t.stylesheetCallbacks,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.call!=null&&o.push(n.call(this,e));return o})},e}(),sourceEval=function(source){return eval(source)}}.call(this),function(){var e,t;CodeSync.util||(CodeSync.util={}),e={},t={},CodeSync.util.loadStylesheet=function(e,t,n){var r;return t==null&&(t={}),r=document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=e,r.className="code-sync-asset",t.tracker&&($("link[data-tracker='"+t.tracker+"']").remove(),r.setAttribute("data-tracker",t.tracker)),document.getElementsByTagName("head")[0].appendChild(r),n!=null?typeof n.call=="function"?n.call(this):void 0:void 0},CodeSync.util.loadScript=function(n,r,i){var s,o,u,a,f,l;r==null&&(r={}),o=e,l=t,typeof r=="function"&&i==null&&(i=r,r={}),s=document.getElementsByTagName("head")[0],a=document.createElement("script"),a.src=n,a.type="text/javascript",f=this,u=function(){typeof i=="function"&&i.call(f,n,r,a);try{s.removeChild(a)}catch(e){!0}return o[n]=!0};if(r.once===!0&&o[n])return!1;s.appendChild(a),a.onreadystatechange=function(){if(a.readyState==="loaded"||a.readyState==="complete")return u()},a.onload=u;if(typeof navigator!="undefined"&&navigator!==null?navigator.userAgent.match(/WebKit/):void 0)return l[n]=setInterval(function(){return u(),clearInterval(l[n])},10)}}.call(this),function(){this.Skim={access:function(e){var t;return t=this[e],typeof t=="function"&&(t=t.call(this)),t===!0?[this]:t===!1||t==null?!1:Object.prototype.toString.call(t)!=="[object Array]"?[t]:t.length===0?!1:t},withContext:function(e,t){var n;return n=function(e){var t;return t=function(){},t.prototype=e,new t},e=n(e),e.safe||(e.safe=this.safe||function(e){var t;return(e!=null?e.skimSafe:void 0)?e:(t=new String(e!=null?e:""),t.skimSafe=!0,t)}),e.escape||(e.escape=this.escape||function(e){return e==null?"":e.skimSafe?e:this.safe((""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\//g,"&#47;"))}),t.call(e)}}}.call(this),function(){this.JST||(this.JST={}),this.JST["code_sync/editor/templates/asset_editor"]=function(){return function(e){return e==null&&(e={}),Skim.withContext.call({},e,function(){var e;return e=[],e.push('<div class="codesync-asset-editor"><div class="toolbar-wrapper"></div><div class="mode-selector-wrapper"></div></div>'),e.join("")})}}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["code_sync/editor/templates/asset_selector"]=function(){return function(e){return e==null&&(e={}),Skim.withContext.call({},e,function(){var e;return e=[],e.push('<div class="asset-selector-wrapper"><div class="search-input"><input placeholder="Type the name of an asset to open it" type="text" /></div><div class="search-results-wrapper"><div class="search-results"></div></div></div>'),e.join("")})}}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["code_sync/editor/templates/document_manager_tab"]=function(){return function(e){return e==null&&(e={}),Skim.withContext.call({},e,function(){var e,t,n,r,i,s,o,u,a;return r=[],n=this.display||this.doc.get("display")||this.doc.get("name"),this.doc!=null&&this.doc.isSticky()&&(t=!0),e=["document-tab"],this.cls!=null&&e.push(this.cls),this.doc!=null&&e.push("selectable"),((i=this.doc)!=null?!i.isSticky():!void 0)&&e.push("closable"),this.index!==0&&e.push("hideable"),this.doc!=null&&((s=this.doc)!=null?!s.isSticky():!void 0)&&e.push("editable"),r.push("<div"),u=[],u.push(this.escape(e.join(" "))),u.join(""),u.length>0&&(r.push(' class="'),r.push(u),r.push('"')),a=[],a.push(this.escape((o=this.doc)!=null?o.cid:void 0)),a.join(""),a.length>0&&(r.push(' data-document-cid="'),r.push(a),r.push('"')),r.push('><div class="contents">'),r.push(this.escape(n)),r.push("</div>"),t&&r.push('<div class="close-anchor"><X></X></div>'),r.push("</div>"),r.join("")})}}.call(this)}.call(this),function(){this.JST||(this.JST={}),this.JST["code_sync/editor/templates/preferences_panel"]=function(){return function(e){return e==null&&(e={}),Skim.withContext.call({},e,function(){var e,t,n;return e=[],e.push('<form><div class="control-group"><label>KeyBindings</label><div class="controls"><select name="keyMap"><option value="default">Default</option><option value="vim">Vim</option></select></div></div><div class="control-group"><label>Theme</label><div class="controls"><select name="theme"><option value="ambiance">Ambiance</option><option value="lesser-dark">Lesser Dark</option><option value="monokai">Monokai</option><option value="xq-light">XQ Light</option></select></div></div><div class="control-group"><label>Asset Compiler Endpoint</label><div class="controls"><input name="asset_endpoint" type="text"'),t=[],t.push(this.escape(CodeSync.get("assetCompilationEndpoint"))),t.join(""),t.length>0&&(e.push(' value="'),e.push(t),e.push('"')),e.push(' /></div></div><div class="control-group"><label>Hotkey</label><div class="controls"><input name="editor_hotkey" type="text"'),n=[],n.push(this.escape(CodeSync.get("editorToggleHotkey"))),n.join(""),n.length>0&&(e.push(' value="'),e.push(n),e.push('"')),e.push(' /></div></div><div class="control-group"><label>Position</label><div class="controls"><select name="position"><option value="top">Top</option><option value="bottom">Bottom</option></select></div></div></form>'),e.join("")})}}.call(this)}.call(this),function(){var helpers,__slice=[].slice;CodeSync.Document=Backbone.Model.extend({callbackDelay:150,initialize:function(e,t){var n,r,i=this;this.attributes=e;if(n=this.attributes.localStorageKey)(r=this.attributes).contents||(r.contents=localStorage.getItem(n));return Backbone.Model.prototype.initialize.apply(this,arguments),this.on("change:contents",this.onContentChange),this.on("change:name",function(){return i.set("mode",i.determineMode()),i.set("display",i.nameWithoutExtension())}),this.on("change:mode",function(){return i.set("extension",i.determineExtension(),{silent:!0})})},url:function(){return CodeSync.get("assetCompilationEndpoint")},saveToDisk:function(){if(this.isSaveable())return this.sendToServer(!0,"saveToDisk")},loadSourceFromDisk:function(e){var t=this;return $.ajax({url:""+this.url()+"?path="+this.get("path"),type:"GET",success:function(n){n==null&&(n={});if(n.success===!0&&n.contents!=null)return t.set("contents",n.contents,{silent:!0}),e(t)}})},toJSON:function(){return{name:this.nameWithoutExtension(),path:this.get("path"),extension:this.get("extension")||this.determineExtension(),contents:this.toContent()}},nameWithoutExtension:function(){var e;return e=this.get("extension")||this.determineExtension(),(this.get("name")||"untitled").replace(e,"")},toMode:function(){var e,t;return e=this.get("mode")||this.determineMode(),t=CodeSync.Modes.getMode(e)},toCodeMirrorMode:function(){var e;return(e=this.toMode())!=null?e.get("codeMirrorMode"):void 0},toCodeMirrorDocument:function(){return CodeMirror.Doc(this.toContent(),this.toCodeMirrorMode(),0)},toCodeMirrorOptions:function(){return this.toMode().get("codeMirrorOptions")},toContent:function(){var e;return""+(this.get("contents")||((e=this.toMode())!=null?e.get("defaultContent"):void 0)||" ")},onContentChange:function(){var e;return(e=this.get("localStorageKey"))&&localStorage.setItem(e,this.get("contents")),this.sendToServer(!1,"onContentChange")},sendToServer:function(e,t){var n,r=this;return e==null&&(e=!1),t==null&&(t=""),this.isSaveable()||(e=!1),n=e===!0?this.toJSON():_(this.toJSON()).pick("name","extension","contents"),CodeSync.log("Sending Data To "+CodeSync.get("assetCompilationEndpoint"),n),$.ajax({type:"POST",url:CodeSync.get("assetCompilationEndpoint"),data:JSON.stringify(n),error:function(e){return CodeSync.log("Document Process Error",arguments)},success:function(e){var n,i;CodeSync.log("Document Process Response",e),e.success===!0&&r.trigger("status",{type:"success",message:r.successMessage(t)}),e.success===!0&&e.compiled!=null&&r.set("compiled",e.compiled);if(e.success===!1&&e.error!=null)return r.set("error",(n=e.error)!=null?n.message:void 0),r.trigger("status",{type:"error",message:(i=e.error)!=null?i.message:void 0})}})},loadInPage:function(e){e==null&&(e={});if(this.type()==="stylesheet")return helpers.processStyleContent.call(this,this.get("compiled"));if(this.type()==="script"||this.type()==="template"){helpers.processScriptContent.call(this,this.get("compiled"));if(e.complete)return _.delay(e.complete,e.delay||this.callbackDelay)}},type:function(){switch(this.get("mode")){case"css":case"sass":case"scss":case"less":return"stylesheet";case"coffeescript":case"javascript":return"script";case"skim":case"mustache":case"jst":case"haml":case"eco":return"template"}},missingFileName:function(){var e;return e=this.get("path")||this.get("name"),e==null||e.length===0},determineExtension:function(){var e,t;t=this.get("path")||this.get("name");if(e=CodeSync.Document.getExtensionFor(t))return e;if(this.get("mode")!=null)return CodeSync.Modes.guessExtensionFor(this.get("mode")||CodeSync.get("defaultFileType"))},determineMode:function(){var e;return e=this.get("path")||this.get("name")||this.get("extension"),CodeSync.Modes.guessModeFor(e)},successMessage:function(e){if(this.type()==="template")return'Success.  Template will be available as JST["'+this.nameWithoutExtension()+'"]'},isSticky:function(){return this.get("sticky")!=null==1},isSaveable:function(){var e;return((e=this.get("path"))!=null?e.length:void 0)>0&&!this.get("doNotSave")}}),CodeSync.Document.getFileNameFrom=function(e){return e==null&&(e=""),e.split("/").pop()},CodeSync.Document.getExtensionFor=function(e){var t,n,r,i,s;e==null&&(e=""),t=CodeSync.Document.getFileNameFrom(e),s=t.split("."),n=s[0],r=2<=s.length?__slice.call(s,1):[];if(i=r.length>0&&r.join("."))return"."+i},CodeSync.Documents=Backbone.Collection.extend({model:CodeSync.Document,nextId:function(){return this.models.length+1},findOrCreateForPath:function(e,t){var n,r,i,s,o,u=this;return e==null&&(e=""),r=this.detect(function(t){var n;return(n=t.get("path"))!=null?n.match(e):void 0}),r!=null?typeof t=="function"?t(r):void 0:(o=CodeSync.Document.getFileNameFrom(e),i=CodeSync.Document.getExtensionFor(o),n=o.replace(i,""),s=this.nextId(),r=new CodeSync.Document({name:o,extension:i,display:n,path:e,id:s}),r.loadSourceFromDisk(function(){return typeof t=="function"?t(r):void 0}))}}),helpers={processStyleContent:function(e){return $("head style[data-codesync-document]").remove(),$("head").append("<style type='text/css' data-codesync-document=true>"+e+"</style>")},processScriptContent:function(code){var doc,evalRunner;return doc=this,evalRunner=function(code){try{return eval(code)}catch(e){throw doc.trigger("status",{type:"error",message:"JS Error: "+e.message,sticky:!0}),e}},evalRunner.call(window,code)}}}.call(this),function(){CodeSync.Gist=Backbone.Model.extend({initialize:function(e){this.attributes=e!=null?e:{}},url:function(){},toDocuments:function(){}})}.call(this),function(){var e;CodeSync.Modes=Backbone.Collection.extend({initialize:function(t,n){var r,i,s;return t==null&&(t=[]),n==null&&(n={}),t=function(){var t;t=[];for(i in e)s=e[i],t.push(r={id:i,name:s.name||i,codeMirrorMode:s.codeMirrorMode||i,extension:s.extension,extensionRegex:new RegExp(""+s.extension),defaultContent:s.defaultContent});return t}(),Backbone.Collection.prototype.initialize.apply(this,arguments),this.reset(t,{silent:!0})},findModeFor:function(e){var t,n=this;return e==null&&(e=""),e.match(/\./)||(e="."+e),t=this.detect(function(t){var n;return n=t.get("extensionRegex"),n.exec(e)}),t!=null?t.get("codeMirrorMode"):void 0},findExtensionFor:function(e){return e=this.detect(function(t){return t.get("codeMirrorMode")===e||t.get("id")===e}),e!=null?e.get("extension"):void 0},defaultMode:function(){return this.get(CodeSync.get("defaultFileType"))||this.first()}}),CodeSync.Modes.getMode=function(e){return CodeSync.Modes.get().get(e)},CodeSync.Modes.guessModeFor=function(e){return CodeSync.Modes.get().findModeFor(e)},CodeSync.Modes.guessExtensionFor=function(e){return CodeSync.Modes.get().findExtensionFor(e)},CodeSync.Modes.get=function(){var e;return(e=CodeSync.Modes).singleton||(e.singleton=new CodeSync.Modes)},CodeSync.Modes.defaultMode=function(){return CodeSync.Modes.get().defaultMode()},e={coffeescript:{extension:".coffee",codeMirrorOptions:{indentUnit:2,smartIndent:!0,tabSize:2,indentWithTabs:!1},defaultContent:'# You are currently in Coffeescript Mode\n#\n# Any coffeescript you type in here will be evaluated.\n#\n# defining this function will allow you to respond\n# to code and template changes that happen in this editor.\n#\n#\n# CodeSync.onScriptChange = (changeObject)->\n#   console.log "Detected new code from CodeSync", changeObject\n#\n#'},sass:{name:"Sass",extension:".css.sass",defaultContent:"// You are currently in Sass mode.",codeMirrorOptions:{indentUnit:2,smartIndent:!0,tabSize:2,indentWithTabs:!1}},scss:{codeMirrorMode:"css",extension:".css.scss",name:"SCSS",defaultContent:"/* You are currently in SCSS mode. */"},skim:{extension:".jst.skim",defaultContent:"// You are currently in Skim mode.\n// The contents of this template will be available on the JST object.",template:!0,codeMirrorOptions:{indentUnit:2,smartIndent:!0,tabSize:2,indentWithTabs:!1}},css:{name:"CSS",extension:".css",defaultContent:"/* You are currently in raw CSS mode. */"},javascript:{name:"Javascript",extension:".js",defaultContent:"/* You are currently in raw JS mode. */"}}}.call(this),function(){CodeSync.ProjectAssets=Backbone.Collection.extend({url:function(){return CodeSync.get("serverInfoEndpoint")},parse:function(e){var t,n,r;return n=function(){var n,i,s,o;s=_.uniq(e.project_assets),o=[];for(n=0,i=s.length;n<i;n++)r=s[n],t=r.replace(e.root,""),o.push({path:r,description:t});return o}(),n},initialize:function(){return this.fetch(),Backbone.Collection.prototype.initialize.apply(this,arguments)}})}.call(this),function(){CodeSync.AssetSelector=Backbone.View.extend({className:"codesync-asset-selector",events:{"keyup input":"keyHandler","click .search-result":"selectSearchResult"},initialize:function(e){var t=this;return e==null&&(e={}),Backbone.View.prototype.initialize.apply(this,arguments),this.editor=e.editor,_.bindAll(this,"keyHandler","loadAsset"),this.selected=new Backbone.Model({index:-1}),this.selected.on("change:index",function(e,n){return t.$(".search-result").removeClass("active"),t.$(".search-result").eq(n).addClass("active")})},keyHandler:function(e){switch(e.keyCode){case 13:return this.openCurrentSearchResult();case 27:return this.hide();case 38:return this.previousSearchResult();case 40:return this.nextSearchResult();default:return this.filterAssetsBy(this.$("input").val())}},openCurrentSearchResult:function(){var e,t,n=this;t=this.selected.attributes.index;if(e=this.searchResults[t])return this.selected.set("index",0,{silent:!0}),_.delay(function(){return n.loadAsset(n.searchResults[t].get("path"))},10),this.hide()},previousSearchResult:function(){var e;return e=this.selected.attributes.index,e-=1,e<0&&(e=0),this.selected.set({index:e})},nextSearchResult:function(){var e;return e=this.selected.attributes.index,e+=1,e>this.searchResults.length&&(e=0),this.selected.set({index:e})},selectSearchResult:function(e){var t;return this.loadAsset((t=$(e.target))!=null?t.data("path"):void 0)},loadAsset:function(e){return this.trigger("asset:selected",e)},filterAssetsBy:function(e){var t,n,r,i,s,o;if(e.length<=1)return;r=this.showSearchResults(),r.empty(),this.selected.set("index",-1,{silent:!0}),this.searchResults=this.collection.select(function(t){var n,r,i;return n=new RegExp(""+e),((r=t.get("description"))!=null?r.match(n):void 0)||((i=t.get("path"))!=null?i.match(n):void 0)}),this.searchResults=this.searchResults.slice(0,5),o=this.searchResults;for(t=i=0,s=o.length;i<s;t=++i)n=o[t],r.append("<div data-path='"+n.get("path")+"' class='search-result'>"+n.get("description")+"</div>");return r.height(this.searchResults.length*40)},showSearchResults:function(){return this.wrapper.show()},hideSearchResults:function(){return this.wrapper.hide()},toggle:function(){return this.visible?this.hide():this.show()},show:function(){return this.wrapper.empty(),this.visible=!0,this.$el.show(),this.hideSearchResults(),this.$("input").val("").focus()},hide:function(){return this.$el.hide(),this.visible=!1,this.editor.codeMirror.focus()},render:function(){return this.$el.html(JST["code_sync/editor/templates/asset_selector"]()),this.wrapper||(this.wrapper=this.$(".search-results-wrapper")),this}})}.call(this),function(){CodeSync.plugins.ColorPicker=Backbone.View.extend({className:"codesync-color-picker",widget:!1,spectrumOptions:{showAlpha:!1,preferredFormat:"hex6",flat:!0,showInput:!0,chooseText:"Choose"},initialize:function(e){return this.options=e!=null?e:{},_.extend(this,this.options),this.$el.append("<input type='color' class='color-picker-widget' />"),this.widget=this.$(".color-picker-widget")},remove:function(){return this.widget.spectrum("destroy"),this.$el.remove()},hide:function(){return this.widget.spectrum("hide"),this.$el.hide(),this.off("color:change")},show:function(){return this.widget.spectrum("show"),this.widget||this.$el.addClass("anchored"),this.$el.show()},syncWithToken:function(e,t){var n,r,i,s,o=this;return n=this.editor.codeMirror,this.widget===!0&&(this.$el.removeClass("anchored"),n.addWidget(t,this.el)),this.show(),i=n.getLine(t.line),s=e.start,r=e.end,this.widget.spectrum("set",e.string),this.on("color:change",_.debounce(function(e,i){return n.replaceRange("#"+i,{line:t.line,ch:s},{line:t.line,ch:r})},1200))},render:function(){var e,t=this;return e=_.extend(this.spectrumOptions,{move:_.debounce(function(e){return t.trigger("color:change",e,e.toHex())},200)}),this.widget.spectrum(this.spectrumOptions),this}}),CodeSync.plugins.ColorPicker.setup=function(e){var t;return this.colorPicker=new CodeSync.plugins.ColorPicker({editor:e}),this.$el.append(e.colorPicker.render().el),this.colorPicker.hide(),t=e.codeMirror,t.on("cursorActivity",function(){var n,r,i,s;return n=t.getCursor(),r=t.getTokenAt(n),((i=r.string)!=null?i.match(/#[a-fA-F0-9]{3,6}/g):void 0)&&((s=r.string)!=null?s.length:void 0)>=6?e.colorPicker.syncWithToken(r,n):e.colorPicker.hide()})}}.call(this),function(){CodeSync.plugins.DocumentManager=Backbone.View.extend({className:"codesync-document-manager",views:{},events:{"click .document-tab.selectable":"onDocumentTabSelection","click .document-tab.closable .close-anchor":"closeTab","click .document-tab.new-document":"createDocument","click .document-tab.save-document":"saveDocument","click .document-tab.open-document":"toggleAssetSelector","dblclick .document-tab.editable":"onDoubleClickTab","blur .document-tab.editable .contents":"onEditableTabBlur","keydown .document-tab.editable .contents":"onEditableTabKeyPress"},initialize:function(e){var t=this;return this.options=e!=null?e:{},_.extend(this,e),this.editor=e.editor,this.$el.append("<div class='document-tabs-container' />"),this.openDocuments=new CodeSync.Documents,this.openDocuments.on("add",this.renderTabs,this),this.openDocuments.on("remove",this.renderTabs,this),this.openDocuments.on("change:display",this.renderTabs,this),this.projectAssets=new CodeSync.ProjectAssets,this.state=new Backbone.Model({currentDocument:void 0}),this.state.on("change:currentDocument",this.highlightActiveDocumentTab,this),this.on("editor:hidden",function(){return t.$(".document-tab.hideable").hide()}),this.on("editor:visible",function(){return t.$(".document-tab.hideable").show(),t.toggleSaveButton()}),this.views.assetSelector=new CodeSync.AssetSelector({collection:this.projectAssets,documents:this.openDocuments,editor:this.editor}),this.views.assetSelector.on("asset:selected",this.onAssetSelection,this)},documentInTab:function(e){var t,n;e.is(".document-tab")||(e=e.parents(".document-tab").eq(0));if(t=e.data("document-cid"))return n=this.openDocuments.detect(function(e){return e.cid===t})},renderTabs:function(){var e,t,n=this;e=this.$(".document-tabs-container").empty(),t=JST["code_sync/editor/templates/document_manager_tab"],this.openDocuments.each(function(r,i){if(n.skipTabForDefault!==!0||i!==0)return e.append(t({doc:r,index:i}))}),this.allowNew!==!1&&e.append(t({display:"New",cls:"new-document"}));if(this.allowOpen!==!1)return e.append(t({display:"Open",cls:"open-document"}))},onAssetSelection:function(e){var t=this;return this.openDocuments.findOrCreateForPath(e,function(e){return t.openDocument(e)})},onEditableTabKeyPress:function(e){var t,n,r,i;i=this.$(e.target).closest(".document-tab"),t=i.children(".contents");if(e.keyCode===13||e.keyCode===27){e.preventDefault(),t.attr("contenteditable",!1);if(n=this.documentInTab(i))e.keyCode===13&&n.set("name",t.html()),e.keyCode===27&&(r=i.attr("data-original-value"))&&t.html(r);return this.editor.codeMirror.focus()}},onEditableTabBlur:function(e){var t,n,r,i;r=this.$(e.target).closest(".document-tab"),t=r.children(".contents"),console.log("On Editable Tab Blur",(i=this.documentInTab(r))!=null?i.cid:void 0);if(n=this.documentInTab(r))return n.set("name",t.html()),t.attr("contenteditable",!1)},onDoubleClickTab:function(e){var t,n;return n=this.$(e.target).closest(".document-tab"),t=n.children(".contents"),n.attr("data-original-value",t.html()),t.attr("contenteditable",!0)},onDocumentTabSelection:function(e){var t,n;return this.trigger("tab:click"),n=this.$(e.target).closest(".document-tab"),t=this.documentInTab(n),this.setCurrentDocument(t)},closeTab:function(e){var t,n,r;return r=this.$(e.target),t=this.documentInTab(r),n=this.openDocuments.indexOf(t),this.openDocuments.remove(t),this.setCurrentDocument(this.openDocuments.at(n-1)||this.openDocuments.at(0))},getCurrentDocument:function(){return this.currentDocument},openDocument:function(e,t){return t||(t=this.editor),this.openDocuments.add(e),this.setCurrentDocument(e,t)},setCurrentDocument:function(e,t){return this.currentDocument=e,t||(t=this.editor),t.loadDocument(this.currentDocument)},toggleSaveButton:function(){var e,t;return((e=this.currentDocument)!=null?(t=e.get("path"))!=null?t.length:void 0:void 0)>0?this.$(".save-document").show():this.$(".save-document").hide()},saveDocument:function(){return CodeSync.get("disableAssetSave")?this.editor.showStatusMessage({type:"error",message:"Saving is disabled in this demo."}):this.currentDocument.saveToDisk()},createDocument:function(){var e;return this.openDocuments.add({name:"untitled",display:"Untitled",mode:CodeSync.get("defaultFileType"),extension:CodeSync.Modes.guessExtensionFor(CodeSync.get("defaultFileType"))}),e=this.openDocuments.last(),this.openDocument(e)},toggleAssetSelector:function(){return this.views.assetSelector.toggle()},render:function(){return this.$el.append(this.views.assetSelector.render().el),this}}),CodeSync.plugins.DocumentManager.setup=function(e,t){var n,r=this;return t==null&&(t={}),t.editor=e,n=this.views.documentManager=new CodeSync.plugins.DocumentManager(t),_.extend(e.codeMirrorKeyBindings,{"Ctrl-T":function(){return n.toggleAssetSelector()},"Ctrl-S":function(){return n.getCurrentDocument().save()},"Ctrl-N":function(){return n.createDocument()}}),this.$el.append(n.render().el),n.on("tab:click",function(){if(r.visible===!1)return r.show()}),CodeSync.AssetEditor.prototype.loadDefaultDocument=function(){var t;return t=e.getDefaultDocument(),n.openDocument(t)}}}.call(this),function(){CodeSync.plugins.KeymapSelector=Backbone.View.extend({className:"keymap-selector",events:{"change select":"onSelect"},initialize:function(e){var t=this;return e==null&&(e={}),this.editor=e.editor,this.editor.on("change:keymap",function(e){return t.setValue(e)}),Backbone.View.prototype.initialize.apply(this,arguments)},onSelect:function(){var e;return e=this.$("select").val(),this.editor.setKeyMap(e)},setValue:function(e){return this.$("select").val(e)},render:function(){var e,t,n,r,i;t="",i=["default","vim"];for(n=0,r=i.length;n<r;n++)e=i[n],t+="<option value='"+e+"'>"+e+"</option>";return this.$el.html("<select>"+t+"</select>"),this}}),CodeSync.plugins.KeymapSelector.setup=function(e){var t;return t=this.views.keymapSelector=new CodeSync.plugins.KeymapSelector({editor:e}),e.$(".codesync-asset-editor").append(t.render().el)}}.call(this),function(){CodeSync.plugins.ModeSelector=Backbone.View.extend({className:"mode-selector",events:{"change select":"onSelect"},initialize:function(e){var t=this;return e==null&&(e={}),this.editor=e.editor,this.modes=this.editor.modes,this.modes.on("reset",this.render,this),this.editor.on("change:mode",function(e,n){return t.setValue(n)}),Backbone.View.prototype.initialize.apply(this,arguments)},onSelect:function(){var e,t;return t=this.$("select").val(),e=this.modes.get(t),this.editor.setMode(e)},setValue:function(e){return this.$("select").val(e)},render:function(){var e,t,n,r,i;t="",i=this.modes.models;for(n=0,r=i.length;n<r;n++)e=i[n],t+="<option value='"+e.id+"'>"+e.get("name")+"</option>";return this.$el.html("<select>"+t+"</select>"),this}}),CodeSync.plugins.ModeSelector.setup=function(e){var t;return t=this.views.modeSelector=new CodeSync.plugins.ModeSelector({editor:e}),e.$(".codesync-asset-editor").append(t.render().el),e.on("document:loaded",function(e){return t.setValue(e.get("mode"))})}}.call(this),function(){CodeSync.NameInput=Backbone.View.extend({className:"asset-name-input",events:{"change input":"updateEditor","keyup input":"updateEditor","blur input":"toggle"},initialize:function(e){return e==null&&(e={}),this.editor=e.editor,_.bindAll(this,"_updateEditor","updateEditor","toggle"),this._updateEditor=_.debounce(CodeSync.NameInput.prototype._updateEditor,300),Backbone.View.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.append("<input type='text' placeholder='Enter the name of the asset' />"),this.$el.hide(),this},updateEditor:function(){return this._updateEditor()},_updateEditor:function(){var e,t;e=this.$("input").val();if(e.match(/\./))return this.editor.currentName=e,t=this.editor.determineModeFor(e)},setValue:function(e){return this.$("input").val(e)},getValue:function(){return this.$("input").val()},toggle:function(){var e;return((e=this.getValue())!=null?e.length:void 0)===0&&(this.editor.setDefaultExtension(),this.editor.currentName=this.editor.currentPath=void 0),this.$el.toggle()}})}.call(this),function(){CodeSync.plugins.PreferencesPanel=Backbone.View.extend({className:"preferences-panel",events:{"change select,input":function(){return this.trigger("update:preferences")}},renderHidden:!0,initialize:function(e){return this.editor=e.editor,this.$el.html(JST["code_sync/editor/templates/preferences_panel"]()),Backbone.View.prototype.initialize.apply(this,arguments)},values:function(){var e,t,n,r,i,s;n={},s=this.$("input,select");for(r=0,i=s.length;r<i;r++)e=s[r],t=$(e),n[t.attr("name")]=t.val();return n},toggle:function(){return this.syncWithEditorOptions(),this.$el.toggle()},syncWithEditorOptions:function(){return this.$('select[name="theme"]').val(this.editor.codeMirror.getOption("theme")),this.$('select[name="keyMap"]').val(this.editor.codeMirror.getOption("keyMap")),this.$('input[name="asset_endpoint"]').val(CodeSync.get("assetCompilationEndpoint")),this.$('input[name="editor_hotkey"]').val(CodeSync.get("editorToggleHotKey"))},render:function(){return this.renderHidden===!0&&this.$el.hide(),this}}),CodeSync.plugins.PreferencesPanel.setup=function(e){var t,n=this;return t=new CodeSync.plugins.PreferencesPanel({editor:this}),this.$(".toolbar-wrapper").append("<div class='button toggle-preferences'>Preferences</div>"),this.events["click .toggle-preferences"]=function(){return t.toggle()},this.$el.append(t.render().el),t.on("update:preferences",function(){var n;return n=t.values(),e.setTheme(n.theme),e.setKeyMap(n.keyMap),CodeSync.set("assetCompilationEndpoint",n.asset_endpoint),CodeSync.AssetEditor.setHotKey(n.editor_hotkey)}),e.on("codemirror:setup",function(e){return e.on("focus",function(){return t.$el.hide()})}),t.on("update:preferences",function(){var n;n=t.values();if(e.position!==n.position)return e.setPosition(n.position)})}}.call(this),function(){CodeSync.AssetEditor=Backbone.View.extend({className:"codesync-editor",autoRender:!0,autoAppend:!0,appendTo:"body",renderVisible:!0,position:"top",effect:"slide",effectDuration:400,editorChangeThrottle:800,visible:!1,showVisibleTab:!0,hideable:!0,startMode:"scss",theme:"ambiance",name:"code_sync",keyBindings:"",events:{"click .status-message":"removeStatusMessages","click .hide-button":"hide"},plugins:["DocumentManager","ModeSelector","PreferencesPanel"],pluginOptions:{},initialize:function(e){var t=this;this.options=e!=null?e:{},_.extend(this,this.options),_.bindAll(this,"editorChangeHandler"),this.views={},this.modes=CodeSync.Modes.get(),this.startMode=this.modes.get(this.startMode)||CodeSync.Modes.defaultMode(),this.setPosition(this.position,!1),this.on("editor:change",_.debounce(this.editorChangeHandler,this.editorChangeThrottle),this),this.on("codemirror:setup",function(){return t.loadDefaultDocument()}),this.$el.html
(JST["code_sync/editor/templates/asset_editor"]()),this.name!=null&&this.$el.attr("data-codesync",this.name),this.loadPlugins();if(this.autoRender!==!1)return this.render()},addPlugin:function(e){var t;return(t=CodeSync.plugins[e])!=null?t.setup.call(this,this):void 0},loadPlugins:function(){var e,t,n,r,i,s,o;s=this.plugins,o=[];for(r=0,i=s.length;r<i;r++){n=s[r];if(CodeSync.plugins[n]==null)continue;t=this.pluginOptions[n]||{},e=CodeSync.plugins[n],o.push(e.setup.call(this,this,t))}return o},render:function(){var e=this;return this.rendered===!0?this:(this.setupToolbar(),this.delegateEvents(),this.rendered=!0,this.autoAppend===!0&&$(this.appendTo).prepend(this.el),this.renderHidden===!0&&(this.show(),setTimeout(function(){return e.hide()},900)),this.renderVisible===!0&&this.show(),this)},setupCodeMirror:function(){var e,t=this;if(this.codeMirror!=null)return;return this.height||(this.height=this.$el.height()),this.codeMirror=CodeMirror(this.$(".codesync-asset-editor")[0],this.getCodeMirrorOptions()),this.on("initial:document:load",function(){t.startMode&&t.setMode(t.startMode),t.keyBindings&&t.setKeyMap(t.keyBindings);if(t.theme||(t.theme=localStorage.getItem("codesync:theme")))return t.setTheme(t.theme)}),e=function(e){return t.trigger("editor:change",t.codeMirror.getValue(),e)},this.codeMirror.on("change",_.debounce(e,this.editorChangeThrottle)),this.trigger("codemirror:setup",this.codeMirror),this},codeMirrorKeyBindings:{"Ctrl+Command+1":function(){var e;return(e=CodeSync.get("commandOne"))!=null?typeof e.call=="function"?e.call(this):void 0:void 0},"Ctrl+Command+2":function(){var e;return(e=CodeSync.get("commandTwo"))!=null?typeof e.call=="function"?e.call(this):void 0:void 0},"Ctrl+Command+3":function(){var e;return(e=CodeSync.get("commandThree"))!=null?e.call(this):void 0},"Ctrl+J":function(){return this.toggle()}},getCodeMirrorOptions:function(){var e,t,n,r,i,s;r={},i=this.codeMirrorKeyBindings;for(t in i)e=i[t],r[t]=!1,key(t,_.bind(e,this));return n={theme:"lesser-dark",lineNumbers:!0,mode:((s=this.startMode)!=null?s.get("codeMirrorMode"):void 0)||CodeSync.get("defaultFileType"),extraKeys:r}},editorChangeHandler:function(e){return this.currentDocument.set("contents",e)},setPosition:function(e,t){var n,r,i,s;this.position=e!=null?e:"top",t==null&&(t=!0),s=["top","bottom","static"];for(r=0,i=s.length;r<i;r++)n=s[r],n!==this.position&&this.$el.removeClass(""+n+"-positioned");return this.$el.addClass(""+this.position+"-positioned"),t===!0&&this.show(),this},setKeyMap:function(e){var t;return this.keyMap!=null&&e!==this.keyMap&&(this.trigger("change:keyMap",e,this.keyMap),(t=this.onKeyMapChange)!=null&&t.call(this,e,this.keyMap)),this.codeMirror.setOption("keyMap",this.keyMap=e)},setTheme:function(e){var t;return this.theme!=null&&e!==this.theme&&(this.trigger("change:theme",e,this.theme),(t=this.onThemeChange)!=null&&t.call(this,e,this.theme)),this.$el.attr("data-codesync-theme",this.theme=e),this.codeMirror.setOption("theme",this.theme=e)},setMode:function(e){var t,n;return this.$el.attr("data-codesync-mode",this.mode),this.mode!=null&&e!==this.mode&&(this.trigger("change:mode",e,e.id),(t=this.onModeChange)!=null&&t.call(this,e,this.mode)),this.mode=e,((n=this.mode)!=null?n.get:void 0)!=null&&(this.codeMirror.setOption("mode",this.mode.get("codeMirrorMode")),this.currentDocument.set("mode",this.mode.id),this.currentDocument.set("extension",CodeSync.Modes.guessExtensionFor(this.mode.id))),this},setCodeMirrorOptions:function(e){var t,n,r;e==null&&(e={}),r=[];for(t in e)n=e[t],r.push(this.codeMirror.setOption(t,n));return r},setupToolbar:function(){if(this.hideable===!0)return this.$(".toolbar-wrapper").append("<div class='button hide-button'>Hide</div>")},getDefaultDocument:function(){var e,t,n;return t={mode:this.options.startMode||CodeSync.get("defaultFileType"),sticky:!0,doNotSave:!0,name:this.defaultDocumentName||"codesync",display:"CodeSync"},n=_.extend(t,this.document),e=new CodeSync.Document(n)},loadDefaultDocument:function(){return this.loadDocument(this.getDefaultDocument())},loadDocument:function(e){return this.currentDocument!=null?(this.currentDocument.off("status",this.showStatusMessage),this.currentDocument.off("change:compiled",this.applyDocumentContentToPage),this.currentDocument.off("change:mode",this.applyDocumentContentToPage,this)):(this.currentDocument=e,this.trigger("initial:document:load")),this.currentDocument=e,this.trigger("document:loaded",e),this.codeMirror.swapDoc(this.currentDocument.toCodeMirrorDocument()),this.currentDocument.on("status",this.showStatusMessage,this),this.currentDocument.on("change:compiled",this.applyDocumentContentToPage,this),this.currentDocument.on("change:mode",this.applyDocumentContentToPage,this),this.setCodeMirrorOptions(this.currentDocument.toCodeMirrorOptions())},applyDocumentContentToPage:function(){var e,t=this;return this.currentDocument!=null&&this.currentDocument.toMode()!==this.mode&&this.setMode(this.currentDocument.toMode()),(e=this.currentDocument)!=null?e.loadInPage({complete:function(){var e,n;(t.currentDocument.type()==="script"||t.currentDocument.type()==="template")&&(e=CodeSync.onScriptChange)!=null&&e.call(window,t.currentDocument.attributes);if(t.currentDocument.type()==="stylesheet")return(n=CodeSync.onStylesheetChange)!=null?n.call(window,t.currentDocument.attributes):void 0}}):void 0},removeStatusMessages:function(){return this.$(".status-message").remove()},showStatusMessage:function(e){var t,n=this;e==null&&(e={}),this.removeStatusMessages(),((t=e.message)!=null?t.length:void 0)>0&&this.$el.prepend("<div class='status-message "+e.type+"'>"+e.message+"</div>");if(e.type==="success")return _.delay(function(){return n.$(".status-message.success").animate({opacity:0},{duration:400,complete:function(){return n.$(".status-message.success").remove()}})},1200)},hintHeight:function(){var e;return e=this.showVisibleTab?this.$(".document-tabs-container").height():0},visibleStyleSettings:function(){var e;return this.position==="static"&&(e={}),this.position==="top"&&(e={top:"0px",bottom:"auto"}),this.position==="bottom"&&(e={top:"auto",bottom:"0px",height:"400px"}),e},hiddenStyleSettings:function(){var e;return this.position==="static"&&(e={}),this.position==="top"&&(e={top:(this.$el.height()+8)*-1+this.hintHeight(),bottom:"auto"}),this.position==="bottom"&&(e={top:"auto",bottom:"0px",height:""+(this.hintHeight()-8)+"px"}),e},hide:function(e){var t,n,r,i,s=this;e==null&&(e=!0),this.animating=!0,i=this.views;for(r in i)n=i[r],n.trigger("editor:hidden");return t=_.debounce(function(){return s.visible=!1,s.animating=!1},this.effectDuration+20),e!==!1?(this.$el.animate(this.hiddenStyleSettings(),{duration:this.effectDuration,complete:t}),_.delay(t,this.effectDuration)):t(),this},show:function(e){var t,n,r,i,s=this;e==null&&(e=!0),this.setupCodeMirror(),this.animating=!0,i=this.views;for(r in i)n=i[r],n.trigger("editor:visible");return t=_.debounce(function(){return s.visible=!0,s.animating=!1},this.effectDuration),e!==!1?(this.$el.animate(this.visibleStyleSettings(),{duration:this.effectDuration,complete:t}),_.delay(t,this.effectDuration)):t(),this},toggle:function(){if(this.animating===!0)return;return this.visible===!0?this.hide(!0):this.show(!0)}}),CodeSync.commands={commandOne:function(){},commandTwo:function(){},commandThree:function(){}},CodeSync.AssetEditor.keyboardShortcutInfo="ctrl+j: toggle editor ctrl+t: open asset",CodeSync.AssetEditor.toggleEditor=_.debounce(function(e){return e==null&&(e={}),window.codeSyncEditor!=null?window.codeSyncEditor.toggle():(window.codeSyncEditor=new CodeSync.AssetEditor(e),$("body").prepend(window.codeSyncEditor.render().el),window.codeSyncEditor.show())},1),CodeSync.AssetEditor.setHotKey=function(e,t){return t==null&&(t={}),CodeSync.set("editorToggleHotkey",e),key(e,function(){return CodeSync.AssetEditor.toggleEditor(t)})}}.call(this),function(){}.call(this),function(){}.call(this);